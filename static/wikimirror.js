"use strict";
(function(){
function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),u=new B(r||[]);return a(o,"_invoke",{value:E(e,n,u)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var h="suspendedStart",D="suspendedYield",f="executing",m="completed",p={};function g(){}function w(){}function v(){}var _={};l(_,o,(function(){return this}));var y=Object.getPrototypeOf,F=y&&y(y(R([])));F&&F!==n&&r.call(F,o)&&(_=F);var b=v.prototype=g.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,i,o,u){var s=d(e[a],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==_typeof(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function E(t,n,r){var a=h;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var s=x(u,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var l=d(t,n,r);if("normal"===l.type){if(a=r.done?m:D,l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=m,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function z(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(_typeof(t)+" is not iterable")}return w.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:w,configurable:!0}),w.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(C.prototype),l(C.prototype,u,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(b),l(b,s,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(z),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return u.type="throw",u.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),z(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;z(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,u=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return u}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,u,"next",e)}function u(e){asyncGeneratorStep(i,r,a,o,u,"throw",e)}o(void 0)}))}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
/**
 * WikiMirror - A Wikimedia Projects Reverse Proxy based on Nginx
 *
 * Copyright (c) 2019-present, 安忆.
 *
 * @author 安忆 <i@anyi.in>
 * @file wikimirror.js
 * @license GPL v3
 * @link <https://github.com/AnYiEE/nginx-wikimirror>
 */
!(function(e){var t={domain:"example.org",modules:{all:{ajaxLogin:{enable:!0,param:"init"},confirmLogout:{enable:!0},darkMode:{enable:!0,param:"normal"},floatTOC:{enable:!0},showRedirect:{enable:!0},viewOnOtherWikis:{enable:!0}},body:{displayAnonHide:{enable:!0,param:!1}},dom:{},mw:{collapsibleSidebar:{enable:!0},scrollUpButton:{enable:!0},diffLink:{enable:!0},disableAnonEdit:{enable:!0}},standard:{}},regexps:{noDarkmode:/developer|techblog/,xtools_api:/xtools\.(wmcloud|wmflabs)\.org\/api\//i}},n=(function(e,t,n,r,a,i,o){function u(e){var t=e.domain,n=e.modules,r=e.regexps;_classCallCheck(this,u),_defineProperty(this,"DOMAIN",void 0),_defineProperty(this,"DOMAIN_REGEX",void 0),_defineProperty(this,"DOMAIN_SPLIT",void 0),_defineProperty(this,"MODULE_LIST",void 0),_defineProperty(this,"REGEX_LIST",void 0),_defineProperty(this,"messages",void 0),_defineProperty(this,"textCache",void 0),_defineProperty(this,"windowManager",void 0),this.DOMAIN=t,this.DOMAIN_REGEX=t.replace(".","\\."),this.DOMAIN_SPLIT=t.split("."),this.MODULE_LIST=n,this.REGEX_LIST=r,this.messages=this.initMessages(),this.textCache=new Map,this.windowManager=void 0}return _createClass(u,[{key:"getRealText",value:function(e,t){var n=this;if(-1===["wiki","wikiless"].indexOf(t)&&this.textCache.has(e))return this.textCache.get(e);var r,a,i=e,o=new RegExp(this.DOMAIN_REGEX,"gi"),u=new RegExp("(wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki|planet)\\.".concat(this.DOMAIN_REGEX),"gi"),s=new RegExp("latex-(png|svg)\\.".concat(this.DOMAIN_REGEX),"gi"),l=new RegExp("\\\\\\.wikipedia\\\\\\.\\(\\?:".concat(this.DOMAIN_SPLIT[0],"\\\\\\.\\)\\?").concat(this.DOMAIN_SPLIT[1]),"g"),c=/background(-image)?:url\(('|")?(https?:)?\/\/upload\.wikimedia\.org/gi,d=
  /**
   * emoji-regex 10.2.1
   *
   * @license MIT
   * @link <https://github.com/mathiasbynens/emoji-regex>
   */
  /[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,
h=document.querySelectorAll("".concat("wikiless"===t?"body,body *":this.hasClass("diff","table")?".mw-parser-output,.mw-parser-output *":".mw-body,.mw-body *")),D=document.querySelector("#wpTextbox1"),f=function(e){return e.replace(d,'<wikimirror-emoji class="mw-no-invert">$&</wikimirror-emoji>')};-1!==["wiki","wikiless"].indexOf(t)&&((function(){if(h&&(!(n.hasClass("mw-special-AbuseFilter")||n.hasClass("mw-special-EditWatchlist")||n.hasClass("mw-special-Search"))||!("object"===("undefined"==typeof WikiMirror?"undefined":_typeof(WikiMirror))&&("function"==typeof WikiMirror.getRealText&&("number"==typeof WikiMirror.getRealText.initCount&&WikiMirror.getRealText.initCount<1||void 0===WikiMirror.getRealText.initCount)||void 0===WikiMirror.getRealText)||void 0===WikiMirror)||n.hasClass("action-history"))){var e,t=[],r=_createForOfIteratorHelper(h);try{for(r.s();!(e=r.n()).done;){var a,i=_createForOfIteratorHelper(e.value.childNodes);try{for(i.s();!(a=i.n()).done;){var u=a.value;3===u.nodeType&&t.push(u)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}for(var s=function(){var e,t=m[D],r=null!==(e=t.nodeValue)&&void 0!==e?e:"";if(!r.trim())return 1;if((r.match(o)||r.match(l))&&(r=n.getRealText(r)),r.match(c)&&n.hasClass("action-view")&&(r=r.replace(c,"background$1:url($2$3//upload.".concat(n.DOMAIN))),t.nodeValue!==r&&requestAnimationFrame((function(){t.nodeValue=r})),r.match(d)&&!n.hasClass("action-edit")&&!n.hasClass("action-submit")&&("object"===("undefined"==typeof WikiMirror?"undefined":_typeof(WikiMirror))&&("function"==typeof WikiMirror.getRealText&&("number"==typeof WikiMirror.getRealText.initCount&&WikiMirror.getRealText.initCount<1||void 0===WikiMirror.getRealText.initCount)||void 0===WikiMirror.getRealText)||void 0===WikiMirror)){var a=document.createElement("wikimirror-emoji-line");a.innerHTML=f(r),t.parentNode&&requestAnimationFrame((function(){t.parentNode.insertBefore(a,t.nextSibling),t.remove()}))}},D=0,m=t;D<m.length;D++)s();for(var p=0,g=[].concat(_toConsumableArray(document.querySelectorAll('a[href*="//archive."]')),_toConsumableArray(document.querySelectorAll('a[href*="//pageviews."]')),_toConsumableArray(document.querySelectorAll('a[href*="//xtools."]')));p<g.length;p++){var w=g[p],v=w.href;v.match(o)&&(w.href=n.getRealText(v)),n.REGEX_LIST.xtools_api.test(v)&&(w.href=v.replace(n.REGEX_LIST.xtools_api,"xtools-api.".concat(n.DOMAIN,"/")))}for(var _=0,y=[].concat(_toConsumableArray(document.querySelectorAll('input[name="clientUrl"]')),_toConsumableArray(document.querySelectorAll('input[name="intendedWikitext"]')));_<y.length;_++){var F=y[_],b=F.value;b.match(o)&&(F.value=n.getRealText(b))}var k=document.querySelector("#ca-fileExporter a");if(k){var C,E=k.href,x=null===(C=E.match(/clientUrl=(\S+?)&/))||void 0===C?void 0:C[1];x&&(k.href=E.replace(x,n.getRealText(x)))}}})(),"wiki"===t&&D&&(null!==(r=window.wikEd)&&void 0!==r&&r.useWikEd&&wikEd.UpdateTextarea(),e="function"==typeof jQuery?jQuery("#wpTextbox1").val():D.value));if("string"==typeof e&&!e.trim()||"string"!=typeof e)return this.textCache.set(i,e),e;if("emoji"===t)return e=e.match(d)?f(e):e,this.textCache.set(i,e),e;(this.textCache.has(e)?(i=e,e=this.textCache.get(i)):e=e.replace(new RegExp("phab\\.".concat(this.DOMAIN),"gi"),"phab.wmfusercontent.org").replace(new RegExp("xtools-api\\.".concat(this.DOMAIN,"\\/"),"gi"),"xtools.wmcloud.org/api/").replace(new RegExp("wma\\.".concat(this.DOMAIN_REGEX),"gi"),"wma.wmcloud.org").replace(new RegExp("recommend\\.".concat(this.DOMAIN_REGEX),"gi"),"recommend.wmflabs.org").replace(s,"wikimedia.org/api/rest_v1/media/math/render/$1").replace(u,"$1.org").replace(o,"wikimedia.org").replace(l,"\\.wikipedia\\.org").replace(/r-e-p-l-a-c-e\.org/g,this.DOMAIN),"wiki"===t&&D)&&("function"==typeof jQuery?jQuery("#wpTextbox1").val(e):D.value=e,null!==(a=window.wikEd)&&void 0!==a&&a.useWikEd&&wikEd.UpdateFrame());return this.textCache.set(i,e),e}},{key:"init",value:function(){return(e=e||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=_slicedToArray(n[t],2),i=a[0],o=a[1],u=o.enable,s=o.param;r.isValidKey(r,i)&&u&&r[i](s)}})(this.MODULE_LIST.standard),this.darkMode("check")&&!this.REGEX_LIST.noDarkmode.test(location.host)&&(document.documentElement.style.filter="invert(.95) hue-rotate(.5turn)"),this.setCss("/wikimirror.css?date=20230901","url").then((function(){console.log("WikiMirror basic stylesheet load succeeded.")})).catch((function(){console.log("WikiMirror basic stylesheet load failed.")})),e.next=6,this.bodyReady();case 6:return n=e.sent,t(this.MODULE_LIST.body),n?(this.darkMode("init"),console.log("WikiMirror basic methods load succeeded.")):(this.REGEX_LIST.noDarkmode.test(location.host)||this.darkMode("init"),console.log("WikiMirror non-wiki mode.")),this.domReady().then((function(){if(t(r.MODULE_LIST.dom),window.addEventListener("beforeprint",(function(){r.darkMode("meta","color-scheme","remove");var e,t=_createForOfIteratorHelper(document.querySelectorAll("a"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.href=r.getRealText(n.href)}}catch(e){t.e(e)}finally{t.f()}})),window.addEventListener("afterprint",(function(){location.reload()})),n){var e;r.getRealText(void 0,"wiki");var a=document.querySelector("#wpSave");if(a){a.addEventListener("click",(function e(t){t.preventDefault(),r.getRealText(void 0,"wiki"),a.removeEventListener("click",e),a.click()})),r.getConf("wgUserName")||a.removeAttribute("accesskey")}new MutationObserver((function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a,i=_createForOfIteratorHelper(t.value.addedNodes);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o instanceof HTMLElement){if(r.hasClass("mw-special-UrlShortener")){var u,s,l=_createForOfIteratorHelper(o.querySelectorAll("code"));try{for(l.s();!(s=l.n()).done;){var c=s.value,d=c.innerHTML;d=r.getRealText(d);var h="wikipedia.org";-1!==d.indexOf(h)&&(d="".concat(d," (").concat(d.replace(h,r.DOMAIN),")")),c.innerHTML=d}}catch(e){l.e(e)}finally{l.f()}null!==(u=mw.urlshortener)&&void 0!==u&&u.regex&&(mw.urlshortener.regex=new RegExp("".concat(mw.config.get("wgUrlShortenerAllowedDomains"),"|^(.*\\.)?").concat(r.DOMAIN_REGEX,"$")))}var D,f=_createForOfIteratorHelper(o.querySelectorAll(".ext-related-articles-card-list h3 a"));try{for(f.s();!(D=f.n()).done;){var m=D.value,p=m.innerHTML;m.innerHTML=r.getRealText(p,"emoji")}}catch(e){f.e(e)}finally{f.f()}var g,w=_createForOfIteratorHelper(o.querySelectorAll(".mm-submenu a"));try{for(w.s();!(g=w.n()).done;){var v=g.value,_=new URL(v.href,location.origin);v.href="".concat(_.origin).concat(r.getRealText(_.pathname)).concat(_.search)}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}})).observe(document.body,{childList:!0,subtree:!0});var i=document.querySelector(".cx-skin-menu-content-list"),o=null!==(e=document.querySelector("#footer-places-statslink a"))&&void 0!==e?e:document.querySelector("#statslink a");i&&(i.id="p-tb"),o&&(o.href=r.getRealText(o.href))}else{var u,s=window.portalSearchDomain;s&&(window.portalSearchDomain=s.replace(/org$/,r.DOMAIN)),null===(u=document.querySelector(".pure-form#search-form"))||void 0===u||u.action.replace(/org\//,r.DOMAIN),r.getRealText(void 0,"wikiless")}})),n&&this.mwReady().then(_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("WikiMirror dependencies load succeeded."),r.messages=r.initMessages(),t(r.MODULE_LIST.mw),document.addEventListener("copy",(function(e){var t,n,a,i=null!==(t=null===(n=getSelection())||void 0===n?void 0:n.toString())&&void 0!==t?t:"";new RegExp(r.DOMAIN_REGEX,"gi").test(i)&&(e.preventDefault(),i=r.getRealText(i),null===(a=e.clipboardData)||void 0===a||a.setData("text/plain",i))})),WikiMirror.getRealText.initCount=0,WikiMirror.getRealText.isAceInit=!1,mw.hook("codeEditor.configure").add((function(e){var t;WikiMirror.getRealText.isAceInit||(WikiMirror.getRealText.isAceInit=!0,null===(t=document.querySelector("#wpSave"))||void 0===t||t.addEventListener("click",(function(){e.setValue(r.getRealText(e.getValue()))})))})),mw.hook("wikipage.content").add((function(e){("mw-content-text"===e.attr("id")||e.hasClass("mw-changeslist"))&&(WikiMirror.getRealText.initCount>0&&r.getRealText(void 0,"wiki"),WikiMirror.getRealText.initCount++,r.diffLink({diffId:r.getConf("wgDiffNewId"),oldId:r.getConf("wgDiffOldId"),revisionId:r.getConf("wgRevisionId")}))})),e.next=10,r.domReady();case 10:t(r.MODULE_LIST.all),console.log("WikiMirror load succeeded.");case 12:case"end":return e.stop()}}),e)})))).catch((function(){var e,t;r.setCss(null!==(e=null===(t=document.querySelector("noscript"))||void 0===t?void 0:t.innerHTML.replace(/<\/?style>/g,""))&&void 0!==e?e:"","css"),console.log("WikiMirror dependencies load failed.")})),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"collapsibleSidebar",value:function(){return(t=t||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasClass("ltr")||!this.hasClass("skin-vector-legacy")||null!==(t=RLPAGEMODULES)&&void 0!==t&&-1!==t.indexOf("ext.gadget.CollapsibleSidebar")||-1!==["bo","dz"].indexOf(this.getConf("wgContentLanguage"))){e.next=5;break}return e.next=3,mw.loader.using("mediawiki.storage");case 3:n="WikiMirror collapsibleSidebar.js load",this.setJs("//zh.wikipedia.".concat(this.DOMAIN,"/wiki/MediaWiki:Gadget-CollapsibleSidebar.js?action=raw&ctype=text/javascript"),"defer").then((function(){console.log("".concat(n," succeeded."))})).catch((function(){console.log("".concat(n," failed."))}));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"scrollUpButton",value:function(){var e;if(null===(e=RLPAGEMODULES)||void 0===e||-1===e.indexOf("ext.gadget.scrollUpButton")){var t="WikiMirror scrollUpButton.js load";this.setJs("//zh.wikipedia.".concat(this.DOMAIN,"/wiki/MediaWiki:Gadget-scrollUpButton.js?action=raw&ctype=text/javascript"),"async").then((function(){console.log("".concat(t," succeeded."))})).catch((function(){console.log("".concat(t," failed."))}))}}},{key:"ajaxLogin",value:function(e){return(n=n||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b,k,C,E,x,A,z,B,R,S,T,O,L,M,j,I,N,U,H=this,P=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(a=P.length>1&&void 0!==P[1]?P[1]:{}).username,o=a.password,!new RegExp("^\\S+?\\.m\\.".concat(this.DOMAIN_REGEX)).test(location.host)){e.next=3;break}return e.abrupt("return");case 3:if(u=function(e){return H.messages.ajaxLogin[e]||e},s=-1!==location.host.indexOf("wikitech")?"lastLoginWikitech":"lastLogin","init"!==t){e.next=20;break}if(!this.getConf("wgUserName")){e.next=8;break}return e.abrupt("return");case 8:c=null===(l=document.querySelector(".mw-ui-icon-minerva-logIn"))||void 0===l?void 0:l.parentElement,d=document.querySelectorAll('#ca-cb-login,#topbar>a[href*="UserLogin"],#pt-login-2,.vector-user-menu-login,#pt-login'),h=_toConsumableArray(d),c&&h.push(c),D=this.getCookie("".concat(s,"UserName")),f=this.getCookie("".concat(s,"Password")),m=function(e){return"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key},p=function(e){m(e)||(e.preventDefault(),H.ajaxLogin())},g=_createForOfIteratorHelper(h);try{for(g.s();!(w=g.n()).done;)(v=w.value).addEventListener("click",p),v.addEventListener("keydown",p)}catch(e){g.e(e)}finally{g.f()}if(D&&f&&"deleted"!==f&&!this.getConf("wgUserName"))if(_=function(){H.showNotice(u("Starting automatic login"),{autoHide:!0,tag:"login"}),H.ajaxLogin(void 0,{username:D,password:H.inflateRaw(f)})},"1"===this.getCookie("".concat(s,"Use2FA"))){y=function(e){m(e)||(e.preventDefault(),_())},F=_createForOfIteratorHelper(h);try{for(F.s();!(b=F.n()).done;)(k=b.value).removeEventListener("click",p),k.removeEventListener("keydown",p),k.addEventListener("click",y),k.addEventListener("keydown",y)}catch(e){F.e(e)}finally{F.f()}}else _();return e.abrupt("return");case 20:return e.next=22,mw.loader.using(["mediawiki.api","oojs-ui-core","oojs-ui-windows","oojs-ui.styles.icons-interactions","oojs-ui.styles.icons-user"]);case 22:if(this.windowManager||(this.windowManager=new OO.ui.WindowManager,this.windowManager.$element.appendTo(document.body)),C=new OO.ui.MessageDialog,E=new OO.ui.TextInputWidget({icon:"userAvatar",placeholder:u("Username"),validate:"non-empty",value:null!==(n=this.getCookie("".concat(s,"UserName")))&&void 0!==n?n:""}),x=new OO.ui.TextInputWidget({icon:"key",placeholder:u("Password"),type:"password",validate:"non-empty"}),A=new OO.ui.CheckboxInputWidget({selected:!0}),z=new OO.ui.FieldLayout(A,{align:"inline",label:u("Cross wiki automatic login")}),B=new OO.ui.CheckboxInputWidget,R=new OO.ui.FieldLayout(B,{align:"inline",help:u("If selected, the login status will be kept for 1 year. If not selected, it will be kept for 1 month."),label:u("Keep me logged in")}),S=jQuery("<label>").addClass("oo-ui-labelWidget oo-ui-labelElement-label").css({"font-size":"small","text-align":"justify"}),T=S.clone().append(z.$element),O=S.clone().css("float","right").append(jQuery("<a>").attr({href:"/wiki/Special:PasswordReset",title:u("Reset password")}).text(u("Forgot password?"))),L=S.clone().css({display:"block","font-size":"inherit",padding:"6px 0"}).append(E.$element.css("margin-bottom","6px"),x.$element),M=S.clone().append(R.$element.css("margin-top","6px")),j=function(){$(window).off({"orientationchange resize":H.windowManager.onWindowResizeHandler})},I="",N=function e(){return(r=r||_asyncToGenerator(_regeneratorRuntime().mark((function t(){var n,r,a,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b=arguments;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=b.length>0&&void 0!==b[0]?b[0]:{}).autoLogin,a=void 0!==r&&r,l=n.loginContinue,c=void 0!==l&&l,d=n.retypePassword,h=void 0!==d&&d,D=new mw.Api,t.prev=2,c){t.next=9;break}return H.showNotice(u("Getting login token"),{tag:"token"}),t.next=7,D.getToken("login");case 7:I=t.sent,H.showNotice(u("Login token getted"),{autoHide:!0,tag:"token"});case 9:if(g={action:"clientlogin",format:"json",formatversion:"2",logintoken:I,loginreturnurl:location.href,username:null!=i?i:E.getValue(),password:null!==(f=o)&&void 0!==f?f:x.getValue()},o=g.password,B.isSelected()&&(g.rememberMe="1"),!c&&!h){t.next=32;break}return t.next=15,H.windowManager.clearWindows();case 15:return delete g.loginreturnurl,delete g.username,delete g.password,g.logincontinue=!0,v=function(){return(w=w||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new OO.ui.MessageDialog,n=new OO.ui.TextInputWidget({icon:"key",placeholder:u(h?"New password":"6-digit number"),validate:"integer"}),r=new OO.ui.FieldLayout(n,{align:"top",label:jQuery("<b>").addClass("oo-ui-messageDialog-title oo-ui-window-head").text(u(h?"Enter password":"Enter 2FA verification code"))}),H.windowManager.addWindows([t]),a=H.windowManager.openWindow(t,{message:r.$element}),j(),a.opened.then((function(){n.on("enter",(function(){H.windowManager.getCurrentWindow().close({action:"accept"})})),n.focus()})),e.next=9,a.closed;case 9:return i=e.sent,o=i,e.abrupt("return","accept"===(null==o?void 0:o.action)?n.getValue():null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t.next=22,v();case 22:if(null!==(_=t.sent)){t.next=28;break}return H.showNotice(u("Login cancelled"),{autoHide:!0,tag:"login"}),t.abrupt("return");case 28:if(""!==_){t.next=31;break}return h?(H.showNotice(u("The password cannot be empty"),{autoHide:!0,tag:"login"}),e({retypePassword:!0})):(H.showNotice(u("The 2FA verification code cannot be empty"),{autoHide:!0,tag:"login"}),e({loginContinue:!0})),t.abrupt("return");case 31:h?(g.password=_,g.retype=_):g.OATHToken=_;case 32:return H.showNotice(u("Logging in"),{tag:"login"}),t.next=35,D.post(g);case 35:if(y=t.sent,"PASS"!==(null===(m=y.clientlogin)||void 0===m?void 0:m.status)){t.next=45;break}F=g.rememberMe?8760:720,H.showNotice(u("Login succeed"),{tag:"login"}),H.setCookie({name:"".concat(s,"UserName"),value:y.clientlogin.username,hour:F}),A.isSelected()?H.setCookie({name:"".concat(s,"Password"),value:H.deflateRaw(o,""),hour:F}):a||H.setCookie({name:"".concat(s,"Password"),value:"deleted",hour:-1}),g.OATHToken?H.setCookie({name:"".concat(s,"Use2FA"),value:"1",hour:F}):H.setCookie({name:"".concat(s,"Use2FA"),value:"deleted",hour:-1}),location.reload(),t.next=72;break;case 45:if(null===(p=y.clientlogin)||void 0===p||!p.messagecode){t.next=72;break}a&&H.setCookie({name:"".concat(s,"Password"),value:"deleted",hour:-1}),t.t0=y.clientlogin.messagecode,t.next="authmanager-authn-autocreate-failed"===t.t0?50:"centralauth-login-error-locked"===t.t0?53:"login-throttled"===t.t0?56:"oathauth-auth-ui"===t.t0?58:"oathauth-login-failed"===t.t0?60:"resetpass-temp-emailed"===t.t0?63:"wrongpassword"===t.t0?66:71;break;case 50:return H.showNotice(u("Automatic account creation failed")),H.windowManager.clearWindows(),t.abrupt("break",72);case 53:return H.showNotice(u("The user has been globally locked")),H.windowManager.clearWindows(),t.abrupt("break",72);case 56:return H.showNotice(u("The user login is too frequent, please try again in five minutes")),t.abrupt("break",72);case 58:return e({loginContinue:!0}),t.abrupt("break",72);case 60:return H.showNotice(u("Invalid 2FA verification code"),{autoHide:!0,tag:"login"}),e({loginContinue:!0}),t.abrupt("break",72);case 63:return H.showNotice(u("New password is required"),{tag:"login"}),e({retypePassword:!0}),t.abrupt("break",72);case 66:return H.showNotice(u("Invalid useruame or password"),{autoHide:!0,tag:"login"}),t.next=69,H.windowManager.clearWindows();case 69:return H.ajaxLogin(),t.abrupt("break",72);case 71:H.showNotice(u("Unknown API error"));case 72:t.next=77;break;case 74:t.prev=74,t.t1=t.catch(2),H.showNetworkErrorNotice();case 77:case"end":return t.stop()}}),t,null,[[2,74]])})))).apply(this,arguments)},!i||!o){e.next=41;break}return N({autoLogin:!0}),e.abrupt("return");case 41:U=function(){var e=!(-1!==[E.getValue(),x.getValue()].indexOf(""));return e||H.showNotice(u("The username or password cannot be empty"),{autoHide:!0,tag:"login"}),e},x.on("enter",(function(){U()&&N()})),C.getActionProcess=function(e){return new OO.ui.Process((function(){"login"===e?U()&&N():H.windowManager.clearWindows()}))},this.windowManager.addWindows([C]),this.windowManager.openWindow(C,{actions:[{action:"login",flags:["primary","progressive"],label:jQuery("<b>").text(u("Login"))},{action:"cancle",flags:["safe","close"],label:jQuery("<b>").text(u("Cancel"))}],message:jQuery("<div>").addClass("oo-ui-window-foot").append(L,O,M,T),title:jQuery("<b>").addClass("oo-ui-window-head").text(u("Login")),size:"small"}),j();case 47:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"confirmLogout",value:function(){var e,t,n=this,r=jQuery().add(jQuery('#ca-cb-logout>a,#topbar>a[href*="UserLogout"],#pt-logout>a,.vector-user-menu-logout')).add(jQuery(".minerva-icon--minerva-logOut").parent(".minerva-user-menu,.toggle-list-item__anchor").not("[target]"));if(r.length&&this.getConf("wgUserName")&&(null===(e=RLPAGEMODULES)||void 0===e||-1===e.indexOf("ext.gadget.confirm-logout"))){r.off("click"),r.parent().off("click"),r.on("click",(function(e){return(t=t||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,mw.loader.using("oojs-ui-windows");case 3:return e.next=5,OO.ui.confirm(jQuery("<div>").addClass("WikiMirrorNotice WikiMirrorTip").append(jQuery("<span>").css("font-size","1.2rem").text((a="Confirm logout?",n.messages.confirmLogout[a]||a))));case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,mw.loader.using("mediawiki.api");case 10:return e.prev=10,n.showNotice(mw.message("logging-out-notify")),r=new mw.Api,e.next=15,r.postWithEditToken({action:"logout"});case 15:location.reload(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),n.showNetworkErrorNotice();case 21:case"end":return e.stop()}var a}),e,null,[[10,18]])})))).apply(this,arguments)}))}}},{key:"darkMode",value:function(e,t,n){var r=this;if(this.localStorage()){var a="wikimirror-darkmode",i=function(e){return r.messages.darkMode[e]||e},o=i("Dark mode"),u=i("Switch to dark mode"),s=i("Light mode"),l=i("Switch to light mode"),c=function(){"0"===r.localStorage(a)?r.localStorage(a,"1"):r.localStorage(a,"0")};switch(e){case"add":document.documentElement.classList.add(a),document.documentElement.style.filter="",/^zh(\.m)?\.wikipedia/.test(location.host)&&(this.hasClass("skin-monobook")||this.hasClass("skin-vector-legacy"))&&this.setCss("wikimirror-css-darkmode-logo-zhwiki","add"),/^(?!zh\.)\S+?(\.m)?\.wikipedia/.test(location.host)&&(this.hasClass("skin-monobook")?this.setCss("wikimirror-css-darkmode-logo-wiki-monobook","add"):this.hasClass("skin-vector-legacy")&&this.setCss("wikimirror-css-darkmode-logo-wiki-vector-legacy","add"));break;case"remove":document.documentElement.classList.remove(a),this.setCss("wikimirror-css-darkmode-logo-zhwiki","remove"),this.setCss("wikimirror-css-darkmode-logo-wiki-monobook","remove"),this.setCss("wikimirror-css-darkmode-logo-wiki-vector-legacy","remove");break;case"check":if(!this.localStorage(a))matchMedia("(prefers-color-scheme:dark)").matches?this.localStorage(a,"1"):this.localStorage(a,"0");return"1"===this.localStorage(a);case"init":var d=matchMedia("(prefers-color-scheme:dark)"),h=matchMedia("(prefers-color-scheme:light)"),D={dark:function(e){e.matches&&"0"===r.localStorage(a)&&(c(),r.darkMode("insert"))},light:function(e){e.matches&&"1"===r.localStorage(a)&&(c(),r.darkMode("insert"))}};try{d.addEventListener("change",D.dark),h.addEventListener("change",D.light)}catch(e){d.addListener(D.dark),h.addListener(D.light)}if(window.addEventListener("storage",(function(e){e.key===a&&r.darkMode("insert")})),this.darkMode("insert"),this.hasClass("skin-vector-legacy")){var f=this.debounce((function(){requestAnimationFrame((function(){document.documentElement.style.height="auto",document.documentElement.style.height="".concat(document.documentElement.scrollHeight,"px")}))})),m=new MutationObserver(f),p=new ResizeObserver(f);m.observe(document.body,{attributes:!0,attributeFilter:["class"]}),p.observe(document.body)}break;case"insert":this.hasClass("skin-apioutput")?(document.documentElement.style.backgroundColor="#fff",document.documentElement.style.color="#000"):this.hasClass("skin-cologneblue")?document.documentElement.style.backgroundColor="#ffffec":this.hasClass("skin-contenttranslation")?document.documentElement.style.backgroundColor="#eaecf0":this.hasClass("skin-modern")?document.documentElement.style.backgroundColor="#f0f0f0":this.hasClass("skin-monobook")?document.documentElement.style.backgroundColor="#f9f9f9":this.hasClass("skin-timeless")?document.documentElement.style.height="100%":this.hasClass("skin-vector-2022")?document.documentElement.style.backgroundColor="#f8f9fa":this.hasClass("skin-vector-legacy")&&(document.documentElement.style.backgroundColor="#f6f6f6");var g=document.querySelector("#".concat(a,">a"));if("1"===this.localStorage(a)){if(this.darkMode("add"),this.darkMode("meta","color-scheme","dark"),this.hasClass("skin-minerva")?this.darkMode("meta","theme-color","#1c1e22"):this.darkMode("meta","theme-color","#0d0d0d"),!g)return;g.innerHTML=g.innerHTML.replace(o,s),g.setAttribute("title",l)}else if("0"===this.localStorage(a)){if(this.darkMode("remove"),this.darkMode("meta","color-scheme","remove"),this.hasClass("skin-cologneblue")?this.darkMode("meta","theme-color","#68a"):this.hasClass("skin-minerva")?this.darkMode("meta","theme-color","#eaecf0"):this.hasClass("skin-modern")?this.darkMode("meta","theme-color","#036"):this.hasClass("skin-monobook")?this.darkMode("meta","theme-color","#e6e6e6"):this.darkMode("meta","theme-color","remove"),!g)return;g.innerHTML=g.innerHTML.replace(s,o),g.setAttribute("title",u)}break;case"meta":var w=document.createElement("meta"),v="wikimirror-meta-".concat(t),_=t,y=document.querySelector("#".concat(v)),F=document.querySelector("meta[name='".concat(_,"']"));w.content=n,w.id=v,w.name=_,F&&!F.id&&F.remove(),"remove"===n?null==y||y.remove():y?y.content=n:document.head.append(w);break;case"normal":if(document.querySelector("#".concat(a)))return;var b=document.querySelector("#pt-preferences")||document.querySelector("#p-personal"),k="1"===this.localStorage(a),C="0"===this.localStorage(a),E=function(e){null!==e&&((null==e?void 0:e.firstElementChild)||document.querySelector("#".concat(a))).addEventListener("click",(function(e){e.preventDefault(),c(),r.darkMode("insert")}))};if(b&&this.hasClass("skin-minerva")){var x='<li class="toggle-list-item" id="'.concat(a,'"><a class="toggle-list-item__anchor" title="'),A='"><span class="minerva-icon minerva-icon--wikimirror-darkmode"></span><span class="toggle-list-item__label">',z="</span></a></li>";k?b.insertAdjacentHTML("beforeend","".concat(x).concat(l).concat(A).concat(s).concat(z)):C&&b.insertAdjacentHTML("beforeend","".concat(x).concat(u).concat(A).concat(o).concat(z)),E()}else if(document.querySelector("#p-tb")||this.hasClass("skin-apioutput")||this.hasClass("skin-nostalgia")){var B=this.hasClass("skin-apioutput")||this.hasClass("skin-nostalgia")?"mw-content-text":"p-tb";mw.loader.using("mediawiki.util").then((function(){k?E(mw.util.addPortletLink(B,"#",s,a,l)):C&&E(mw.util.addPortletLink(B,"#",o,a,u))}))}}}}},{key:"diffLink",value:function(e){return(r=r||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(document.querySelector("#p-cactions")||document.querySelector("#p-tb")||this.hasClass("skin-nostalgia")||this.hasClass("mw-special-MobileDiff"))&&(document.querySelector("#mw-revision-nav")||this.hasClass("diff","table"))&&(null===(n=RLPAGEMODULES)||void 0===n||-1===n.indexOf("ext.gadget.Difflink"))){e.next=2;break}return e.abrupt("return");case 2:if(i="wikimirror-difflink",o=function(e){return g.messages.diffLink[e]||e},u="p-cactions",this.hasClass("mw-special-MobileDiff")?u="mw-mf-diffarea":this.hasClass("skin-nostalgia")?u="mw-content-text":this.hasClass("skin-minerva")&&(u="p-tb"),s=function(e){return(r=r||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,o,s,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.text,a=t.tooltip,o=t.link,s=t.isPermaLink,l=document.querySelector("#".concat(i))){e.next=9;break}return e.next=5,mw.loader.using("mediawiki.util");case 5:if(l=mw.util.addPortletLink(u,"#",r,i,a)){e.next=8;break}return e.abrupt("return");case 8:"mw-mf-diffarea"===u&&g.setCss("#".concat(i,"{float:right}#").concat(i,">a>span:first-child{vertical-align:text-bottom;padding-right:.5em}"),"css","wikimirror-css-difflink");case 9:("mw-mf-diffarea"===u||g.hasClass("skin-minerva"))&&(l=l.firstElementChild),l.onclick=function(e){return(n=n||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,mw.loader.using(["mediawiki.widgets","oojs-ui-windows"]);case 3:for(n=jQuery("<div>"),r=0,a=[o,"[[".concat(o).concat(s?g.decodeURIComponent(g.getLocate("originHash")):"","]]")];r<a.length;r++)i=a[r],n.append(new mw.widgets.CopyTextLayout({align:"top",copyText:i}).$element);/android|iphone|mobile/i.test(navigator.userAgent)?OO.ui.alert(n):OO.ui.alert(n,{size:"medium"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)};case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=t.diffId,c=t.oldId,d=t.revisionId,!l){e.next=28;break}if(h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Special:Diff/";e&&(t+="".concat(e,"/")),t+=l,s({text:o("Diff link"),tooltip:o("Copy the link to the diff version (wiki syntax)"),link:t})},h(c),!c){e.next=26;break}return e.next=14,mw.loader.using("mediawiki.api");case 14:return D=new mw.Api,f={action:"compare",format:"json",formatversion:"2",prop:"ids",fromrev:l,torelative:"prev"},e.prev=16,e.next=19,D.get(f);case 19:p=e.sent,l===this.getConf("wgDiffNewId")&&(null===(m=p.compare)||void 0===m?void 0:m.fromrevid)===this.getConf("wgDiffOldId")&&h(0),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),this.showNetworkErrorNotice();case 26:e.next=29;break;case 28:d&&-1!==[null===(a=document.querySelector("#contentSub"))||void 0===a?void 0:a.querySelectorAll("#mw-revision-nav").length,document.querySelectorAll("main#content>.pre-content #mw-revision-nav").length].indexOf(1)&&s({text:o("Permanent link"),tooltip:o("Copy the permanent link to the current version (wiki syntax)"),link:"Special:PermaLink/".concat(d),isPermaLink:!0});case 29:case"end":return e.stop()}}),e,this,[[16,23]])})))).apply(this,arguments)}},{key:"disableAnonEdit",value:function(){this.getConf("wgUserName")||(mw.hook("wikipage.editform").add((function(e){e.find("#wpSummary").prop("readonly",!0),e.find("#wpTextbox1").prop("readonly",!0)})),mw.hook("mobileFrontend.editorOpened").add((function(){jQuery("#wikitext-editor").prop("readonly",!0)})),mw.hook("ve.activationComplete").add((function(){var e=ve.init.target.getSurface();e&&e.setReadOnly(!0)})))}},{key:"displayAnonHide",value:function(e){(null!=e?e:!!this.getConf("wgUserName"))?this.setCss("wikimirror-css-anon-hide","remove"):this.hasClass("mw-special-CreateAccount")&&location.replace("/wiki/Special:Userlogin")}},{key:"floatTOC",value:function(){return(a=a||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b,k,C,E,x=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasClass("skin-minerva")&&!this.hasClass("skin-vector-2022")&&"view"===this.getConf("wgAction")&&"IntersectionObserver"in window){e.next=2;break}return e.abrupt("return");case 2:if(u="wikimirror-floattoc",s=function(e){return x.messages.floatTOC[e]||e},l=document.querySelector("#toc")){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,mw.loader.using(["oojs-ui.styles.icons-editing-citation","oojs-ui.styles.icons-interactions"]);case 9:this.setCss("#".concat(u,"{padding:.5rem;cursor:auto}#").concat(u," .toc{display:block;min-width:auto;max-height:90vh;padding-top:1em;margin:0 auto;font-size:1em;word-break:normal}.skin-timeless #").concat(u," .toc{max-height:85vh}#").concat(u," .toc>ul{overflow:auto;max-height:70vh;border-bottom:1px solid #cdcdcd}#").concat(u," .toctitle{line-height:1}#").concat(u," ul{padding-right:1rem}#").concat(u," #close{position:relative;top:0;width:1rem;height:1rem;cursor:pointer;float:right}#").concat(u," #close:hover{filter:drop-shadow(0 0 1px #000)}.skin-timeless #").concat(u," #close{top:.1rem}#").concat(u,"-opener{position:fixed;z-index:203;top:10.5%;right:2rem;display:flex;width:2rem;height:2rem;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;padding:.5rem;border-radius:25px;backdrop-filter:saturate(50%) blur(16px);background:rgb(255 255 255 / 95%);box-shadow:0 0 2px 2px rgb(0 0 0 / 10%);cursor:pointer;font-size:.5rem}#").concat(u,"-opener:active{box-shadow:inset 0 0 2px 2px rgb(0 0 0 / 10%)}#").concat(u,"-opener:hover{box-shadow: 0 0 4px 4px rgb(0 0 0 / 10%)}#").concat(u,"-opener span{opacity:.6}#").concat(u,"-opener span:first-child{position:relative;width:2.5em;height:2.5em}#").concat(u,"-opener span:last-child{color:#000}.ve-activated #").concat(u,"-opener{display:none}"),"css","wikimirror-css-floattoc"),c=null!==(t=this.localStorage(u))&&void 0!==t?t:window.outerHeight<window.outerWidth?"open":"close",(d=this.setCss(".mw-notification-area{right:unset;width:auto;max-width:20em}.mw-notification{-webkit-transform:translateX(-999px);-moz-transform:translateX(-999px);transform:translateX(-999px)}.mw-notification-visible{-webkit-transform:translateX(0);-moz-transform:translateX(0);transform:translateX(0)}","css","wikimirror-css-floattoc-notification")).disabled=!0,h=l.cloneNode(!0),null===(n=h.querySelector("input"))||void 0===n||n.remove(),null===(r=h.querySelector(".toctogglespan"))||void 0===r||r.remove(),D=jQuery(h),f=D.clone().removeAttr("id").prepend(jQuery("<span>").addClass("oo-ui-indicatorElement-indicator oo-ui-icon-close").attr({id:"close",title:s("Close"),role:"button",tabindex:"0"})),m=jQuery("<div>").addClass("noprint").attr({id:"".concat(u,"-opener"),title:s("TOC"),role:"button",tabindex:"0"}).append(jQuery("<span>").addClass("oo-ui-indicatorElement-indicator oo-ui-icon-reference"),jQuery("<span>").text(s("TOC"))).hide().appendTo(document.body),v=function(e){return"keydown"===e.type&&"Enter"!==e.key&&" "!==e.key},_=function(){w&&clearTimeout(w),w=setTimeout((function(){p||(d.disabled=!0)}),5e3)},y=function(e){c=e,x.localStorage(u,e)},F=function(e){var t=e.target,n=jQuery(t).parent().attr("href");if(n){var r=jQuery(n).offset();r&&(e.preventDefault(),jQuery("html, body").animate({scrollTop:x.hasClass("skin-timeless")?"".concat(r.top-60,"px"):"".concat(r.top,"px")},{duration:660,easing:"swing"}))}},b=function(e){e.close(),m.fadeIn(),y("close"),_()},k=function(){return(a=a||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(i.length>0&&void 0!==i[0])||i[0],null===(t=r=i.length>1&&void 0!==i[1]?i[1]:void 0)||void 0===t||t.close(),p=!!n,e.t0=n,e.next=!0===e.t0?7:"open"===e.t0?11:14;break;case 7:if("close"!==c){e.next=10;break}return m.fadeIn(),e.abrupt("return");case 10:return e.abrupt("break",17);case 11:return m.fadeOut(),y("open"),e.abrupt("break",17);case 14:return m.fadeOut(),_(),e.abrupt("return");case 17:if(d.disabled=!1,!r){e.next=22;break}r.start(),e.next=28;break;case 22:return e.next=24,x.notify(f,{classes:"noprint",id:u,autoHide:!1});case 24:r=e.sent,a=function(e){v(e)||(e.stopPropagation(),"close"===e.target.id?b(r):F(e))},r.$notification.on("click",a),r.$notification.on("keydown",a);case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)},C=new IntersectionObserver((function(e){return(i=i||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_slicedToArray(t,1),r=n[0]){e.next=3;break}return e.abrupt("return");case 3:return a=r.intersectionRatio,e.next=6,k(0===a,g);case 6:g=e.sent;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)})),C.observe(l),jQuery(l).find("a").on("click",F),jQuery(l).find("a").on("keydown",F),E=function(e){return(o=o||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k("open");case 4:g=e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},m.on("click",E),m.on("keydown",E);case 32:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},{key:"showNotice",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.autoHide,i=void 0!==a&&a,o=r.forceNotify,u=void 0!==o&&o,s=r.tag,l="<button>".concat((t="OK",n.messages.showNotice[t]||t),"</button>");e&&("function"!=typeof bldkDingExposedInterface||u?n.notify(jQuery("".concat('<div class="WikiMirrorNotice">',"<span>").concat(e,"</span>").concat(l).concat("</div>")),{autoHide:i,tag:null!=s?s:null}):bldkDingExposedInterface("<span>".concat(e,"</span>"),"default",i?void 0:"long"))}},{key:"showNetworkErrorNotice",value:function(){var e,t=this;this.showNotice((e="Network error",t.messages.showNetworkErrorNotice[e]||e))}},{key:"showRedirect",value:function(){var e=this,t="wikimirror-redirect";if(!document.querySelector("#".concat(t))){var n=function(t){return e.messages.showRedirect[t]||t},r=n("Official site"),a=n("Redirect the current mirror page to its corresponding official page"),i='<li id="'.concat(t,'"><a href="').concat(this.getLocate("originUrl"),'" target="_blank" title="').concat(a,'">').concat(r,"</a></li>"),o='<li class="toggle-list-item" id="'.concat(t,'"><a class="toggle-list-item__anchor" href="').concat(this.getLocate("originUrl"),'" target="_blank" title="').concat(a,'"><span class="minerva-icon minerva-icon--minerva-logOut"></span><span class="toggle-list-item__label">').concat(r,"</span></a></li>"),u=document.querySelector(".apihelp-flags>ul");if(this.hasClass("skin-apioutput")&&u)return u.insertAdjacentHTML("beforeend",i);var s=document.querySelector("#titlelinks");if(this.hasClass("skin-cologneblue")&&s)return s.insertAdjacentHTML("beforeend",i.replace("<li","<span").replace("li>","span>"));var l=document.querySelector("#p-tb");if(this.hasClass("skin-contenttranslation")&&l)return l.insertAdjacentHTML("beforeend",i);var c=document.querySelector("#p-donation");if(this.hasClass("skin-minerva")&&c)return c.insertAdjacentHTML("beforeend",o);var d=document.querySelector("#footer-info");if(this.hasClass("skin-modern")&&d)return d.insertAdjacentHTML("beforeend",i);var h=document.querySelector("#f-list");if(this.hasClass("skin-monobook")&&h)return h.insertAdjacentHTML("beforeend",i);var D=document.querySelector("#searchform");if(this.hasClass("skin-nostalgia")&&D)return D.insertAdjacentHTML("beforebegin",i.replace("<li","<span").replace("li>","span>"));var f=document.querySelector("#footer-places");return(this.hasClass("skin-timeless")||this.hasClass("skin-vector"))&&f?f.insertAdjacentHTML("beforeend",i):void 0}}},{key:"viewOnOtherWikis",value:function(){return(i=i||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getConf("wgDiffNewId")&&!this.getConf("wgIsRedirect")&&"view"===this.getConf("wgAction")&&"zhwiki"===this.getConf("wgDBname")&&0===this.getConf("wgNamespaceNumber")){e.next=2;break}return e.abrupt("return");case 2:if(n=function(e){return b.messages.viewOnOtherWikis[e]||e},r={Moegirl:"https://zh.moegirl.org.cn",Qiuwen:"https://www.qiuwenbaike.cn"},a=this.getConf("wgTitle"),i=function(e){var t,i,o=e.site,u=e.title,s=e.path,l=null===(t=document.querySelector(".mw-first-heading"))||void 0===t?void 0:t.firstChild,c=null!==(i=null==l?void 0:l.textContent)&&void 0!==i?i:a,d=n(o).replace("$1",c).replace("$2","".concat(r[o]).concat(s)).replace("$3",u);b.showNotice(d,{autoHide:!0,forceNotify:!0,tag:"viewOnOtherWikis"})},o=this.localStorage("wikimirror-viewonotherwikis"),(u=o?new Map(JSON.parse(o)):new Map).size>=100&&(s=u.keys(),u.delete(s.next().value)),!u.has(a)){e.next=13;break}return i(u.get(a)),e.abrupt("return");case 13:l="Qiuwen",c=_createForOfIteratorHelper(document.querySelectorAll(".mw-parser-output p:nth-child(-n+10)")),e.prev=15,c.s();case 17:if((d=c.n()).done){e.next=24;break}if(h=d.value,!/[动動][画畫漫]|漫[画畫]|游[戏戲]|小[说説]|音[乐樂]|偶像|声优|聲優|歌手|配音|演[员員]|作品|[发發]行|出版/.test(h.innerText)){e.next=22;break}return l="Moegirl",e.abrupt("break",24);case 22:e.next=17;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),c.e(e.t0);case 29:return e.prev=29,c.f(),e.finish(29);case 32:return e.next=34,mw.loader.using("mediawiki.ForeignApi");case 34:return f=function(e){return(t=t||_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,i;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new mw.ForeignApi("".concat(r[t],"/api.php"),{anonymous:!0}),i={format:"json",formatversion:"2",action:"query",prop:"info",titles:a,converttitles:1,inprop:"url",iwurl:1,redirects:1},e.prev=2,e.next=5,n.get(i);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),D=e.t0,e.abrupt("return",{query:{pages:[{title:"",fullurl:"",missing:!0}]}});case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)},e.prev=35,m=function(){if(D)throw new ReferenceError},p=function(e){return!e.query.pages[0].missing},e.next=40,f(l);case 40:if(g=e.sent,m(),p(g)){e.next=51;break}if("Moegirl"!==l){e.next=49;break}return l="Qiuwen",e.next=47,f(l);case 47:g=e.sent,m();case 49:if(p(g)){e.next=51;break}return e.abrupt("return");case 51:w=_slicedToArray(g.query.pages,1),v=w[0],_=v.title,y=v.fullurl,F=y.replace(r[l],""),u.set(a,{site:l,title:_,path:F}),this.localStorage("wikimirror-viewonotherwikis",JSON.stringify(_toConsumableArray(u))),i({site:l,title:_,path:F}),e.next=61;break;case 58:e.prev=58,e.t1=e.catch(35),console.log("WikiMirror viewOnOtherWikis method error:",D);case 61:case"end":return e.stop()}}),e,this,[[15,26,29,32],[35,58]])})))).apply(this,arguments)}},{key:"bodyReady",value:function(){return new Promise((function(e){var t=0,n=setInterval((function(){var r;t++,null!==(r=document.body)&&void 0!==r&&r.classList.contains("mediawiki")?(clearInterval(n),e(!0)):t>50&&(clearInterval(n),e(!1))}),0)}))}},{key:"domReady",value:function(){var e=["complete","interactive"],t=function(){return-1!==e.indexOf(document.readyState)};return new Promise((function(e){t()?e(!0):document.addEventListener("readystatechange",(function(){t()&&e(!0)}))}))}},{key:"mwReady",value:function(){return new Promise((function(e,t){var n=0,r=setInterval((function(){var a,i,o;n++,null!==(a=document.body)&&void 0!==a&&a.classList.contains("mediawiki")&&"object"===("undefined"==typeof mw?"undefined":_typeof(mw))&&"function"==typeof(null===(i=mw.config)||void 0===i?void 0:i.get)&&"function"==typeof mw.hook&&"function"==typeof(null===(o=mw.loader)||void 0===o?void 0:o.using)&&"function"==typeof mw.message?(clearInterval(r),e(!0)):n>3e3&&(clearInterval(r),t(!1))}),10)}))}},{key:"getConf",value:function(e){var t,n;return"object"===("undefined"==typeof mw?"undefined":_typeof(mw))&&"function"==typeof(null===(t=mw.config)||void 0===t?void 0:t.get)?mw.config.get(e):"object"===("undefined"==typeof RLCONF?"undefined":_typeof(RLCONF))&&null!==(n=RLCONF[e])&&void 0!==n?n:null}},{key:"getCookie",value:function(e){var t;return null===(t="; ".concat(this.decodeURIComponent(document.cookie)).split("; ".concat(e,"=")).pop())||void 0===t?void 0:t.split(";").shift()}},{key:"getLocate",value:function(e){var t=this.getRealText(location.hash),n=this.getRealText(location.host),r=this.getRealText(location.href);switch(e){case"originHash":return t;case"originHost":return n;default:return r}}},{key:"debounce",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];t&&clearTimeout(t),t=setTimeout((function(){e.apply(r,i)}),n)}}},{key:"decodeURIComponent",value:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e){return decodeURIComponent((function(){try{return decodeURIComponent(e)}catch(t){return e.replace(/%(?!\d+)/g,"%25")}})().replace(/\+/g,"%20"))}))},{key:"encodeURIComponent",value:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e){return encodeURIComponent(e).replace(/%20/g,"+").replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%5B/g,"[").replace(/%5D/g,"]")}))},{key:"hasClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";if(!e||!document.querySelector(t))return!1;var n,r=_createForOfIteratorHelper(document.querySelectorAll(t));try{for(r.s();!(n=r.n()).done;){if(n.value.classList.contains(e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"i18n",value:function(){var e=this,t={zh:["zh","zh-hans","zh-hant","zh-cn","zh-tw","zh-hk","zh-sg","zh-mo","zh-my"],"zh-hans":["zh-hans","zh-cn","zh-sg","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo"],"zh-hant":["zh-hant","zh-tw","zh-hk","zh-mo","zh","zh-hans","zh-cn","zh-sg","zh-my"],"zh-cn":["zh-cn","zh-hans","zh-sg","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo"],"zh-sg":["zh-sg","zh-hans","zh-cn","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo"],"zh-my":["zh-my","zh-hans","zh-cn","zh-sg","zh","zh-hant","zh-tw","zh-hk","zh-mo"],"zh-tw":["zh-tw","zh-hant","zh-hk","zh-mo","zh","zh-hans","zh-cn","zh-sg","zh-my"],"zh-hk":["zh-hk","zh-hant","zh-mo","zh-tw","zh","zh-hans","zh-cn","zh-sg","zh-my"],"zh-mo":["zh-mo","zh-hant","zh-hk","zh-tw","zh","zh-hans","zh-cn","zh-sg","zh-my"]},n=(function(){for(var n=function(e){return e.split("-").map((function(e){return e.toLowerCase()}))},r="en",a=0,i=[n(document.documentElement.lang),n(navigator.language)];a<i.length;a++){var o=i[a];switch(o.length){case 2:r="".concat(o[0],"-").concat(o[1]);break;case 3:r="".concat(o[0],"-").concat(o[2]);break;default:r=o[0]}if(e.isValidKey(t,r))break}return _toConsumableArray(new Set([r,"en"]))})(),r=function(r,a){for(var i=n,o=0,u=[a].concat(_toConsumableArray(i));o<u.length;o++){var s=u[o];if(e.isValidKey(t,s)){i=t[s];break}}for(var l=0,c=_toConsumableArray(new Set([a].concat(_toConsumableArray(i),_toConsumableArray(n))));l<c.length;l++){var d=c[l];if(e.isValidKey(r,d))return r[d]}return""};return{content:function(t){return r(t,e.getConf("wgContentLanguage"))},localize:function(t){var n;return r(t,null!==(n=e.getConf("wgUserLanguage"))&&void 0!==n?n:e.getConf("wgContentLanguage"))},vary:function(t){var n;return r(t,null!==(n=e.getConf("wgUserVariant"))&&void 0!==n?n:e.getConf("wgContentLanguage"))}}}},{key:"isValidKey",value:function(e,t){return t in e}},{key:"localStorage",value:(function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e,t){var n=(function(){try{return localStorage.setItem("_","_"),localStorage.removeItem("_"),!0}catch(e){return!1}})();if(n&&e){if(!t)return localStorage.getItem(e);localStorage.setItem(e,t)}return n}))},{key:"notify",value:function(e,t){return(o=o||_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw.loader.using("mediawiki.notification");case 2:return e.abrupt("return",mw.notification.notify(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},{key:"setCookie",value:function(e){var t=e.name,n=e.value,r=e.hour,a=void 0===r?0:r,i=e.domain,o=void 0===i?".".concat(this.DOMAIN):i,u=e.path,s=void 0===u?"/":u,l=e.isSecure,c=void 0===l||l;if(t&&n&&o&&s){var d="".concat(t,"=").concat(this.encodeURIComponent(n),";domain=").concat(o,";path=").concat(s).concat(c?";Secure":""),h=new Date;0===a?document.cookie=d:(h.setTime(h.getTime()+36e5*a),document.cookie="".concat(d,";expires=").concat(h.toUTCString()))}}},{key:"setCss",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"css"){case"add":e&&!document.querySelector("#".concat(e))&&this.extraCss(e)&&this.setCss(this.extraCss(e),"css",e);break;case"remove":var n;if(e)null===(n=document.querySelector("#".concat(e)))||void 0===n||n.remove();break;case"css":if(e||e&&(!t||!document.querySelector("#".concat(t)))){var r=document.createElement("style");return t&&(r.id=t),r.append(document.createTextNode(e)),document.head.append(r),r.sheet}break;case"url":return new Promise((function(n,r){e||r();var a=document.createElement("link");t&&(a.id=t),a.href=e,a.rel="stylesheet",a.addEventListener("load",(function(){n()})),a.addEventListener("error",(function(){r()})),document.head.append(a)}))}}},{key:"setJs",value:function(e,t,n){return new Promise((function(r,a){e||a();var i=document.createElement("script");i.src=e,n&&(i.crossOrigin="anonymous"),"async"===t&&(i.async=!0),"defer"===t&&(i.defer=!0),i.addEventListener("load",(function(){r()})),i.addEventListener("error",(function(){a()})),document.head.append(i)}))}},{key:"base64ToUint8Array",value:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}},{key:"uint8arrayToBase64",value:function(e){for(var t=0,n=new Uint8Array,r="";t<e.length;)n=e.subarray(t,Math.min(t+32768,e.length)),r+=Reflect.apply(String.fromCharCode,null,_toConsumableArray(n)),t+=32768;return btoa(r)}},{key:"deflateRaw",value:function(e){return"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rawdeflate,").concat(this.uint8arrayToBase64(pako.deflateRaw(e,{level:5})))}},{key:"inflateRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rawdeflate,";return pako.inflateRaw(this.base64ToUint8Array(e.replace(t,"")),{to:"string"})}},{key:"ahCallback_Request",value:function(e){var t=this,n=["apfrom","appendtext","apprefix","claim","content","ehcontent","epcontent","etcontent","etssummary","fromtext","fromtext-main","html","ntcontent","nttopic","prependtext","repcontent","search","summary","text","titles","totext","totext-main","url","wikitext","siteUrl"],r=new URL(e.url,location.origin),a=new URL("".concat(location.origin,"/w/api.php?").concat(e.body));try{if(null===e.body)throw new ReferenceError("Request body is null.");var i=JSON.parse(e.body);delete i.md5;for(var o=0,u=n;o<u.length;o++){var s,l=u[o],c=null===(s=i.query)||void 0===s?void 0:s[l];c&&(i.query[l]=this.getRealText(c))}e.body=JSON.stringify(i)}catch(i){var d=function(e){/^zh(\.m)?\.wikipedia/.test(r.host)&&e.set("tags",e.has("tags")?"WikiMirror|".concat(e.get("tags")):"WikiMirror")};if(e.body&&/^\?(\[object%20FormData]|null)$/.test(a.search))if(d(e.body),e.body.delete("md5"),"visualeditoredit"===e.body.get("action"))if(e.body.has("html")){var h=e.body.get("html"),D=h.startsWith("rawdeflate");D&&(h=this.inflateRaw(h)),h=this.getRealText(h),e.body.set("html",D?this.deflateRaw(h):h)}else e.body.has("wikitext")&&e.body.set("wikitext",this.getRealText(e.body.get("wikitext")));else{var f,m=_createForOfIteratorHelper(n);try{for(m.s();!(f=m.n()).done;){var p=f.value;e.body.has(p)&&e.body.set(p,this.getRealText(e.body.get(p)))}}catch(e){m.e(e)}finally{m.f()}}else{var g=function(e){return t.deflateRaw(t.getRealText(t.inflateRaw(e)))},w=r.searchParams,v=a.searchParams;d(v),v.delete("md5");var _,y=_createForOfIteratorHelper(n);try{for(y.s();!(_=y.n()).done;){var F=_.value;w.has(F)&&w.set(F,this.getRealText(w.get(F))),v.has(F)&&v.set(F,this.getRealText(v.get(F)))}}catch(e){y.e(e)}finally{y.f()}switch(v.get("action")){case"cxpublish":v.set("html",g(v.get("html")));break;case"cxsave":v.set("content",g(v.get("content")));break;case"logout":for(var b=0,k=["lastLogin","lastLoginWikitech"];b<k.length;b++){var C=k[b];this.getCookie("".concat(C,"Password"))&&(this.setCookie({name:"".concat(C,"Password"),value:"deleted",hour:-1}),this.setCookie({name:"".concat(C,"Use2FA"),value:"deleted",hour:-1}))}break;case"shortenurl":r.host=location.host}for(var E=0,x=[/^([^.]+(?:\.m)?\.planet)\.wikimedia\.org$/,/^((?:[^.]+(?:\.m)?\.(?:wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki))|wikisource)\.org$/,/^(advisors(?:\.m)?|advisory(?:\.m)?|affcom|am(?:\.m)?|analytics|annual|api(?:\.m)?|ar(?:\.m)?|auditcom|bd(?:\.m)?|be(?:\.m)?|blog|board|boardgovcom|br(?:\.m)?|bugzilla|ca(?:\.m)?|chair|checkuser(?:\.m)?|cn(?:\.m)?|co(?:\.m)?|collab|(?:test-)?commons(?:\.m)?|config-master|cxserver|dbtree|design|developer|diff|dk(?:\.m)?|doc|ec(?:\.m)?|ee(?:\.m)?|electcom(?:\.m)?|etherpad|exec(?:\.m)?|fdc(?:\.m)?|fi(?:\.m)?|foundation(?:\.m)?|ge(?:\.m)?|gerrit|gitlab|gr(?:\.m)?|grafana|grants(?:\.m)?|graphite|hi(?:\.m)?|horizon|id(?:\.m)?|id-internal(?:\.m)?|idp|iegcom(?:\.m)?|il|incubator(?:\.m)?|intake-(?:analytics|logging)|integration|internal|labtestwikitech|legalteam(?:\.m)?|lists|login(?:\.m)?|logstash|mai(?:\.m)?|maps|meta(?:\.m)?|mk(?:\.m)?|movementroles|mx(?:\.m)?|ng(?:\.m)?|nl(?:\.m)?|no(?:\.m)?|noboard-chapters|noc|nyc(?:\.m)?|nz(?:\.m)?|office(?:\.m)?|ombuds(?:\.m)?|ombudsmen|ores|otrs-wiki(?:\.m)?|outreach(?:\.m)?|pa-us(?:\.m)?|people|pl(?:\.m)?|performance|phabricator|planet|policy|pt(?:\.m)?|projectcom|punjabi(?:\.m)?|quality(?:\.m)?|research|romd(?:\.m)?|rs(?:\.m)?|rt|ru(?:\.m)?|se(?:\.m)?|searchcom|schema|secure|spcom|species(?:\.m)?|static-(?:bugzilla|codereview)|steward(?:\.m)?|strategy(?:\.m)?|stream|svn|techblog|techconduct|ticket|tr(?:\.m)?|transitionteam(?:\.m)?|toolsadmin|transparency|ua(?:\.m)?|upload|usability|vote(?:\.m)?|vrt-wiki(?:\.m)?|wb(?:\.m)?|wikimania(?:200[5-9]|201[0-8]|wikitech-static|team)?(?:\.m)?|wikitech)\.wikimedia\.org$/];E<x.length;E++){var A=x[E];A.test(r.host)&&(r.host=r.host.replace(A,"$1.".concat(this.DOMAIN)))}"recommend.wmflabs.org"===r.host&&(r.host="recommend.".concat(this.DOMAIN)),"wma.wmcloud.org"===r.host&&(r.host="wma.".concat(this.DOMAIN)),r.host==="xtools-api.".concat(this.DOMAIN)&&(r.pathname=this.getRealText(r.pathname));var z="".concat(r.host).concat(r.pathname);if(this.REGEX_LIST.xtools_api.test(z)){var B=this.getRealText(r.pathname);r.host="xtools-api.".concat(this.DOMAIN),r.pathname=B.replace("/api/","/")}if(-1!==z.indexOf("wikimedia.org/api/rest_v1/media/math/render/")){var R=z.match(/^wikimedia\.org\/api\/rest_v1\/media\/math\/render\/(png|svg)\/(\S+?)$/);if(R){var S=R[1],T=R[2];r.host="latex-".concat(S,".").concat(this.DOMAIN),r.pathname="/".concat(T)}}e.body&&(e.body=a.toString().replace("".concat(location.origin,"/w/api.php?"),"")),e.url&&(e.url=r.toString())}}return e}},{key:"ahCallback_Response",value:function(e){var t=this,n=function e(t,n,r){for(var a=0,i=Object.entries(t);a<i.length;a++){var o=_slicedToArray(i[a],2),u=o[0],s=o[1];"object"===_typeof(s)?e(s,n,u):n(t,u,r)}},r=function e(){var r,a,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/html",s=(new DOMParser).parseFromString(o,u.match(/^([+/a-z-]+?)(?:;|$)/)[1]),l=s.documentElement;null===(r=l.querySelector("parsererror"))||void 0===r||r.remove();var c,d=_createForOfIteratorHelper(l.querySelectorAll("span[data-mw-variant]"));try{for(d.s();!(c=d.n()).done;){var h=c.value,D=JSON.parse(h.dataset.mwVariant);n(D,(function(t,n){var r="t"===n?t[n]:"";r&&/^<(\w+?)\s.+?>.*?<\/\1>$/.test(r)&&(t[n]=e(r).element.querySelector("body").innerHTML)})),h.dataset.mwVariant=JSON.stringify(D)}}catch(e){d.e(e)}finally{d.f()}var f,m=_createForOfIteratorHelper(l.querySelectorAll("a,audio,base,img,source,video"));try{for(m.s();!(f=m.n()).done;)for(var p=f.value,g=0,w=["href","poster","src","srcset"];g<w.length;g++){var v=w[g],_=p[v];_&&(p[v]=_.replace(new RegExp(t.DOMAIN_REGEX,"g"),"r-e-p-l-a-c-e.org"))}}catch(e){m.e(e)}finally{m.f()}return{dec:null!==(a=null===(i=o.match(/^\s*?(<\?xml.+?\?>)/))||void 0===i?void 0:i[0])&&void 0!==a?a:"",dtd:s.doctype?"".concat((new XMLSerializer).serializeToString(s.doctype),"\n"):"",element:l}};try{var a,i,o,u,s,l,c,d=JSON.parse(e.response);if(null!==(a=d.discussiontoolspreview)&&void 0!==a&&null!==(a=a.parse)&&void 0!==a&&a.text){var h=r(d.discussiontoolspreview.parse.text).element;d.discussiontoolspreview.parse.text=this.getRealText(h.querySelector(".mw-parser-output").outerHTML)}if(d.visualeditor||d.visualeditoredit){var D=d.visualeditor?"visualeditor":"visualeditoredit",f=d[D].content;if(f)if(d[D].etag){var m=r(f);d[D].content="".concat(m.dtd).concat(this.getRealText(m.element.outerHTML))}else if(/^<\S+?\sid=\S+?>/.test(f)){var p=r(f).element;d[D].content=this.getRealText(p.querySelector("body").innerHTML)}else d[D].content=this.getRealText(f)}if(d.compare||d.expandtemplates||null!==(i=d.query)&&void 0!==i&&i.pages)n(d.compare||d.expandtemplates||(null===(c=d.query)||void 0===c?void 0:c.pages),(function(e,n){-1!==["content","*"].indexOf(n)&&(e[n]=t.getRealText(e[n]))}));if(d.html){var g=r(d.html).element;d.html=this.getRealText(g.querySelector("div").outerHTML)}if((null!==(o=d.parse)&&void 0!==o&&o.parsedsummary||null!==(u=d.parse)&&void 0!==u&&u.text||null!==(s=d.parse)&&void 0!==s&&s.wikitext)&&n(d.parse,(function(e,n,a){if(-1!==["parsedsummary","text"].indexOf(null!=a?a:n)){var i=r(e[n]).element,o=i.querySelector(".mw-parser-output"),u=o?o.outerHTML:i.querySelector("body").innerHTML;e[n]=t.getRealText(u)}else-1!==["wikitext"].indexOf(null!=a?a:n)&&(e[n]=t.getRealText(e[n]))})),d.segmentedContent){var w=r(d.segmentedContent).element;d.segmentedContent=this.getRealText(w.outerHTML)}null!==(l=d[0])&&void 0!==l&&l.url&&(d[0].url=this.getRealText(d[0].url)),e.response=JSON.stringify(d)}catch(t){var v,_,y,F,b,k,C=null!==(v=null!==(_=null===(y=e.originResponse)||void 0===y?void 0:y.headers)&&void 0!==_?_:e.headers)&&void 0!==v?v:{},E=e.response,x=e.config.url,A=null!==(F="function"==typeof C.get?null!==(b=C.get("content-type"))&&void 0!==b?b:C.get("Content-Type"):null!==(k=C["content-type"])&&void 0!==k?k:C["Content-Type"])&&void 0!==F?F:"";if(/xml/i.test(A)){var z,B,R=r(null!=E?E:null===(z=e.config.xhr)||void 0===z?void 0:z.responseXML,A),S=_createForOfIteratorHelper(R.element.querySelectorAll("a,rev,text"));try{for(S.s();!(B=S.n()).done;){var T=B.value;T.innerHTML=this.getRealText(T.innerHTML)}}catch(e){S.e(e)}finally{S.f()}e.response="".concat(R.dec).concat(R.dtd).concat(R.element.outerHTML)}else if(-1!==x.indexOf("/w/index.php"))if(-1!==x.indexOf("action=render")){var O=r(E).element.querySelector(".mw-parser-output");O&&(e.response=this.getRealText(O.outerHTML))}else/json|text/i.test(A)&&!/css|html|(ecma|java)script/i.test(A)&&(e.response=this.getRealText(E));else if(-1!==x.indexOf("/api/rest_v1/page/html")||-1!==x.indexOf("/api/rest_v1/transform/wikitext/to/html")||-1!==x.indexOf("/api/rest_v1/transform/wikitext/to/mobile-html")){var L=r(E);e.response="".concat(L.dtd).concat(this.getRealText(L.element.outerHTML))}else-1!==x.indexOf("/api/rest_v1/transform/html/to/wikitext")?e.response=this.getRealText(E):-1!==x.indexOf("xtools-api.".concat(this.DOMAIN))&&-1!==x.indexOf("format=html")&&(e.response=E.replace(/\/\/([a-z-]+(?:\.m)?)\.wikimedia\.org/g,"//$1.".concat(this.DOMAIN)).replace(/\/\/([a-z-]+\.)?(wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki)\.org/g,"//$1$2.".concat(this.DOMAIN)))}return e}},{key:"extraCss",value:function(e){var t=".mw-wiki-logo{background-image:url(/static/images/mobile/copyright/wikipedia.png)!important;background-size:100px;filter:invert(.9)}",n="//upload.".concat(this.DOMAIN,"/wikimirror/zh/darkmode/zhwiki");switch(e){case"wikimirror-css-darkmode-logo-wiki-monobook":return"".concat(t,"@media only screen and (min-width:551px){body.skin--responsive #column-one{padding-top: 110px}body.skin--responsive #p-logo a,body.skin--responsive #p-logo a:hover{background-position:50% 15%!important}}");case"wikimirror-css-darkmode-logo-wiki-vector-legacy":return"".concat(t,"#p-logo{height:100px}#p-logo a{height:125px}");case"wikimirror-css-darkmode-logo-zhwiki":return".mw-wiki-logo{background-image:url(".concat(n,".png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans.png)}@media(-webkit-min-device-pixel-ratio:1.5),(min--moz-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:144dpi){.mw-wiki-logo{background-image:url(").concat(n,"-1.5x.png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans-1.5x.png)}}@media(-webkit-min-device-pixel-ratio:2),(min--moz-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.mw-wiki-logo{background-image:url(").concat(n,"-2x.png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans-2x.png)}}")}}},{key:"initMessages",value:function(){var e=this.i18n().localize;return{ajaxLogin:{"6-digit number":e({ja:"6桁の数字","zh-hans":"6位数字","zh-hant":"6位數字"}),"Automatic account creation failed":e({ja:"アカウントの自動作成に失敗しました","zh-hans":"自动创建账号失败","zh-hant":"自動創建帳戶失敗"}),Cancel:e({ja:"キャンセル",zh:"取消"}),"Cross wiki automatic login":e({ja:"跨ウィキ自動ログイン","zh-hans":"跨维基自动登录","zh-hant":"跨维基自動登入"}),"Enter password":e({ja:"パスワード","zh-hans":"请输入密码","zh-hant":"請輸入密碼"}),"Enter 2FA verification code":e({en:"2FA verification code",ja:"2FA認証コード","zh-hans":"请输入2FA验证码","zh-hant":"請輸入2FA驗證碼"}),"Forgot password?":e({ja:"パスワードをお忘れですか？","zh-hans":"忘记密码？","zh-hant":"忘記密碼？"}),"Getting login token":e({ja:"ログイントークンを取得しています","zh-hans":"正在获取登录令牌","zh-hant":"正在獲取登入權杖"}),"If selected, the login status will be kept for 1 year. If not selected, it will be kept for 1 month.":e({ja:"チェックを入れるとログイン状態が1年間保持され、入れない場合は1ヶ月間保持されます。","zh-hans":"勾选则保持登录状态1年，不勾选则保持1个月。","zh-hant":"勾選则保持登入狀態1年，不勾選則保持1個月。"}),"Keep me logged in":e({ja:"ログイン状態を保持","zh-hans":"记住我的登录状态","zh-hant":"記住我的登入狀態"}),"Logging in":e({ja:"ログインしています","zh-hans":"正在登录","zh-hant":"正在登入"}),Login:e({ja:"ログイン","zh-hans":"登录","zh-hant":"登入"}),"Login cancelled":e({ja:"ログインキャンセル","zh-hans":"登录取消","zh-hant":"登入取消"}),"Login succeed":e({ja:"ログインに成功しました","zh-hans":"登录成功","zh-hant":"登入成功"}),"Login token getted":e({ja:"ログイントークンの取得に成功しました","zh-hans":"获取登录令牌成功","zh-hant":"獲取登入權杖成功"}),"New password":e({ja:"新しいパスワード","zh-hans":"新密码","zh-hant":"新密碼"}),"New password is required":e({ja:"新しいパスワードを設定してください","zh-hans":"需要设置新密码","zh-hant":"需要設置新密碼"}),Password:e({ja:"パスワード","zh-hans":"密码","zh-hant":"密碼"}),"Reset password":e({ja:"パスワードをリセット","zh-hans":"重置密码","zh-hant":"重新設定密碼"}),"Starting automatic login":e({ja:"自動ログインが開始されました","zh-hans":"开始自动登录","zh-hant":"开始自動登入"}),"The 2FA verification code cannot be empty":e({ja:"2FA認証コードが入力されていません","zh-hans":"2FA验证码不能为空","zh-hant":"2FA驗證碼不能爲空"}),"The password cannot be empty":e({ja:"パスワードが入力されていません","zh-hans":"密码不能为空","zh-hant":"密碼不能爲空"}),"The username or password cannot be empty":e({ja:"利用者名またはパスワードが入力されていません","zh-cn":"用户名或密码不能为空","zh-hk":"用戶名稱或密碼不能爲空","zh-tw":"使用者名稱或密碼不能爲空"}),"The user has been globally locked":e({ja:"利用者はグローバルにロックされています","zh-cn":"用户已被全域锁定","zh-hk":"用戶已被全域封鎖","zh-tw":"使用者已被全域封鎖"}),"The user login is too frequent, please try again in five minutes":e({ja:"利用者が頻繁すぎるため、5分後に再試行してください","zh-cn":"用户登录过于频繁，请五分钟后再试","zh-hk":"用戶登入過於頻繁，請五分鐘後再試","zh-tw":"使用者登入过于频繁，请五分钟后再试"}),"Unknown API error":e({ja:"未定義のAPIエラー","zh-hans":"未定义的API错误","zh-hant":"未定義的API錯誤"}),Username:e({ja:"利用者名","zh-cn":"用户名","zh-hk":"用戶名稱","zh-tw":"使用者名稱"}),"Invalid 2FA verification code":e({ja:"2FA認証コードが間違っています","zh-hans":"2FA验证码错误","zh-hant":"2FA驗證碼錯誤"}),"Invalid useruame or password":e({ja:"利用者名またはパスワードが間違っています","zh-cn":"用户名或密码错误","zh-hk":"用戶名稱或密碼錯誤","zh-tw":"使用者名稱或密碼錯誤"})},confirmLogout:{"Confirm logout?":e({ja:"ログアウトしますか？","zh-hans":"您确定要退出吗？","zh-hant":"您確定要登出嗎？"})},darkMode:{"Dark mode":e({ja:"ダークモード","zh-hans":"深色主题","zh-hant":"深色主題"}),"Light mode":e({ja:"通常モード","zh-hans":"浅色主题","zh-hant":"淺色主題"}),"Switch to dark mode":e({ja:"ダークモードに切り替えています","zh-hans":"将镜像站的主题色切换至深色","zh-hant":"將鏡像站的主題色切換至深色"}),"Switch to light mode":e({ja:"通常モードに切り替えています","zh-hans":"将镜像站的主题色切换至浅色","zh-hant":"將鏡像站的主題色切換至淺色"})},diffLink:{"Copy the link to the diff version (wiki syntax)":e({ja:"現在の版間の差分リンクをコピーします（ウィキ記法）","zh-hans":"复制链接到当前差异版本的维基语法","zh-hant":"複製連結到當前差異版本的維基語法"}),"Copy the permanent link to the current version (wiki syntax)":e({ja:"このページのこの版への固定リンクをコピーします（ウィキ記法）","zh-hans":"复制链接到当前修订版本的维基语法","zh-hant":"複製連結到當前修訂版本的維基語法"}),"Diff link":e({ja:"現在の版間の差分リンク","zh-hans":"当前差异链接","zh-hant":"當前差異連結"}),"Permanent link":e({ja:"この版への固定リンク","zh-hans":"当前修订链接","zh-hant":"當前修訂連結"})},floatTOC:{Close:e({ja:"閉じる","zh-hans":"关闭","zh-hant":"關閉"}),TOC:e({ja:"目次",zh:"目录"})},showNotice:{OK:e({ja:"了解",zh:"了解"})},showNetworkErrorNotice:{"Network error":e({ja:"ネットワークエラー","zh-hans":"网络异常","zh-hant":"網路異常"})},showRedirect:{"Official site":e({ja:"公式サイト","zh-hans":"访问官方页面","zh-hant":"造訪官方頁"}),"Redirect the current mirror page to its corresponding official page":e({ja:"現在のミラーページを公式の対応ページにリダイレクトします","zh-hans":"将当前镜像站页面重定向至官方相应页面","zh-hant":"將當前鏡像頁重新導向至官方相應頁"})},viewOnOtherWikis:{Moegirl:e({en:'Read the article "<a href="$2" target="_blank" title="$3">$1</a>" on <span style="color:#25b449">Moegirlpedia</span>®.',ja:'「<a href="$2" target="_blank" title="$3">$1</a>」<br>は<span style="color:#25b449">萌えっ娘百科事典</span>®で読むことができます。',"zh-hans":'在<span style="color:#25b449">萌娘百科</span>®上阅读<br>“<a href="$2" target="_blank" title="$3">$1</a>”',"zh-hant":'在<span style="color:#25b449">萌娘百科</span>®上閱讀<br>「<a href="$2" target="_blank" title="$3">$1</a>」'}),Qiuwen:e({en:'Read the article "<a href="$2" target="_blank" title="$3">$1</a>" on Qiuwen Baike®.',ja:'「<a href="$2" target="_blank" title="$3">$1</a>」<br>は求聞百科®で読むことができます。',"zh-hans":'在求闻百科®上阅读<br>“<a href="$2" target="_blank" title="$3">$1</a>”',"zh-hant":'在求聞百科®上閱讀<br>「<a href="$2" target="_blank" title="$3">$1</a>」'})}}}}]),u})();!(function(){(e=e||_asyncToGenerator(_regeneratorRuntime().mark((function e(){var r,a,i,o,u,s,l,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new n(t),e.next=3,a.init();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:
  /**
   * ajax-hook 2.1.3
   *
   * @license MIT
   * @link <https://github.com/wendux/ajax-hook/pull/103>
   */
  !(function(e,t){for(var n in t)e[n]=t[n]})(window,(function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)})([function(e,t,n){function r(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)};t.configEvent=r,t.hook=function(e,t){function n(t){return function(){var n=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],r=(e[t]||{}).getter;return r&&r(n,this)||n}}function u(t){return function(n){var a=this.xhr,i=this,o=e[t];if("on"===t.substring(0,2))i[t+"_"]=n,a[t]=function(o){o=r(o,i),e[t]&&e[t].call(i,a,o)||n.call(i,o)};else{var u=(o||{}).setter;n=u&&u(n,i)||n,this[t+"_"]=n;try{a[t]=n}catch(e){}}}}function s(t){return function(){var n=[].slice.call(arguments);if(e[t]){var r=e[t].call(this,n,this.xhr);if(r)return r}return this.xhr[t].apply(this.xhr,n)}}return(t=t||window)[i]=t[i]||t.XMLHttpRequest,t.XMLHttpRequest=function(){for(var e=new t[i],r=0;r<o.length;++r){var l="on"+o[r];void 0===e[l]&&(e[l]=null)}for(var c in e){var d="";try{d=a(e[c])}catch(e){}"function"===d?this[c]=s(c):Object.defineProperty(this,c,{get:n(c),set:u(c),enumerable:!0})}var h=this;e.getProxy=function(){return h},this.xhr=e},Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t[i]},t.unHook=function(e){(e=e||window)[i]&&(e.XMLHttpRequest=e[i]),e[i]=void 0};var i="__xhr",o=t.events=["load","loadend","timeout","error","readystatechange","abort"]},function(e,t,n){function r(e){return e.watcher||(e.watcher=document.createElement("a"))}function a(e,t){var n,a=e.getProxy(),i="on"+t+"_",o=(0,s.configEvent)({type:t},a);a[i]&&a[i](o),"function"==typeof Event?n=new Event(t,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(t,!1,!0),r(e).dispatchEvent(n)}function i(e){this.xhr=e,this.xhrProxy=e.getProxy()}function o(e){function t(e){i.call(this,e)}return t[m]=Object.create(i[m]),t[m].next=e,t}function u(e){return null!=e.response||""!==e.responseType&&"text"!==e.responseType?e.response:e.responseText}Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=function(e,t){if((t=t||window).__xhr)throw"Ajax is already hooked.";return(function(e,t){function n(e,t){var n=new g(e),r={response:u(t),status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=(function(e){return e.replace(/^\s+|\s+$/g,"")})(n.join(":")),e}),{})};if(!v)return n.resolve(r);v(r,n)}function i(e,t,n,r){var a=new w(e);n={config:e.config,error:n,type:r},_?_(n,a):a.next(n)}function o(){return!0}function l(e){return function(t,n){return i(t,this,n,e),!0}}function c(e,t){return 4===e.readyState&&0!==e.status?n(e,t):4!==e.readyState&&a(e,D),!0}var m=e.onRequest,v=e.onResponse,_=e.onError;return(0,s.hook)({onload:o,onloadend:o,onerror:l(h),ontimeout:l(d),onabort:l(f),onreadystatechange:function(e){return c(e,this)},open:function(e,t){var n=this,r=t.config={headers:{}};r.method=e[0],r.url=e[1],r.async=e[2],r.user=e[3],r.password=e[4],r.xhr=t;var a="on"+D;if(t[a]||(t[a]=function(){return c(t,n)}),m)return!0},send:function(e,t){var n=t.config;if(n.withCredentials=t.withCredentials,n.body=e[0],m){var r=function(){m(n,new p(t))};return!1===n.async?r():setTimeout(r),!0}},setRequestHeader:function(e,t){if(t.config.headers[e[0].toLowerCase()]=e[1],m)return!0},addEventListener:function(e,t){var n=this;if(-1!==s.events.indexOf(e[0])){var a=e[1];return r(t).addEventListener(e[0],(function(t){var r=(0,s.configEvent)(t,n);r.type=e[0],r.isTrusted=!0,a.call(n,r)})),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var a in n)r+=a+": "+n[a]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}},t)})(e,t)},t.unProxy=function(e){(0,s.unHook)(e)};var s=n(0),l=s.events[0],c=s.events[1],d=s.events[2],h=s.events[3],D=s.events[4],f=s.events[5],m="prototype";i[m]=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,a(n,D),a(n,l),a(n,c)},reject:function(e){this.xhrProxy.status=0,a(this.xhr,e.type),a(this.xhr,c)}});var p=o((function(e){var t=this.xhr;for(var n in e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)})),g=o((function(e){this.resolve(e)})),w=o((function(e){this.reject(e)}))},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ah=void 0;var r=n(0),a=n(1);t.ah={proxy:a.proxy,unProxy:a.unProxy,hook:r.hook,unHook:r.unHook}}])),
  /**
   * pako 2.1.0
   *
   * @license (MIT AND Zlib)
   * @link <https://github.com/nodeca/pako>
   */
  d=this,h=function(e){function t(e){for(var t=e.length;--t>=0;)e[t]=0}var n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);t(o);var u=new Array(60);t(u);var s=new Array(512);t(s);var l=new Array(256);t(l);var c=new Array(29);t(c);var d,h,D,f=new Array(30);function m(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function p(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(f);var g=function(e){return e<256?s[e]:s[256+(e>>>7)]},w=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},v=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},_=function(e,t,n){v(e,n[2*t],n[2*t+1])},y=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},F=function(e,t,n){var r,a,i=new Array(16),o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,i[r]=o;for(a=0;a<=t;a++){var u=e[2*a+1];0!==u&&(e[2*a]=y(i[u]++,u))}},b=function(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},k=function(e){e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},C=function(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},E=function(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&C(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!C(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},x=function(e,t,a){var i,o,u,s,d=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+d++],i+=(255&e.pending_buf[e.sym_buf+d++])<<8,o=e.pending_buf[e.sym_buf+d++],0===i?_(e,o,t):(u=l[o],_(e,u+256+1,t),0!==(s=n[u])&&(o-=c[u],v(e,o,s)),i--,u=g(i),_(e,u,a),0!==(s=r[u])&&(i-=f[u],v(e,i,s)))}while(d<e.sym_next);_(e,256,t)},A=function(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,s=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==i[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,u&&(e.static_len-=o[2*a+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)E(e,i,n);a=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],E(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,E(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],(function(e,t){var n,r,a,i,o,u,s=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,D=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=s[2*s[2*(r=e.heap[n])+1]+1]+1)>f&&(i=f,m++),s[2*r+1]=i,r>l||(e.bl_count[i]++,o=0,r>=D&&(o=h[r-D]),u=s[2*r],e.opt_len+=u*(i+o),d&&(e.static_len+=u*(c[2*r+1]+o)));if(0!==m){do{for(i=f-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(i=f;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>l||(s[2*a+1]!==i&&(e.opt_len+=(i-s[2*a+1])*s[2*a],s[2*a+1]=i),r--)}})(e,t),F(i,l,e.bl_count)},z=function(e,t,n){var r,a,i=-1,o=t[1],u=0,s=7,l=4;for(0===o&&(s=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++u<s&&a===o||(u<l?e.bl_tree[2*a]+=u:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):u<=10?e.bl_tree[34]++:e.bl_tree[36]++,u=0,i=a,0===o?(s=138,l=3):a===o?(s=6,l=3):(s=7,l=4))},B=function(e,t,n){var r,a,i=-1,o=t[1],u=0,s=7,l=4;for(0===o&&(s=138,l=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++u<s&&a===o)){if(u<l)do{_(e,a,e.bl_tree)}while(0!=--u);else 0!==a?(a!==i&&(_(e,a,e.bl_tree),u--),_(e,16,e.bl_tree),v(e,u-3,2)):u<=10?(_(e,17,e.bl_tree),v(e,u-3,3)):(_(e,18,e.bl_tree),v(e,u-11,7));u=0,i=a,0===o?(s=138,l=3):a===o?(s=6,l=3):(s=7,l=4)}},R=!1,S=function(e,t,n,r){v(e,0+(r?1:0),3),k(e),w(e,n),w(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},T=function(e){R||((function(){var e,t,i,p,g,w=new Array(16);for(i=0,p=0;p<28;p++)for(c[p]=i,e=0;e<1<<n[p];e++)l[i++]=p;for(l[i-1]=p,g=0,p=0;p<16;p++)for(f[p]=g,e=0;e<1<<r[p];e++)s[g++]=p;for(g>>=7;p<30;p++)for(f[p]=g<<7,e=0;e<1<<r[p]-7;e++)s[256+g++]=p;for(t=0;t<=15;t++)w[t]=0;for(e=0;e<=143;)o[2*e+1]=8,e++,w[8]++;for(;e<=255;)o[2*e+1]=9,e++,w[9]++;for(;e<=279;)o[2*e+1]=7,e++,w[7]++;for(;e<=287;)o[2*e+1]=8,e++,w[8]++;for(F(o,287,w),e=0;e<30;e++)u[2*e+1]=5,u[2*e]=y(e,5);d=new m(o,n,257,286,15),h=new m(u,r,0,30,15),D=new m(new Array(0),a,0,19,7)})(),R=!0),e.l_desc=new p(e.dyn_ltree,d),e.d_desc=new p(e.dyn_dtree,h),e.bl_desc=new p(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,b(e)},O=S,L=function(e,t,n,r){var a,s,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),A(e,e.l_desc),A(e,e.d_desc),l=(function(e){var t;for(z(e,e.dyn_ltree,e.l_desc.max_code),z(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?S(e,t,n,r):4===e.strategy||s===a?(v(e,2+(r?1:0),3),x(e,o,u)):(v(e,4+(r?1:0),3),(function(e,t,n,r){var a;for(v(e,t-257,5),v(e,n-1,5),v(e,r-4,4),a=0;a<r;a++)v(e,e.bl_tree[2*i[a]+1],3);B(e,e.dyn_ltree,t-1),B(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),x(e,e.dyn_ltree,e.dyn_dtree)),b(e),r&&k(e)},M=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(l[n]+256+1)]++,e.dyn_dtree[2*g(t)]++),e.sym_next===e.sym_end},j=function(e){v(e,2,3),_(e,256,o),(function(e){16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},I=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},N=new Uint32Array((function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})()),U=function(e,t,n,r){var a=N,i=r+n;e^=-1;for(var o=r;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},P={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},q=T,W=O,Z=L,G=M,$=j,Q=P.Z_NO_FLUSH,X=P.Z_PARTIAL_FLUSH,K=P.Z_FULL_FLUSH,V=P.Z_FINISH,J=P.Z_BLOCK,Y=P.Z_OK,ee=P.Z_STREAM_END,te=P.Z_STREAM_ERROR,ne=P.Z_DATA_ERROR,re=P.Z_BUF_ERROR,ae=P.Z_DEFAULT_COMPRESSION,ie=P.Z_FILTERED,oe=P.Z_HUFFMAN_ONLY,ue=P.Z_RLE,se=P.Z_FIXED,le=P.Z_DEFAULT_STRATEGY,ce=P.Z_UNKNOWN,de=P.Z_DEFLATED,he=258,De=262,fe=42,me=113,pe=666,ge=function(e,t){return e.msg=H[t],t},we=function(e){return 2*e-(e>4?9:0)},ve=function(e){for(var t=e.length;--t>=0;)e[t]=0},_e=function(e){var t,n,r,a=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);r=t=a;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)},ye=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Fe=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},be=function(e,t){Z(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Fe(e.strm)},ke=function(e,t){e.pending_buf[e.pending++]=t},Ce=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ee=function(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=I(e.adler,t,a,n):2===e.state.wrap&&(e.adler=U(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},xe=function(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,u=e.nice_match,s=e.strstart>e.w_size-De?e.strstart-(e.w_size-De):0,l=e.window,c=e.w_mask,d=e.prev,h=e.strstart+he,D=l[i+o-1],f=l[i+o];e.prev_length>=e.good_match&&(a>>=2),u>e.lookahead&&(u=e.lookahead);do{if(l[(n=t)+o]===f&&l[n+o-1]===D&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<h);if(r=he-(h-i),i=h-he,r>o){if(e.match_start=t,o=r,r>=u)break;D=l[i+o-1],f=l[i+o]}}}while((t=d[t&c])>s&&0!=--a);return o<=e.lookahead?o:e.lookahead},Ae=function(e){var t,n,r,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-De)&&(e.window.set(e.window.subarray(a,a+a-n),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),_e(e),n+=a),0===e.strm.avail_in)break;if(t=Ee(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=ye(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<De&&0!==e.strm.avail_in)},ze=function(e,t){var n,r,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,u=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&t!==V||t===Q||n!==r+e.strm.avail_in))break;o=t===V&&n===r+e.strm.avail_in?1:0,W(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Fe(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Ee(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return(u-=e.strm.avail_in)&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Q&&t!==V&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Ee(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,i=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((r=e.strstart-e.block_start)>=i||(r||t===V)&&t!==Q&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,o=t===V&&0===e.strm.avail_in&&n===r?1:0,W(e,e.block_start,n,o),e.block_start+=n,Fe(e.strm)),o?3:1)},Be=function(e,t){for(var n,r;;){if(e.lookahead<De){if(Ae(e),e.lookahead<De&&t===Q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-De&&(e.match_length=xe(e,n)),e.match_length>=3)if(r=G(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else r=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===V?(be(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(be(e,!1),0===e.strm.avail_out)?1:2},Re=function(e,t){for(var n,r,a;;){if(e.lookahead<De){if(Ae(e),e.lookahead<De&&t===Q)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-De&&(e.match_length=xe(e,n),e.match_length<=5&&(e.strategy===ie||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=G(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(be(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=G(e,0,e.window[e.strstart-1]))&&be(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=G(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===V?(be(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(be(e,!1),0===e.strm.avail_out)?1:2};function Se(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}var Te=[new Se(0,0,0,0,ze),new Se(4,4,8,4,Be),new Se(4,5,16,8,Be),new Se(4,6,32,32,Be),new Se(4,4,16,16,Re),new Se(8,16,32,32,Re),new Se(8,16,128,128,Re),new Se(8,32,128,256,Re),new Se(32,128,258,1024,Re),new Se(32,258,258,4096,Re)];function Oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=de,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ve(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Le=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==fe&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==me&&t.status!==pe?1:0},Me=function(e){if(Le(e))return ge(e,te);e.total_in=e.total_out=0,e.data_type=ce;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?fe:me,e.adler=2===t.wrap?0:1,t.last_flush=-2,q(t),Y},je=function(e){var t,n=Me(e);return n===Y&&((t=e.state).window_size=2*t.w_size,ve(t.head),t.max_lazy_match=Te[t.level].max_lazy,t.good_match=Te[t.level].good_length,t.nice_match=Te[t.level].nice_length,t.max_chain_length=Te[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},Ie=function(e,t,n,r,a,i){if(!e)return te;var o=1;if(t===ae&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>9||n!==de||r<8||r>15||t<0||t>9||i<0||i>se||8===r&&1!==o)return ge(e,te);8===r&&(r=9);var u=new Oe;return e.state=u,u.strm=e,u.status=fe,u.wrap=o,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new Uint8Array(2*u.w_size),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=3*(u.lit_bufsize-1),u.level=t,u.strategy=i,u.method=n,je(e)},Ne={deflateInit:function(e,t){return Ie(e,t,de,15,8,le)},deflateInit2:Ie,deflateReset:je,deflateResetKeep:Me,deflateSetHeader:function(e,t){return Le(e)||2!==e.state.wrap?te:(e.state.gzhead=t,Y)},deflate:function(e,t){if(Le(e)||t>J||t<0)return e?ge(e,te):te;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===pe&&t!==V)return ge(e,0===e.avail_out?re:te);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Fe(e),0===e.avail_out)return n.last_flush=-1,Y}else if(0===e.avail_in&&we(t)<=we(r)&&t!==V)return ge(e,re);if(n.status===pe&&0!==e.avail_in)return ge(e,re);if(n.status===fe&&0===n.wrap&&(n.status=me),n.status===fe){var a=de+(n.w_bits-8<<4)<<8;if(a|=(n.strategy>=oe||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),Ce(n,a+=31-a%31),0!==n.strstart&&(Ce(n,e.adler>>>16),Ce(n,65535&e.adler)),e.adler=1,n.status=me,Fe(e),0!==n.pending)return n.last_flush=-1,Y}if(57===n.status)if(e.adler=0,ke(n,31),ke(n,139),ke(n,8),n.gzhead)ke(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ke(n,255&n.gzhead.time),ke(n,n.gzhead.time>>8&255),ke(n,n.gzhead.time>>16&255),ke(n,n.gzhead.time>>24&255),ke(n,9===n.level?2:n.strategy>=oe||n.level<2?4:0),ke(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ke(n,255&n.gzhead.extra.length),ke(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=U(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,0),ke(n,9===n.level?2:n.strategy>=oe||n.level<2?4:0),ke(n,3),n.status=me,Fe(e),0!==n.pending)return n.last_flush=-1,Y;if(69===n.status){if(n.gzhead.extra){for(var i=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var u=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+u),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=U(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=u,Fe(e),0!==n.pending)return n.last_flush=-1,Y;i=0,o-=u}var s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=U(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var l,c=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>c&&(e.adler=U(e.adler,n.pending_buf,n.pending-c,c)),Fe(e),0!==n.pending)return n.last_flush=-1,Y;c=0}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ke(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>c&&(e.adler=U(e.adler,n.pending_buf,n.pending-c,c)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var d,h=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>h&&(e.adler=U(e.adler,n.pending_buf,n.pending-h,h)),Fe(e),0!==n.pending)return n.last_flush=-1,Y;h=0}d=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ke(n,d)}while(0!==d);n.gzhead.hcrc&&n.pending>h&&(e.adler=U(e.adler,n.pending_buf,n.pending-h,h))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Fe(e),0!==n.pending))return n.last_flush=-1,Y;ke(n,255&e.adler),ke(n,e.adler>>8&255),e.adler=0}if(n.status=me,Fe(e),0!==n.pending)return n.last_flush=-1,Y}if(0!==e.avail_in||0!==n.lookahead||t!==Q&&n.status!==pe){var D=0===n.level?ze(n,t):n.strategy===oe?(function(e,t){for(var n;;){if(0===e.lookahead&&(Ae(e),0===e.lookahead)){if(t===Q)return 1;break}if(e.match_length=0,n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===V?(be(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(be(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ue?(function(e,t){for(var n,r,a,i,o=e.window;;){if(e.lookahead<=he){if(Ae(e),e.lookahead<=he&&t===Q)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=o[a=e.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){i=e.strstart+he;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=he-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=G(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===V?(be(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(be(e,!1),0===e.strm.avail_out)?1:2})(n,t):Te[n.level].func(n,t);if(3!==D&&4!==D||(n.status=pe),1===D||3===D)return 0===e.avail_out&&(n.last_flush=-1),Y;if(2===D&&(t===X?$(n):t!==J&&(W(n,0,0,!1),t===K&&(ve(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Fe(e),0===e.avail_out))return n.last_flush=-1,Y}return t!==V?Y:n.wrap<=0?ee:(2===n.wrap?(ke(n,255&e.adler),ke(n,e.adler>>8&255),ke(n,e.adler>>16&255),ke(n,e.adler>>24&255),ke(n,255&e.total_in),ke(n,e.total_in>>8&255),ke(n,e.total_in>>16&255),ke(n,e.total_in>>24&255)):(Ce(n,e.adler>>>16),Ce(n,65535&e.adler)),Fe(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Y:ee)},deflateEnd:function(e){if(Le(e))return te;var t=e.state.status;return e.state=null,t===me?ge(e,ne):Y},deflateSetDictionary:function(e,t){var n=t.length;if(Le(e))return te;var r=e.state,a=r.wrap;if(2===a||1===a&&r.status!==fe||r.lookahead)return te;if(1===a&&(e.adler=I(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(ve(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size}var o=e.avail_in,u=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ae(r);r.lookahead>=3;){var l=r.strstart,c=r.lookahead-2;do{r.ins_h=ye(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,Ae(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=s,e.avail_in=o,r.wrap=a,Y},deflateInfo:"pako deflate (from Nodeca project)"},Ue=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},He=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=_typeof(n))throw new TypeError(n+"must be non-object");for(var r in n)Ue(n,r)&&(e[r]=n[r])}}return e},Pe=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var a=new Uint8Array(t),i=0,o=0,u=e.length;i<u;i++){var s=e[i];a.set(s,o),o+=s.length}return a},qe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){qe=!1}for(var We=new Uint8Array(256),Ze=0;Ze<256;Ze++)We[Ze]=Ze>=252?6:Ze>=248?5:Ze>=240?4:Ze>=224?3:Ze>=192?2:1;We[254]=We[254]=1;var Ge=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,a,i,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(u),i=0,a=0;i<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},$e=function(e,t){var n,r,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(r=0,n=0;n<a;){var o=e[n++];if(o<128)i[r++]=o;else{var u=We[o];if(u>4)i[r++]=65533,n+=u-1;else{for(o&=2===u?31:3===u?15:7;u>1&&n<a;)o=o<<6|63&e[n++],u--;u>1?i[r++]=65533:o<65536?i[r++]=o:(o-=65536,i[r++]=55296|o>>10&1023,i[r++]=56320|1023&o)}}}return(function(e,t){if(t<65534&&e.subarray&&qe)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,r)},Qe=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+We[e[n]]>t?n:t},Xe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ke=Object.prototype.toString,Ve=P.Z_NO_FLUSH,Je=P.Z_SYNC_FLUSH,Ye=P.Z_FULL_FLUSH,et=P.Z_FINISH,tt=P.Z_OK,nt=P.Z_STREAM_END,rt=P.Z_DEFAULT_COMPRESSION,at=P.Z_DEFAULT_STRATEGY,it=P.Z_DEFLATED;function ot(e){this.options=He({level:rt,method:it,chunkSize:16384,windowBits:15,memLevel:8,strategy:at},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xe,this.strm.avail_out=0;var n=Ne.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tt)throw new Error(H[n]);if(t.header&&Ne.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Ge(t.dictionary):"[object ArrayBuffer]"===Ke.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Ne.deflateSetDictionary(this.strm,r))!==tt)throw new Error(H[n]);this._dict_set=!0}}function ut(e,t){var n=new ot(t);if(n.push(e,!0),n.err)throw n.msg||H[n.err];return n.result}ot.prototype.push=function(e,t){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?et:Ve,"string"==typeof e?a.input=Ge(e):"[object ArrayBuffer]"===Ke.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(r===Je||r===Ye)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=Ne.deflate(a,r))===nt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Ne.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tt;if(0!==a.avail_out){if(r>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},ot.prototype.onData=function(e){this.chunks.push(e)},ot.prototype.onEnd=function(e){e===tt&&(this.result=Pe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var st=ot,lt=ut,ct=function(e,t){return(t=t||{}).raw=!0,ut(e,t)},dt=function(e,t){return(t=t||{}).gzip=!0,ut(e,t)},ht=16209,Dt=function(e,t){var n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b,k,C,E=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),a=e.next_out,C=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),u=E.dmax,s=E.wsize,l=E.whave,c=E.wnext,d=E.window,h=E.hold,D=E.bits,f=E.lencode,m=E.distcode,p=(1<<E.lenbits)-1,g=(1<<E.distbits)-1;e:do{D<15&&(h+=k[n++]<<D,D+=8,h+=k[n++]<<D,D+=8),w=f[h&p];t:for(;;){if(h>>>=v=w>>>24,D-=v,0==(v=w>>>16&255))C[a++]=65535&w;else{if(!(16&v)){if(0==(64&v)){w=f[(65535&w)+(h&(1<<v)-1)];continue t}if(32&v){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=ht;break e}_=65535&w,(v&=15)&&(D<v&&(h+=k[n++]<<D,D+=8),_+=h&(1<<v)-1,h>>>=v,D-=v),D<15&&(h+=k[n++]<<D,D+=8,h+=k[n++]<<D,D+=8),w=m[h&g];n:for(;;){if(h>>>=v=w>>>24,D-=v,!(16&(v=w>>>16&255))){if(0==(64&v)){w=m[(65535&w)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",E.mode=ht;break e}if(y=65535&w,D<(v&=15)&&(h+=k[n++]<<D,(D+=8)<v&&(h+=k[n++]<<D,D+=8)),(y+=h&(1<<v)-1)>u){e.msg="invalid distance too far back",E.mode=ht;break e}if(h>>>=v,D-=v,y>(v=a-i)){if((v=y-v)>l&&E.sane){e.msg="invalid distance too far back",E.mode=ht;break e}if(F=0,b=d,0===c){if(F+=s-v,v<_){_-=v;do{C[a++]=d[F++]}while(--v);F=a-y,b=C}}else if(c<v){if(F+=s+c-v,(v-=c)<_){_-=v;do{C[a++]=d[F++]}while(--v);if(F=0,c<_){_-=v=c;do{C[a++]=d[F++]}while(--v);F=a-y,b=C}}}else if(F+=c-v,v<_){_-=v;do{C[a++]=d[F++]}while(--v);F=a-y,b=C}for(;_>2;)C[a++]=b[F++],C[a++]=b[F++],C[a++]=b[F++],_-=3;_&&(C[a++]=b[F++],_>1&&(C[a++]=b[F++]))}else{F=a-y;do{C[a++]=C[F++],C[a++]=C[F++],C[a++]=C[F++],_-=3}while(_>2);_&&(C[a++]=C[F++],_>1&&(C[a++]=C[F++]))}break}}break}}while(n<r&&a<o);n-=_=D>>3,h&=(1<<(D-=_<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<o?o-a+257:257-(a-o),E.hold=h,E.bits=D},ft=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wt=function(e,t,n,r,a,i,o,u){var s,l,c,d,h,D,f,m,p,g=u.bits,w=0,v=0,_=0,y=0,F=0,b=0,k=0,C=0,E=0,x=0,A=null,z=new Uint16Array(16),B=new Uint16Array(16),R=null;for(w=0;w<=15;w++)z[w]=0;for(v=0;v<r;v++)z[t[n+v]]++;for(F=g,y=15;y>=1&&0===z[y];y--);if(F>y&&(F=y),0===y)return a[i++]=20971520,a[i++]=20971520,u.bits=1,0;for(_=1;_<y&&0===z[_];_++);for(F<_&&(F=_),C=1,w=1;w<=15;w++)if(C<<=1,(C-=z[w])<0)return-1;if(C>0&&(0===e||1!==y))return-1;for(B[1]=0,w=1;w<15;w++)B[w+1]=B[w]+z[w];for(v=0;v<r;v++)0!==t[n+v]&&(o[B[t[n+v]]++]=v);if(0===e?(A=R=o,D=20):1===e?(A=ft,R=mt,D=257):(A=pt,R=gt,D=0),x=0,v=0,w=_,h=i,b=F,k=0,c=-1,d=(E=1<<F)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){f=w-k,o[v]+1<D?(m=0,p=o[v]):o[v]>=D?(m=R[o[v]-D],p=A[o[v]-D]):(m=96,p=0),s=1<<w-k,_=l=1<<b;do{a[h+(x>>k)+(l-=s)]=f<<24|m<<16|p|0}while(0!==l);for(s=1<<w-1;x&s;)s>>=1;if(0!==s?(x&=s-1,x+=s):x=0,v++,0==--z[w]){if(w===y)break;w=t[n+o[v]]}if(w>F&&(x&d)!==c){for(0===k&&(k=F),h+=_,C=1<<(b=w-k);b+k<y&&!((C-=z[b+k])<=0);)b++,C<<=1;if(E+=1<<b,1===e&&E>852||2===e&&E>592)return 1;a[c=x&d]=F<<24|b<<16|h-i|0}}return 0!==x&&(a[h+x]=w-k<<24|64<<16|0),u.bits=F,0},vt=P.Z_FINISH,_t=P.Z_BLOCK,yt=P.Z_TREES,Ft=P.Z_OK,bt=P.Z_STREAM_END,kt=P.Z_NEED_DICT,Ct=P.Z_STREAM_ERROR,Et=P.Z_DATA_ERROR,xt=P.Z_MEM_ERROR,At=P.Z_BUF_ERROR,zt=P.Z_DEFLATED,Bt=16180,Rt=16190,St=16191,Tt=16192,Ot=16194,Lt=16199,Mt=16200,jt=16206,It=16209,Nt=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Ut(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Ht,Pt,qt=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<Bt||t.mode>16211?1:0},Wt=function(e){if(qt(e))return Ct;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Bt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ft},Zt=function(e){if(qt(e))return Ct;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Wt(e)},Gt=function(e,t){var n;if(qt(e))return Ct;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ct:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Zt(e))},$t=function(e,t){if(!e)return Ct;var n=new Ut;e.state=n,n.strm=e,n.window=null,n.mode=Bt;var r=Gt(e,t);return r!==Ft&&(e.state=null),r},Qt=!0,Xt=function(e){if(Qt){Ht=new Int32Array(512),Pt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(wt(1,e.lens,0,288,Ht,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;wt(2,e.lens,0,32,Pt,0,e.work,{bits:5}),Qt=!1}e.lencode=Ht,e.lenbits=9,e.distcode=Pt,e.distbits=5},Kt=function(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Vt={inflateReset:Zt,inflateReset2:Gt,inflateResetKeep:Wt,inflateInit:function(e){return $t(e,15)},inflateInit2:$t,inflate:function(e,t){var n,r,a,i,o,u,s,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b,k,C,E=0,x=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qt(e)||!e.output||!e.input&&0!==e.avail_in)return Ct;(n=e.state).mode===St&&(n.mode=Tt),o=e.next_out,a=e.output,s=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,l=n.hold,c=n.bits,d=u,h=s,b=Ft;e:for(;;)switch(n.mode){case Bt:if(0===n.wrap){n.mode=Tt;break}for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0),l=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=It;break}if((15&l)!==zt){e.msg="unknown compression method",n.mode=It;break}if(c-=4,F=8+(15&(l>>>=4)),0===n.wbits&&(n.wbits=F),F>15||F>n.wbits){e.msg="invalid window size",n.mode=It;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:St,l=0,c=0;break;case 16181:for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==zt){e.msg="unknown compression method",n.mode=It;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=It;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,n.check=U(n.check,x,4,0)),l=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((D=n.length)>u&&(D=u),D&&(n.head&&(F=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+D),F)),512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,D,i)),u-=D,i+=D,n.length-=D),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===u)break e;D=0;do{F=r[i+D++],n.head&&F&&n.length<65536&&(n.head.name+=String.fromCharCode(F))}while(F&&D<u);if(512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,D,i)),u-=D,i+=D,F)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===u)break e;D=0;do{F=r[i+D++],n.head&&F&&n.length<65536&&(n.head.comment+=String.fromCharCode(F))}while(F&&D<u);if(512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,D,i)),u-=D,i+=D,F)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=It;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=St;break;case 16189:for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}e.adler=n.check=Nt(l),l=0,c=0,n.mode=Rt;case Rt:if(0===n.havedict)return e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,kt;e.adler=n.check=1,n.mode=St;case St:if(t===_t||t===yt)break e;case Tt:if(n.last){l>>>=7&c,c-=7&c,n.mode=jt;break}for(;c<3;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=16193;break;case 1:if(Xt(n),n.mode=Lt,t===yt){l>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=It}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=It;break}if(n.length=65535&l,l=0,c=0,n.mode=Ot,t===yt)break e;case Ot:n.mode=16195;case 16195:if(D=n.length){if(D>u&&(D=u),D>s&&(D=s),0===D)break e;a.set(r.subarray(i,i+D),o),u-=D,i+=D,s-=D,o+=D,n.length-=D;break}n.mode=St;break;case 16196:for(;c<14;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=It;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.lens[A[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},b=wt(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid code lengths set",n.mode=It;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;g=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,w=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(w<16)l>>>=p,c-=p,n.lens[n.have++]=w;else{if(16===w){for(C=p+2;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(l>>>=p,c-=p,0===n.have){e.msg="invalid bit length repeat",n.mode=It;break}F=n.lens[n.have-1],D=3+(3&l),l>>>=2,c-=2}else if(17===w){for(C=p+3;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}c-=p,F=0,D=3+(7&(l>>>=p)),l>>>=3,c-=3}else{for(C=p+7;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}c-=p,F=0,D=11+(127&(l>>>=p)),l>>>=7,c-=7}if(n.have+D>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=It;break}for(;D--;)n.lens[n.have++]=F}}if(n.mode===It)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=It;break}if(n.lenbits=9,k={bits:n.lenbits},b=wt(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid literal/lengths set",n.mode=It;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},b=wt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,b){e.msg="invalid distances set",n.mode=It;break}if(n.mode=Lt,t===yt)break e;case Lt:n.mode=Mt;case Mt:if(u>=6&&s>=258){e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,Dt(e,h),o=e.next_out,a=e.output,s=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,l=n.hold,c=n.bits,n.mode===St&&(n.back=-1);break}for(n.back=0;g=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,w=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(g&&0==(240&g)){for(v=p,_=g,y=w;g=(E=n.lencode[y+((l&(1<<v+_)-1)>>v)])>>>16&255,w=65535&E,!(v+(p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}l>>>=v,c-=v,n.back+=v}if(l>>>=p,c-=p,n.back+=p,n.length=w,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=St;break}if(64&g){e.msg="invalid literal/length code",n.mode=It;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;g=(E=n.distcode[l&(1<<n.distbits)-1])>>>16&255,w=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(0==(240&g)){for(v=p,_=g,y=w;g=(E=n.distcode[y+((l&(1<<v+_)-1)>>v)])>>>16&255,w=65535&E,!(v+(p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}l>>>=v,c-=v,n.back+=v}if(l>>>=p,c-=p,n.back+=p,64&g){e.msg="invalid distance code",n.mode=It;break}n.offset=w,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=It;break}n.mode=16204;case 16204:if(0===s)break e;if(D=h-s,n.offset>D){if((D=n.offset-D)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=It;break}D>n.wnext?(D-=n.wnext,f=n.wsize-D):f=n.wnext-D,D>n.length&&(D=n.length),m=n.window}else m=a,f=o-n.offset,D=n.length;D>s&&(D=s),s-=D,n.length-=D;do{a[o++]=m[f++]}while(--D);0===n.length&&(n.mode=Mt);break;case 16205:if(0===s)break e;a[o++]=n.length,s--,n.mode=Mt;break;case jt:if(n.wrap){for(;c<32;){if(0===u)break e;u--,l|=r[i++]<<c,c+=8}if(h-=s,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?U(n.check,a,h,o-h):I(n.check,a,h,o-h)),h=s,4&n.wrap&&(n.flags?l:Nt(l))!==n.check){e.msg="incorrect data check",n.mode=It;break}l=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=It;break}l=0,c=0}n.mode=16208;case 16208:b=bt;break e;case It:b=Et;break e;case 16210:return xt;default:return Ct}return e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<It&&(n.mode<jt||t!==vt))&&Kt(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?U(n.check,a,h,e.next_out-h):I(n.check,a,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===St?128:0)+(n.mode===Lt||n.mode===Ot?256:0),(0===d&&0===h||t===vt)&&b===Ft&&(b=At),b},inflateEnd:function(e){if(qt(e))return Ct;var t=e.state;return t.window&&(t.window=null),e.state=null,Ft},inflateGetHeader:function(e,t){if(qt(e))return Ct;var n=e.state;return 0==(2&n.wrap)?Ct:(n.head=t,t.done=!1,Ft)},inflateSetDictionary:function(e,t){var n,r=t.length;return qt(e)||0!==(n=e.state).wrap&&n.mode!==Rt?Ct:n.mode===Rt&&I(1,t,r,0)!==n.check?Et:Kt(e,t,r,r)?(n.mode=16210,xt):(n.havedict=1,Ft)},inflateInfo:"pako inflate (from Nodeca project)"},Jt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Yt=Object.prototype.toString,en=P.Z_NO_FLUSH,tn=P.Z_FINISH,nn=P.Z_OK,rn=P.Z_STREAM_END,an=P.Z_NEED_DICT,on=P.Z_STREAM_ERROR,un=P.Z_DATA_ERROR,sn=P.Z_MEM_ERROR;function ln(e){this.options=He({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xe,this.strm.avail_out=0;var n=Vt.inflateInit2(this.strm,t.windowBits);if(n!==nn)throw new Error(H[n]);if(this.header=new Jt,Vt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ge(t.dictionary):"[object ArrayBuffer]"===Yt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vt.inflateSetDictionary(this.strm,t.dictionary))!==nn))throw new Error(H[n])}function cn(e,t){var n=new ln(t);if(n.push(e),n.err)throw n.msg||H[n.err];return n.result}ln.prototype.push=function(e,t){var n,r,a,i=this.strm,o=this.options.chunkSize,u=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?tn:en,"[object ArrayBuffer]"===Yt.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n=Vt.inflate(i,r))===an&&u&&((n=Vt.inflateSetDictionary(i,u))===nn?n=Vt.inflate(i,r):n===un&&(n=an));i.avail_in>0&&n===rn&&i.state.wrap>0&&0!==e[i.next_in];)Vt.inflateReset(i),n=Vt.inflate(i,r);switch(n){case on:case un:case an:case sn:return this.onEnd(n),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||n===rn))if("string"===this.options.to){var s=Qe(i.output,i.next_out),l=i.next_out-s,c=$e(i.output,s);i.next_out=l,i.avail_out=o-l,l&&i.output.set(i.output.subarray(s,s+l),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==nn||0!==a){if(n===rn)return n=Vt.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},ln.prototype.onData=function(e){this.chunks.push(e)},ln.prototype.onEnd=function(e){e===nn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Pe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dn=function(e,t){return(t=t||{}).raw=!0,cn(e,t)},hn=st,Dn=lt,fn=ct,mn=dt,pn=ln,gn=cn,wn=dn,vn=cn,_n=P,yn={Deflate:hn,deflate:Dn,deflateRaw:fn,gzip:mn,Inflate:pn,inflate:gn,inflateRaw:wn,ungzip:vn,constants:_n};e.Deflate=hn,e.Inflate=pn,e.constants=_n,e.default=yn,e.deflate=Dn,e.deflateRaw=fn,e.gzip=mn,e.inflate=gn,e.inflateRaw=wn,e.ungzip=vn,Object.defineProperty(e,"__esModule",{value:!0})},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?h(exports):"function"==typeof define&&define.amd?define(["exports"],h):h((d="undefined"!=typeof globalThis?globalThis:d||self).pako={}),
i=(function(){function e(){_classCallCheck(this,e),console.log("WikiMirror public methods:",this)}return _createClass(e,[{key:"getRealText",value:function(e){return a.getRealText(e)}}]),e})(),window.WikiMirror=new i,Object.seal(window.WikiMirror),o="WikiMirror/unofficial (".concat(t.domain,"; opensource@wikimirror.org)"),ah.proxy({onError:function(e,t){-1!==["error","timeout"].indexOf(e.type)&&console.log("WikiMirror xhr error:",e),t.next(e)},onRequest:function(e,n){if(/^%5Bobject\+(ArrayBuffer|Blob|DataView|Document)%5D=$/.test(e.body)||(e=a.ahCallback_Request(e)),-1!==new URL(e.url,location.origin).host.indexOf(t.domain)){var r,i=null!==(r=e.headers["api-user-agent"])&&void 0!==r?r:e.headers["Api-User-Agent"];delete e.headers["Api-User-Agent"],e.headers["api-user-agent"]=i?"".concat(o," ").concat(i):o}n.next(e)},onResponse:function(e,t){var n,r=null!==(n=e.headers["content-type"])&&void 0!==n?n:e.headers["Content-Type"];r&&/json|text|xml/i.test(r)&&!/css|(ecma|java)script/i.test(r)&&(e=a.ahCallback_Response(e)),t.next(e)}}),u=window,s=u.fetch,window.fetch=function(e,n){return(r=r||_asyncToGenerator(_regeneratorRuntime().mark((function e(n,r){var i,u,l,c,d,h,D,f,m,p,g,w,v,_,y,F,b,k,C,E,x,A,z,B,R,S,T,O,L,M,j;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!==(i=r)&&void 0!==i?i:{},-1!==["[object Object]","[object String]","[object URL]"].indexOf(Object.prototype.toString.call(n))&&(n=a.ahCallback_Request({url:"object"===_typeof(n)?n.toString():n}).url),r.body&&-1!==["[object FormData]","[object String]","[object URLSearchParams]"].indexOf(Object.prototype.toString.call(r.body))&&(r.body=a.ahCallback_Request(r).body),"[object Request]"!==Object.prototype.toString.call(n)){e.next=22;break}if(c=(l=n).body,d=l.cache,h=l.credentials,D=l.headers,f=l.integrity,m=l.method,p=l.mode,g=l.redirect,w=l.referrer,v=l.referrerPolicy,_={body:c,cache:d,credentials:h,headers:D,integrity:f,method:m,mode:p,redirect:g,referrer:w,referrerPolicy:v},y=a.ahCallback_Request({url:n.url}),F=y.url,!/post/i.test(_.method)){e.next=20;break}if(-1===(E=null!==(k=null!==(C=_.headers.get("content-type"))&&void 0!==C?C:_.headers.get("Content-Type"))&&void 0!==k?k:"").indexOf("form-data")){e.next=15;break}return e.next=12,n.formData();case 12:b=e.sent,e.next=19;break;case 15:if(!/json|text|xml/i.test(E)||/css|(ecma|java)script/i.test(E)){e.next=19;break}return e.next=18,n.text();case 18:b=e.sent;case 19:if(b)try{JSON.parse("".concat(b)),_.body=a.ahCallback_Request({body:b}).body}catch(e){"string"==typeof b&&-1===b.indexOf("?")?_.body=a.getRealText(b):("string"==typeof(b=a.ahCallback_Request({body:b}).body)&&(b=b.replace(/^%3F/,"?")),_.body=null!==(x=b)&&void 0!==x?x:null)}case 20:r=_,n=F;case 22:return A=new URL(n,location.origin),-1!==A.host.indexOf(t.domain)&&(B=new Headers(r.headers),R=null!==(z=B.get("api-user-agent"))&&void 0!==z?z:B.get("Api-User-Agent"),B.delete("Api-User-Agent"),B.set("api-user-agent",R?"".concat(o," ").concat(R):o),r.headers=B),e.next=26,s(n,r).catch((function(e){console.log("WikiMirror fetch error:",{error:e,options:r,url:n})}));case 26:if(S=e.sent){e.next=29;break}return e.abrupt("return",new Response(void 0,{status:418}));case 29:if((T=null!==(u=S.headers.get("content-type"))&&void 0!==u?u:S.headers.get("Content-Type"))&&(!T||!/css|(ecma|java)script/i.test(T)&&/json|text|xml/i.test(T))){e.next=32;break}return e.abrupt("return",S);case 32:return O=S.headers,L=S.status,M=S.statusText,j={headers:O,status:L,statusText:M},e.t0=Response,e.t1=a,e.t2={url:n,options:r},e.t3=S,e.next=40,S.text();case 40:return e.t4=e.sent,e.t5={config:e.t2,originResponse:e.t3,response:e.t4},e.t6=e.t1.ahCallback_Response.call(e.t1,e.t5).response,e.t7=j,e.abrupt("return",new e.t0(e.t6,e.t7));case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=navigator,c=l.sendBeacon,navigator.sendBeacon=function(e,t){return"object"===_typeof(e)&&(e=e.toString()),!!/intake-(analytics|logging)/.test(e)||c(e,t)};case 17:case"end":return e.stop()}var d,h}),e,this)})))).apply(this,arguments)})()})();
})();
