"use strict";
(function(){
function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,u=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return u}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),u=new C(a||[]);return r(o,"_invoke",{value:F(e,n,u)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var D={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(E([])));g&&g!==t&&n.call(g,i)&&(m=g);var v=f.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function a(r,i,o,u){var s=c(e[r],e,i);if("throw"!==s.type){var l=s.arg,D=l.value;return D&&"object"==_typeof(D)&&n.call(D,"__await")?t.resolve(D.__await).then((function(e){a("next",e,o,u)}),(function(e){a("throw",e,o,u)})):t.resolve(D).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,u)}))}u(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function F(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return x()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var u=y(o,n);if(u){if(u===D)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===D)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function y(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),D;var a=c(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,D;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,D):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,u,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new _(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),s(v,u,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,D):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),D}},e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function asyncGeneratorStep(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,u,"next",e)}function u(e){asyncGeneratorStep(i,r,a,o,u,"throw",e)}o(void 0)}))}}
/**
 * WikiMirror - A Wikimedia Projects Reverse Proxy based on Nginx
 *
 * Copyright (c) 2019-present, 安忆.
 *
 * @author 安忆 <i@anyi.in>
 * @file wikimirror.js
 * @license GPL v3
 * @link <https://github.com/AnYiEE/nginx-wikimirror>
 */
!(function(){var e=(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,r,a,i,o,u,s,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new t(n={domain:"example.org",modules:{all:{ajaxLogin:{enable:!0,param:"init"},confirmLogout:{enable:!0},darkMode:{enable:!0,param:"normal"},showRedirect:{enable:!0}},body:{displayAnonHide:{enable:!0,param:!1}},dom:{},mw:{collapsibleSidebar:{enable:!0},scrollUpButton:{enable:!0},diffLink:{enable:!0},disableAnonEdit:{enable:!0}},standard:{}},regexps:{noDarkmode:/developer|techblog/,xtools_api:/xtools\.(wmcloud|wmflabs)\.org\/api\//i}}),e.next=4,r.init();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:
  /**
   * ajax-hook 2.1.3
   *
   * @license MIT
   * @link <https://github.com/wendux/ajax-hook/pull/103>
   */
  !(function(e,t){for(var n in t)e[n]=t[n]})(window,(function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)})([function(e,t,n){function r(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)};t.configEvent=r,t.hook=function(e,t){function n(t){return function(){var n=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],r=(e[t]||{}).getter;return r&&r(n,this)||n}}function u(t){return function(n){var a=this.xhr,i=this,o=e[t];if("on"===t.substring(0,2))i[t+"_"]=n,a[t]=function(o){o=r(o,i),e[t]&&e[t].call(i,a,o)||n.call(i,o)};else{var u=(o||{}).setter;n=u&&u(n,i)||n,this[t+"_"]=n;try{a[t]=n}catch(e){}}}}function s(t){return function(){var n=[].slice.call(arguments);if(e[t]){var r=e[t].call(this,n,this.xhr);if(r)return r}return this.xhr[t].apply(this.xhr,n)}}return(t=t||window)[i]=t[i]||t.XMLHttpRequest,t.XMLHttpRequest=function(){for(var e=new t[i],r=0;r<o.length;++r){var l="on"+o[r];void 0===e[l]&&(e[l]=null)}for(var c in e){var D="";try{D=a(e[c])}catch(e){}"function"===D?this[c]=s(c):Object.defineProperty(this,c,{get:n(c),set:u(c),enumerable:!0})}var d=this;e.getProxy=function(){return d},this.xhr=e},Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t[i]},t.unHook=function(e){(e=e||window)[i]&&(e.XMLHttpRequest=e[i]),e[i]=void 0};var i="__xhr",o=t.events=["load","loadend","timeout","error","readystatechange","abort"]},function(e,t,n){function r(e){return e.watcher||(e.watcher=document.createElement("a"))}function a(e,t){var n,a=e.getProxy(),i="on"+t+"_",o=(0,s.configEvent)({type:t},a);a[i]&&a[i](o),"function"==typeof Event?n=new Event(t,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(t,!1,!0),r(e).dispatchEvent(n)}function i(e){this.xhr=e,this.xhrProxy=e.getProxy()}function o(e){function t(e){i.call(this,e)}return t[m]=Object.create(i[m]),t[m].next=e,t}function u(e){return null!=e.response||""!==e.responseType&&"text"!==e.responseType?e.response:e.responseText}Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=function(e,t){if((t=t||window).__xhr)throw"Ajax is already hooked.";return(function(e,t){function n(e,t){var n=new g(e),r={response:u(t),status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce((function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=(function(e){return e.replace(/^\s+|\s+$/g,"")})(n.join(":")),e}),{})};if(!w)return n.resolve(r);w(r,n)}function i(e,t,n,r){var a=new v(e);n={config:e.config,error:n,type:r},_?_(n,a):a.next(n)}function o(){return!0}function l(e){return function(t,n){return i(t,this,n,e),!0}}function c(e,t){return 4===e.readyState&&0!==e.status?n(e,t):4!==e.readyState&&a(e,h),!0}var m=e.onRequest,w=e.onResponse,_=e.onError;return(0,s.hook)({onload:o,onloadend:o,onerror:l(d),ontimeout:l(D),onabort:l(f),onreadystatechange:function(e){return c(e,this)},open:function(e,t){var n=this,r=t.config={headers:{}};r.method=e[0],r.url=e[1],r.async=e[2],r.user=e[3],r.password=e[4],r.xhr=t;var a="on"+h;if(t[a]||(t[a]=function(){return c(t,n)}),m)return!0},send:function(e,t){var n=t.config;if(n.withCredentials=t.withCredentials,n.body=e[0],m){var r=function(){m(n,new p(t))};return!1===n.async?r():setTimeout(r),!0}},setRequestHeader:function(e,t){if(t.config.headers[e[0].toLowerCase()]=e[1],m)return!0},addEventListener:function(e,t){var n=this;if(-1!==s.events.indexOf(e[0])){var a=e[1];return r(t).addEventListener(e[0],(function(t){var r=(0,s.configEvent)(t,n);r.type=e[0],r.isTrusted=!0,a.call(n,r)})),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var a in n)r+=a+": "+n[a]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}},t)})(e,t)},t.unProxy=function(e){(0,s.unHook)(e)};var s=n(0),l=s.events[0],c=s.events[1],D=s.events[2],d=s.events[3],h=s.events[4],f=s.events[5],m="prototype";i[m]=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,a(n,h),a(n,l),a(n,c)},reject:function(e){this.xhrProxy.status=0,a(this.xhr,e.type),a(this.xhr,c)}});var p=o((function(e){var t=this.xhr;for(var n in e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)})),g=o((function(e){this.resolve(e)})),v=o((function(e){this.reject(e)}))},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ah=void 0;var r=n(0),a=n(1);t.ah={proxy:a.proxy,unProxy:a.unProxy,hook:r.hook,unHook:r.unHook}}])),
  /**
   * pako 2.1.0
   *
   * @license (MIT AND Zlib)
   * @link <https://github.com/nodeca/pako>
   */
  c=this,D=function(e){function t(e){for(var t=e.length;--t>=0;)e[t]=0}var n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);t(o);var u=new Array(60);t(u);var s=new Array(512);t(s);var l=new Array(256);t(l);var c=new Array(29);t(c);var D,d,h,f=new Array(30);function m(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function p(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(f);var g=function(e){return e<256?s[e]:s[256+(e>>>7)]},v=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},w=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},_=function(e,t,n){w(e,n[2*t],n[2*t+1])},F=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},y=function(e,t,n){var r,a,i=new Array(16),o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,i[r]=o;for(a=0;a<=t;a++){var u=e[2*a+1];0!==u&&(e[2*a]=F(i[u]++,u))}},b=function(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},k=function(e){e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},C=function(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},E=function(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&C(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!C(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},x=function(e,t,a){var i,o,u,s,D=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+D++],i+=(255&e.pending_buf[e.sym_buf+D++])<<8,o=e.pending_buf[e.sym_buf+D++],0===i?_(e,o,t):(u=l[o],_(e,u+256+1,t),0!==(s=n[u])&&(o-=c[u],w(e,o,s)),i--,u=g(i),_(e,u,a),0!==(s=r[u])&&(i-=f[u],w(e,i,s)))}while(D<e.sym_next);_(e,256,t)},A=function(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,s=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==i[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,u&&(e.static_len-=o[2*a+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)E(e,i,n);a=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],E(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,E(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],(function(e,t){var n,r,a,i,o,u,s=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,D=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=s[2*s[2*(r=e.heap[n])+1]+1]+1)>f&&(i=f,m++),s[2*r+1]=i,r>l||(e.bl_count[i]++,o=0,r>=h&&(o=d[r-h]),u=s[2*r],e.opt_len+=u*(i+o),D&&(e.static_len+=u*(c[2*r+1]+o)));if(0!==m){do{for(i=f-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(i=f;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>l||(s[2*a+1]!==i&&(e.opt_len+=(i-s[2*a+1])*s[2*a],s[2*a+1]=i),r--)}})(e,t),y(i,l,e.bl_count)},R=function(e,t,n){var r,a,i=-1,o=t[1],u=0,s=7,l=4;for(0===o&&(s=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++u<s&&a===o||(u<l?e.bl_tree[2*a]+=u:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):u<=10?e.bl_tree[34]++:e.bl_tree[36]++,u=0,i=a,0===o?(s=138,l=3):a===o?(s=6,l=3):(s=7,l=4))},z=function(e,t,n){var r,a,i=-1,o=t[1],u=0,s=7,l=4;for(0===o&&(s=138,l=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++u<s&&a===o)){if(u<l)do{_(e,a,e.bl_tree)}while(0!=--u);else 0!==a?(a!==i&&(_(e,a,e.bl_tree),u--),_(e,16,e.bl_tree),w(e,u-3,2)):u<=10?(_(e,17,e.bl_tree),w(e,u-3,3)):(_(e,18,e.bl_tree),w(e,u-11,7));u=0,i=a,0===o?(s=138,l=3):a===o?(s=6,l=3):(s=7,l=4)}},B=!1,O=function(e,t,n,r){w(e,0+(r?1:0),3),k(e),v(e,n),v(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},S=function(e){B||((function(){var e,t,i,p,g,v=new Array(16);for(i=0,p=0;p<28;p++)for(c[p]=i,e=0;e<1<<n[p];e++)l[i++]=p;for(l[i-1]=p,g=0,p=0;p<16;p++)for(f[p]=g,e=0;e<1<<r[p];e++)s[g++]=p;for(g>>=7;p<30;p++)for(f[p]=g<<7,e=0;e<1<<r[p]-7;e++)s[256+g++]=p;for(t=0;t<=15;t++)v[t]=0;for(e=0;e<=143;)o[2*e+1]=8,e++,v[8]++;for(;e<=255;)o[2*e+1]=9,e++,v[9]++;for(;e<=279;)o[2*e+1]=7,e++,v[7]++;for(;e<=287;)o[2*e+1]=8,e++,v[8]++;for(y(o,287,v),e=0;e<30;e++)u[2*e+1]=5,u[2*e]=F(e,5);D=new m(o,n,257,286,15),d=new m(u,r,0,30,15),h=new m(new Array(0),a,0,19,7)})(),B=!0),e.l_desc=new p(e.dyn_ltree,D),e.d_desc=new p(e.dyn_dtree,d),e.bl_desc=new p(e.bl_tree,h),e.bi_buf=0,e.bi_valid=0,b(e)},T=O,M=function(e,t,n,r){var a,s,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),A(e,e.l_desc),A(e,e.d_desc),l=(function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?O(e,t,n,r):4===e.strategy||s===a?(w(e,2+(r?1:0),3),x(e,o,u)):(w(e,4+(r?1:0),3),(function(e,t,n,r){var a;for(w(e,t-257,5),w(e,n-1,5),w(e,r-4,4),a=0;a<r;a++)w(e,e.bl_tree[2*i[a]+1],3);z(e,e.dyn_ltree,t-1),z(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),x(e,e.dyn_ltree,e.dyn_dtree)),b(e),r&&k(e)},L=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(l[n]+256+1)]++,e.dyn_dtree[2*g(t)]++),e.sym_next===e.sym_end},I=function(e){w(e,2,3),_(e,256,o),(function(e){16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},j=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},N=new Uint32Array((function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})()),U=function(e,t,n,r){var a=N,i=r+n;e^=-1;for(var o=r;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},P={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},q=S,Z=T,W=M,G=L,$=I,K=H.Z_NO_FLUSH,V=H.Z_PARTIAL_FLUSH,X=H.Z_FULL_FLUSH,Q=H.Z_FINISH,J=H.Z_BLOCK,Y=H.Z_OK,ee=H.Z_STREAM_END,te=H.Z_STREAM_ERROR,ne=H.Z_DATA_ERROR,re=H.Z_BUF_ERROR,ae=H.Z_DEFAULT_COMPRESSION,ie=H.Z_FILTERED,oe=H.Z_HUFFMAN_ONLY,ue=H.Z_RLE,se=H.Z_FIXED,le=H.Z_UNKNOWN,ce=H.Z_DEFLATED,De=258,de=262,he=42,fe=113,me=666,pe=function(e,t){return e.msg=P[t],t},ge=function(e){return 2*e-(e>4?9:0)},ve=function(e){for(var t=e.length;--t>=0;)e[t]=0},we=function(e){var t,n,r,a=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);r=t=a;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)},_e=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Fe=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ye=function(e,t){W(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Fe(e.strm)},be=function(e,t){e.pending_buf[e.pending++]=t},ke=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ce=function(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=j(e.adler,t,a,n):2===e.state.wrap&&(e.adler=U(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ee=function(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,u=e.nice_match,s=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,l=e.window,c=e.w_mask,D=e.prev,d=e.strstart+De,h=l[i+o-1],f=l[i+o];e.prev_length>=e.good_match&&(a>>=2),u>e.lookahead&&(u=e.lookahead);do{if(l[(n=t)+o]===f&&l[n+o-1]===h&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<d);if(r=De-(d-i),i=d-De,r>o){if(e.match_start=t,o=r,r>=u)break;h=l[i+o-1],f=l[i+o]}}}while((t=D[t&c])>s&&0!=--a);return o<=e.lookahead?o:e.lookahead},xe=function(e){var t,n,r,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-de)&&(e.window.set(e.window.subarray(a,a+a-n),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),we(e),n+=a),0===e.strm.avail_in)break;if(t=Ce(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=_e(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=_e(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<de&&0!==e.strm.avail_in)},Ae=function(e,t){var n,r,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,u=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&t!==Q||t===K||n!==r+e.strm.avail_in))break;o=t===Q&&n===r+e.strm.avail_in?1:0,Z(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Fe(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Ce(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return(u-=e.strm.avail_in)&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==K&&t!==Q&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Ce(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,i=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((r=e.strstart-e.block_start)>=i||(r||t===Q)&&t!==K&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,o=t===Q&&0===e.strm.avail_in&&n===r?1:0,Z(e,e.block_start,n,o),e.block_start+=n,Fe(e.strm)),o?3:1)},Re=function(e,t){for(var n,r;;){if(e.lookahead<de){if(xe(e),e.lookahead<de&&t===K)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-de&&(e.match_length=Ee(e,n)),e.match_length>=3)if(r=G(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=_e(e,e.ins_h,e.window[e.strstart+1]);else r=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Q?(ye(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ye(e,!1),0===e.strm.avail_out)?1:2},ze=function(e,t){for(var n,r,a;;){if(e.lookahead<de){if(xe(e),e.lookahead<de&&t===K)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-de&&(e.match_length=Ee(e,n),e.match_length<=5&&(e.strategy===ie||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=G(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ye(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=G(e,0,e.window[e.strstart-1]))&&ye(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=G(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Q?(ye(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ye(e,!1),0===e.strm.avail_out)?1:2};function Be(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}var Oe=[new Be(0,0,0,0,Ae),new Be(4,4,8,4,Re),new Be(4,5,16,8,Re),new Be(4,6,32,32,Re),new Be(4,4,16,16,ze),new Be(8,16,32,32,ze),new Be(8,16,128,128,ze),new Be(8,32,128,256,ze),new Be(32,128,258,1024,ze),new Be(32,258,258,4096,ze)];function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ce,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ve(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Te=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==he&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==fe&&t.status!==me?1:0},Me=function(e){if(Te(e))return pe(e,te);e.total_in=e.total_out=0,e.data_type=le;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?he:fe,e.adler=2===t.wrap?0:1,t.last_flush=-2,q(t),Y},Le=function(e){var t,n=Me(e);return n===Y&&((t=e.state).window_size=2*t.w_size,ve(t.head),t.max_lazy_match=Oe[t.level].max_lazy,t.good_match=Oe[t.level].good_length,t.nice_match=Oe[t.level].nice_length,t.max_chain_length=Oe[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},Ie=function(e,t,n,r,a,i){if(!e)return te;var o=1;if(t===ae&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>9||n!==ce||r<8||r>15||t<0||t>9||i<0||i>se||8===r&&1!==o)return pe(e,te);8===r&&(r=9);var u=new Se;return e.state=u,u.strm=e,u.status=he,u.wrap=o,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new Uint8Array(2*u.w_size),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=3*(u.lit_bufsize-1),u.level=t,u.strategy=i,u.method=n,Le(e)},je=Ie,Ne=function(e,t){return Te(e)||2!==e.state.wrap?te:(e.state.gzhead=t,Y)},Ue=function(e,t){if(Te(e)||t>J||t<0)return e?pe(e,te):te;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===me&&t!==Q)return pe(e,0===e.avail_out?re:te);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Fe(e),0===e.avail_out)return n.last_flush=-1,Y}else if(0===e.avail_in&&ge(t)<=ge(r)&&t!==Q)return pe(e,re);if(n.status===me&&0!==e.avail_in)return pe(e,re);if(n.status===he&&0===n.wrap&&(n.status=fe),n.status===he){var a=ce+(n.w_bits-8<<4)<<8;if(a|=(n.strategy>=oe||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),ke(n,a+=31-a%31),0!==n.strstart&&(ke(n,e.adler>>>16),ke(n,65535&e.adler)),e.adler=1,n.status=fe,Fe(e),0!==n.pending)return n.last_flush=-1,Y}if(57===n.status)if(e.adler=0,be(n,31),be(n,139),be(n,8),n.gzhead)be(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),be(n,255&n.gzhead.time),be(n,n.gzhead.time>>8&255),be(n,n.gzhead.time>>16&255),be(n,n.gzhead.time>>24&255),be(n,9===n.level?2:n.strategy>=oe||n.level<2?4:0),be(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(be(n,255&n.gzhead.extra.length),be(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=U(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(be(n,0),be(n,0),be(n,0),be(n,0),be(n,0),be(n,9===n.level?2:n.strategy>=oe||n.level<2?4:0),be(n,3),n.status=fe,Fe(e),0!==n.pending)return n.last_flush=-1,Y;if(69===n.status){if(n.gzhead.extra){for(var i=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var u=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+u),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=U(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=u,Fe(e),0!==n.pending)return n.last_flush=-1,Y;i=0,o-=u}var s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=U(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var l,c=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>c&&(e.adler=U(e.adler,n.pending_buf,n.pending-c,c)),Fe(e),0!==n.pending)return n.last_flush=-1,Y;c=0}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,be(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>c&&(e.adler=U(e.adler,n.pending_buf,n.pending-c,c)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var D,d=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>d&&(e.adler=U(e.adler,n.pending_buf,n.pending-d,d)),Fe(e),0!==n.pending)return n.last_flush=-1,Y;d=0}D=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,be(n,D)}while(0!==D);n.gzhead.hcrc&&n.pending>d&&(e.adler=U(e.adler,n.pending_buf,n.pending-d,d))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Fe(e),0!==n.pending))return n.last_flush=-1,Y;be(n,255&e.adler),be(n,e.adler>>8&255),e.adler=0}if(n.status=fe,Fe(e),0!==n.pending)return n.last_flush=-1,Y}if(0!==e.avail_in||0!==n.lookahead||t!==K&&n.status!==me){var h=0===n.level?Ae(n,t):n.strategy===oe?(function(e,t){for(var n;;){if(0===e.lookahead&&(xe(e),0===e.lookahead)){if(t===K)return 1;break}if(e.match_length=0,n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(ye(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ye(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ue?(function(e,t){for(var n,r,a,i,o=e.window;;){if(e.lookahead<=De){if(xe(e),e.lookahead<=De&&t===K)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=o[a=e.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){i=e.strstart+De;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=De-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=G(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(ye(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ye(e,!1),0===e.strm.avail_out)?1:2})(n,t):Oe[n.level].func(n,t);if(3!==h&&4!==h||(n.status=me),1===h||3===h)return 0===e.avail_out&&(n.last_flush=-1),Y;if(2===h&&(t===V?$(n):t!==J&&(Z(n,0,0,!1),t===X&&(ve(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Fe(e),0===e.avail_out))return n.last_flush=-1,Y}return t!==Q?Y:n.wrap<=0?ee:(2===n.wrap?(be(n,255&e.adler),be(n,e.adler>>8&255),be(n,e.adler>>16&255),be(n,e.adler>>24&255),be(n,255&e.total_in),be(n,e.total_in>>8&255),be(n,e.total_in>>16&255),be(n,e.total_in>>24&255)):(ke(n,e.adler>>>16),ke(n,65535&e.adler)),Fe(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Y:ee)},Pe=function(e){if(Te(e))return te;var t=e.state.status;return e.state=null,t===fe?pe(e,ne):Y},He=function(e,t){var n=t.length;if(Te(e))return te;var r=e.state,a=r.wrap;if(2===a||1===a&&r.status!==he||r.lookahead)return te;if(1===a&&(e.adler=j(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(ve(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size}var o=e.avail_in,u=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,xe(r);r.lookahead>=3;){var l=r.strstart,c=r.lookahead-2;do{r.ins_h=_e(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--c);r.strstart=l,r.lookahead=2,xe(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=s,e.avail_in=o,r.wrap=a,Y},qe=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ze=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=_typeof(n))throw new TypeError(n+"must be non-object");for(var r in n)qe(n,r)&&(e[r]=n[r])}}return e},We=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var a=new Uint8Array(t),i=0,o=0,u=e.length;i<u;i++){var s=e[i];a.set(s,o),o+=s.length}return a},Ge=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ge=!1}for(var $e=new Uint8Array(256),Ke=0;Ke<256;Ke++)$e[Ke]=Ke>=252?6:Ke>=248?5:Ke>=240?4:Ke>=224?3:Ke>=192?2:1;$e[254]=$e[254]=1;var Ve=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,a,i,o=e.length,u=0;for(a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(u),i=0,a=0;i<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},Xe=function(e,t){var n,r,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(r=0,n=0;n<a;){var o=e[n++];if(o<128)i[r++]=o;else{var u=$e[o];if(u>4)i[r++]=65533,n+=u-1;else{for(o&=2===u?31:3===u?15:7;u>1&&n<a;)o=o<<6|63&e[n++],u--;u>1?i[r++]=65533:o<65536?i[r++]=o:(o-=65536,i[r++]=55296|o>>10&1023,i[r++]=56320|1023&o)}}}return(function(e,t){if(t<65534&&e.subarray&&Ge)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,r)},Qe=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+$e[e[n]]>t?n:t},Je=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ye=Object.prototype.toString,et=H.Z_NO_FLUSH,tt=H.Z_SYNC_FLUSH,nt=H.Z_FULL_FLUSH,rt=H.Z_FINISH,at=H.Z_OK,it=H.Z_STREAM_END,ot=H.Z_DEFAULT_COMPRESSION,ut=H.Z_DEFAULT_STRATEGY,st=H.Z_DEFLATED;function lt(e){this.options=Ze({level:ot,method:st,chunkSize:16384,windowBits:15,memLevel:8,strategy:ut},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Je,this.strm.avail_out=0;var n=je(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==at)throw new Error(P[n]);if(t.header&&Ne(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Ve(t.dictionary):"[object ArrayBuffer]"===Ye.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=He(this.strm,r))!==at)throw new Error(P[n]);this._dict_set=!0}}function ct(e,t){var n=new lt(t);if(n.push(e,!0),n.err)throw n.msg||P[n.err];return n.result}lt.prototype.push=function(e,t){var n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?rt:et,"string"==typeof e?a.input=Ve(e):"[object ArrayBuffer]"===Ye.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(r===tt||r===nt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=Ue(a,r))===it)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Pe(this.strm),this.onEnd(n),this.ended=!0,n===at;if(0!==a.avail_out){if(r>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},lt.prototype.onData=function(e){this.chunks.push(e)},lt.prototype.onEnd=function(e){e===at&&(this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Dt=lt,dt=ct,ht=function(e,t){return(t=t||{}).raw=!0,ct(e,t)},ft=function(e,t){return(t=t||{}).gzip=!0,ct(e,t)},mt=16209,pt=function(e,t){var n,r,a,i,o,u,s,l,c,D,d,h,f,m,p,g,v,w,_,F,y,b,k,C,E=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),a=e.next_out,C=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),u=E.dmax,s=E.wsize,l=E.whave,c=E.wnext,D=E.window,d=E.hold,h=E.bits,f=E.lencode,m=E.distcode,p=(1<<E.lenbits)-1,g=(1<<E.distbits)-1;e:do{h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),v=f[d&p];t:for(;;){if(d>>>=w=v>>>24,h-=w,0==(w=v>>>16&255))C[a++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=f[(65535&v)+(d&(1<<w)-1)];continue t}if(32&w){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=mt;break e}_=65535&v,(w&=15)&&(h<w&&(d+=k[n++]<<h,h+=8),_+=d&(1<<w)-1,d>>>=w,h-=w),h<15&&(d+=k[n++]<<h,h+=8,d+=k[n++]<<h,h+=8),v=m[d&g];n:for(;;){if(d>>>=w=v>>>24,h-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=m[(65535&v)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",E.mode=mt;break e}if(F=65535&v,h<(w&=15)&&(d+=k[n++]<<h,(h+=8)<w&&(d+=k[n++]<<h,h+=8)),(F+=d&(1<<w)-1)>u){e.msg="invalid distance too far back",E.mode=mt;break e}if(d>>>=w,h-=w,F>(w=a-i)){if((w=F-w)>l&&E.sane){e.msg="invalid distance too far back",E.mode=mt;break e}if(y=0,b=D,0===c){if(y+=s-w,w<_){_-=w;do{C[a++]=D[y++]}while(--w);y=a-F,b=C}}else if(c<w){if(y+=s+c-w,(w-=c)<_){_-=w;do{C[a++]=D[y++]}while(--w);if(y=0,c<_){_-=w=c;do{C[a++]=D[y++]}while(--w);y=a-F,b=C}}}else if(y+=c-w,w<_){_-=w;do{C[a++]=D[y++]}while(--w);y=a-F,b=C}for(;_>2;)C[a++]=b[y++],C[a++]=b[y++],C[a++]=b[y++],_-=3;_&&(C[a++]=b[y++],_>1&&(C[a++]=b[y++]))}else{y=a-F;do{C[a++]=C[y++],C[a++]=C[y++],C[a++]=C[y++],_-=3}while(_>2);_&&(C[a++]=C[y++],_>1&&(C[a++]=C[y++]))}break}}break}}while(n<r&&a<o);n-=_=h>>3,d&=(1<<(h-=_<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<o?o-a+257:257-(a-o),E.hold=d,E.bits=h},gt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_t=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ft=function(e,t,n,r,a,i,o,u){var s,l,c,D,d,h,f,m,p,g=u.bits,v=0,w=0,_=0,F=0,y=0,b=0,k=0,C=0,E=0,x=0,A=null,R=new Uint16Array(16),z=new Uint16Array(16),B=null;for(v=0;v<=15;v++)R[v]=0;for(w=0;w<r;w++)R[t[n+w]]++;for(y=g,F=15;F>=1&&0===R[F];F--);if(y>F&&(y=F),0===F)return a[i++]=20971520,a[i++]=20971520,u.bits=1,0;for(_=1;_<F&&0===R[_];_++);for(y<_&&(y=_),C=1,v=1;v<=15;v++)if(C<<=1,(C-=R[v])<0)return-1;if(C>0&&(0===e||1!==F))return-1;for(z[1]=0,v=1;v<15;v++)z[v+1]=z[v]+R[v];for(w=0;w<r;w++)0!==t[n+w]&&(o[z[t[n+w]]++]=w);if(0===e?(A=B=o,h=20):1===e?(A=gt,B=vt,h=257):(A=wt,B=_t,h=0),x=0,w=0,v=_,d=i,b=y,k=0,c=-1,D=(E=1<<y)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){f=v-k,o[w]+1<h?(m=0,p=o[w]):o[w]>=h?(m=B[o[w]-h],p=A[o[w]-h]):(m=96,p=0),s=1<<v-k,_=l=1<<b;do{a[d+(x>>k)+(l-=s)]=f<<24|m<<16|p|0}while(0!==l);for(s=1<<v-1;x&s;)s>>=1;if(0!==s?(x&=s-1,x+=s):x=0,w++,0==--R[v]){if(v===F)break;v=t[n+o[w]]}if(v>y&&(x&D)!==c){for(0===k&&(k=y),d+=_,C=1<<(b=v-k);b+k<F&&!((C-=R[b+k])<=0);)b++,C<<=1;if(E+=1<<b,1===e&&E>852||2===e&&E>592)return 1;a[c=x&D]=y<<24|b<<16|d-i|0}}return 0!==x&&(a[d+x]=v-k<<24|64<<16|0),u.bits=y,0},yt=H.Z_FINISH,bt=H.Z_BLOCK,kt=H.Z_TREES,Ct=H.Z_OK,Et=H.Z_STREAM_END,xt=H.Z_NEED_DICT,At=H.Z_STREAM_ERROR,Rt=H.Z_DATA_ERROR,zt=H.Z_MEM_ERROR,Bt=H.Z_BUF_ERROR,Ot=H.Z_DEFLATED,St=16180,Tt=16190,Mt=16191,Lt=16192,It=16194,jt=16199,Nt=16200,Ut=16206,Pt=16209,Ht=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function qt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Zt,Wt,Gt=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<St||t.mode>16211?1:0},$t=function(e){if(Gt(e))return At;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=St,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ct},Kt=function(e){if(Gt(e))return At;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$t(e)},Vt=function(e,t){var n;if(Gt(e))return At;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?At:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Kt(e))},Xt=function(e,t){if(!e)return At;var n=new qt;e.state=n,n.strm=e,n.window=null,n.mode=St;var r=Vt(e,t);return r!==Ct&&(e.state=null),r},Qt=!0,Jt=function(e){if(Qt){Zt=new Int32Array(512),Wt=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ft(1,e.lens,0,288,Zt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ft(2,e.lens,0,32,Wt,0,e.work,{bits:5}),Qt=!1}e.lencode=Zt,e.lenbits=9,e.distcode=Wt,e.distbits=5},Yt=function(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},en=Kt,tn=Xt,nn=function(e,t){var n,r,a,i,o,u,s,l,c,D,d,h,f,m,p,g,v,w,_,F,y,b,k,C,E=0,x=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gt(e)||!e.output||!e.input&&0!==e.avail_in)return At;(n=e.state).mode===Mt&&(n.mode=Lt),o=e.next_out,a=e.output,s=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,l=n.hold,c=n.bits,D=u,d=s,b=Ct;e:for(;;)switch(n.mode){case St:if(0===n.wrap){n.mode=Lt;break}for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0),l=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=Pt;break}if((15&l)!==Ot){e.msg="unknown compression method",n.mode=Pt;break}if(c-=4,y=8+(15&(l>>>=4)),0===n.wbits&&(n.wbits=y),y>15||y>n.wbits){e.msg="invalid window size",n.mode=Pt;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:Mt,l=0,c=0;break;case 16181:for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==Ot){e.msg="unknown compression method",n.mode=Pt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Pt;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,n.check=U(n.check,x,4,0)),l=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(x[0]=255&l,x[1]=l>>>8&255,n.check=U(n.check,x,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((h=n.length)>u&&(h=u),h&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+h),y)),512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,h,i)),u-=h,i+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===u)break e;h=0;do{y=r[i+h++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y))}while(y&&h<u);if(512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,h,i)),u-=h,i+=h,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===u)break e;h=0;do{y=r[i+h++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y))}while(y&&h<u);if(512&n.flags&&4&n.wrap&&(n.check=U(n.check,r,h,i)),u-=h,i+=h,y)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Pt;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Mt;break;case 16189:for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}e.adler=n.check=Ht(l),l=0,c=0,n.mode=Tt;case Tt:if(0===n.havedict)return e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,xt;e.adler=n.check=1,n.mode=Mt;case Mt:if(t===bt||t===kt)break e;case Lt:if(n.last){l>>>=7&c,c-=7&c,n.mode=Ut;break}for(;c<3;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}switch(n.last=1&l,c-=1,3&(l>>>=1)){case 0:n.mode=16193;break;case 1:if(Jt(n),n.mode=jt,t===kt){l>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Pt}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Pt;break}if(n.length=65535&l,l=0,c=0,n.mode=It,t===kt)break e;case It:n.mode=16195;case 16195:if(h=n.length){if(h>u&&(h=u),h>s&&(h=s),0===h)break e;a.set(r.subarray(i,i+h),o),u-=h,i+=h,s-=h,o+=h,n.length-=h;break}n.mode=Mt;break;case 16196:for(;c<14;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Pt;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.lens[A[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},b=Ft(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid code lengths set",n.mode=Pt;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;g=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(v<16)l>>>=p,c-=p,n.lens[n.have++]=v;else{if(16===v){for(C=p+2;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(l>>>=p,c-=p,0===n.have){e.msg="invalid bit length repeat",n.mode=Pt;break}y=n.lens[n.have-1],h=3+(3&l),l>>>=2,c-=2}else if(17===v){for(C=p+3;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}c-=p,y=0,h=3+(7&(l>>>=p)),l>>>=3,c-=3}else{for(C=p+7;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}c-=p,y=0,h=11+(127&(l>>>=p)),l>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Pt;break}for(;h--;)n.lens[n.have++]=y}}if(n.mode===Pt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Pt;break}if(n.lenbits=9,k={bits:n.lenbits},b=Ft(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid literal/lengths set",n.mode=Pt;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},b=Ft(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,b){e.msg="invalid distances set",n.mode=Pt;break}if(n.mode=jt,t===kt)break e;case jt:n.mode=Nt;case Nt:if(u>=6&&s>=258){e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,pt(e,d),o=e.next_out,a=e.output,s=e.avail_out,i=e.next_in,r=e.input,u=e.avail_in,l=n.hold,c=n.bits,n.mode===Mt&&(n.back=-1);break}for(n.back=0;g=(E=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(g&&0==(240&g)){for(w=p,_=g,F=v;g=(E=n.lencode[F+((l&(1<<w+_)-1)>>w)])>>>16&255,v=65535&E,!(w+(p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=p,c-=p,n.back+=p,n.length=v,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=Mt;break}if(64&g){e.msg="invalid literal/length code",n.mode=Pt;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;g=(E=n.distcode[l&(1<<n.distbits)-1])>>>16&255,v=65535&E,!((p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(0==(240&g)){for(w=p,_=g,F=v;g=(E=n.distcode[F+((l&(1<<w+_)-1)>>w)])>>>16&255,v=65535&E,!(w+(p=E>>>24)<=c);){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=p,c-=p,n.back+=p,64&g){e.msg="invalid distance code",n.mode=Pt;break}n.offset=v,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;c<C;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Pt;break}n.mode=16204;case 16204:if(0===s)break e;if(h=d-s,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Pt;break}h>n.wnext?(h-=n.wnext,f=n.wsize-h):f=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=a,f=o-n.offset,h=n.length;h>s&&(h=s),s-=h,n.length-=h;do{a[o++]=m[f++]}while(--h);0===n.length&&(n.mode=Nt);break;case 16205:if(0===s)break e;a[o++]=n.length,s--,n.mode=Nt;break;case Ut:if(n.wrap){for(;c<32;){if(0===u)break e;u--,l|=r[i++]<<c,c+=8}if(d-=s,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?U(n.check,a,d,o-d):j(n.check,a,d,o-d)),d=s,4&n.wrap&&(n.flags?l:Ht(l))!==n.check){e.msg="incorrect data check",n.mode=Pt;break}l=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===u)break e;u--,l+=r[i++]<<c,c+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Pt;break}l=0,c=0}n.mode=16208;case 16208:b=Et;break e;case Pt:b=Rt;break e;case 16210:return zt;default:return At}return e.next_out=o,e.avail_out=s,e.next_in=i,e.avail_in=u,n.hold=l,n.bits=c,(n.wsize||d!==e.avail_out&&n.mode<Pt&&(n.mode<Ut||t!==yt))&&Yt(e,e.output,e.next_out,d-e.avail_out),D-=e.avail_in,d-=e.avail_out,e.total_in+=D,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?U(n.check,a,d,e.next_out-d):j(n.check,a,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Mt?128:0)+(n.mode===jt||n.mode===It?256:0),(0===D&&0===d||t===yt)&&b===Ct&&(b=Bt),b},rn=function(e){if(Gt(e))return At;var t=e.state;return t.window&&(t.window=null),e.state=null,Ct},an=function(e,t){if(Gt(e))return At;var n=e.state;return 0==(2&n.wrap)?At:(n.head=t,t.done=!1,Ct)},on=function(e,t){var n,r=t.length;return Gt(e)||0!==(n=e.state).wrap&&n.mode!==Tt?At:n.mode===Tt&&j(1,t,r,0)!==n.check?Rt:Yt(e,t,r,r)?(n.mode=16210,zt):(n.havedict=1,Ct)},un=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},sn=Object.prototype.toString,ln=H.Z_NO_FLUSH,cn=H.Z_FINISH,Dn=H.Z_OK,dn=H.Z_STREAM_END,hn=H.Z_NEED_DICT,fn=H.Z_STREAM_ERROR,mn=H.Z_DATA_ERROR,pn=H.Z_MEM_ERROR;function gn(e){this.options=Ze({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Je,this.strm.avail_out=0;var n=tn(this.strm,t.windowBits);if(n!==Dn)throw new Error(P[n]);if(this.header=new un,an(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ve(t.dictionary):"[object ArrayBuffer]"===sn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=on(this.strm,t.dictionary))!==Dn))throw new Error(P[n])}function vn(e,t){var n=new gn(t);if(n.push(e),n.err)throw n.msg||P[n.err];return n.result}gn.prototype.push=function(e,t){var n,r,a,i=this.strm,o=this.options.chunkSize,u=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?cn:ln,"[object ArrayBuffer]"===sn.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n=nn(i,r))===hn&&u&&((n=on(i,u))===Dn?n=nn(i,r):n===mn&&(n=hn));i.avail_in>0&&n===dn&&i.state.wrap>0&&0!==e[i.next_in];)en(i),n=nn(i,r);switch(n){case fn:case mn:case hn:case pn:return this.onEnd(n),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||n===dn))if("string"===this.options.to){var s=Qe(i.output,i.next_out),l=i.next_out-s,c=Xe(i.output,s);i.next_out=l,i.avail_out=o-l,l&&i.output.set(i.output.subarray(s,s+l),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==Dn||0!==a){if(n===dn)return n=rn(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},gn.prototype.onData=function(e){this.chunks.push(e)},gn.prototype.onEnd=function(e){e===Dn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var wn=function(e,t){return(t=t||{}).raw=!0,vn(e,t)},_n=Dt,Fn=dt,yn=ht,bn=ft,kn=gn,Cn=vn,En=wn,xn=vn,An=H,Rn={Deflate:_n,deflate:Fn,deflateRaw:yn,gzip:bn,Inflate:kn,inflate:Cn,inflateRaw:En,ungzip:xn,constants:An};e.Deflate=_n,e.Inflate=kn,e.constants=An,e.default=Rn,e.deflate=Fn,e.deflateRaw=yn,e.gzip=bn,e.inflate=Cn,e.inflateRaw=En,e.ungzip=xn,Object.defineProperty(e,"__esModule",{value:!0})},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?D(exports):"function"==typeof define&&define.amd?define(["exports"],D):D((c="undefined"!=typeof globalThis?globalThis:c||self).pako={}),
a=(function(){function e(){_classCallCheck(this,e),console.log("WikiMirror public methods:",this)}return _createClass(e,[{key:"getRealText",value:function(e){return r.getRealText(e)}}]),e})(),window.WikiMirror=new a,Object.seal(window.WikiMirror),i="WikiMirror/unofficial (".concat(n.domain,"; opensource@wikimirror.org)"),ah.proxy({onError:function(e,t){-1!==["error","timeout"].indexOf(e.type)&&console.log("WikiMirror xhr error:",e),t.next(e)},onRequest:function(e,t){if(/^%5Bobject\+(ArrayBuffer|Blob|DataView|Document)%5D=$/.test(e.body)||(e=r.ahCallback_Request(e)),-1!==new URL(e.url,location.origin).host.indexOf(n.domain)){var a,o=null!==(a=e.headers["api-user-agent"])&&void 0!==a?a:e.headers["Api-User-Agent"];delete e.headers["Api-User-Agent"],e.headers["api-user-agent"]=o?"".concat(i," ").concat(o):i}t.next(e)},onResponse:function(e,t){var n,a=null!==(n=e.headers["content-type"])&&void 0!==n?n:e.headers["Content-Type"];a&&/json|text|xml/i.test(a)&&!/css|(ecma|java)script/i.test(a)&&(e=r.ahCallback_Response(e)),t.next(e)}}),o=window,u=o.fetch,window.fetch=(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,a){var o,s,l,c,D,d,h,f,m,p,g,v,w,_,F,y,b,k,C,E,x,A,R,z,B,O,S,T,M,L;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!==(o=a)&&void 0!==o?o:{},-1!==["[object Object]","[object String]","[object URL]"].indexOf(Object.prototype.toString.call(t))&&(t=r.ahCallback_Request({url:"object"===_typeof(t)?t.toString():t}).url),a.body&&-1!==["[object FormData]","[object String]","[object URLSearchParams]"].indexOf(Object.prototype.toString.call(a.body))&&(a.body=r.ahCallback_Request(a).body),"[object Request]"!==Object.prototype.toString.call(t)){e.next=22;break}if(c=(l=t).body,D=l.cache,d=l.credentials,h=l.headers,f=l.integrity,m=l.method,p=l.mode,g=l.redirect,v=l.referrer,w=l.referrerPolicy,_={body:c,cache:D,credentials:d,integrity:f,headers:h,method:m,mode:p,redirect:g,referrer:v,referrerPolicy:w},F=r.ahCallback_Request({url:t.url}).url,!/post/i.test(_.method)){e.next=20;break}if(-1===(C=null!==(b=null!==(k=_.headers.get("content-type"))&&void 0!==k?k:_.headers.get("Content-Type"))&&void 0!==b?b:"").indexOf("form-data")){e.next=15;break}return e.next=12,t.formData();case 12:y=e.sent,e.next=19;break;case 15:if(!/json|text|xml/i.test(C)||/css|(ecma|java)script/i.test(C)){e.next=19;break}return e.next=18,t.text();case 18:y=e.sent;case 19:if(y)try{JSON.parse("".concat(y)),_.body=r.ahCallback_Request({body:y}).body}catch(e){"string"==typeof y&&-1===y.indexOf("?")?_.body=r.getRealText(y):("string"==typeof(y=r.ahCallback_Request({body:y}).body)&&(y=y.replace(/^%3F/,"?")),_.body=null!==(E=y)&&void 0!==E?E:null)}case 20:a=_,t=F;case 22:return-1!==new URL(t,location.origin).host.indexOf(n.domain)&&(A=new Headers(a.headers),R=null!==(x=A.get("api-user-agent"))&&void 0!==x?x:A.get("Api-User-Agent"),A.delete("Api-User-Agent"),A.set("api-user-agent",R?"".concat(i," ").concat(R):i),a.headers=A),z=!1,e.next=27,u(t,a).catch((function(e){z=!0,console.log("WikiMirror fetch error:",{error:e,options:a,url:t})}));case 27:if(B=e.sent,!z&&B){e.next=30;break}return e.abrupt("return",new Response(void 0,{status:418}));case 30:if((O=null!==(s=B.headers.get("content-type"))&&void 0!==s?s:B.headers.get("Content-Type"))&&(!O||!/css|(ecma|java)script/i.test(O)&&/json|text|xml/i.test(O))){e.next=33;break}return e.abrupt("return",B);case 33:return S=B.headers,T=B.status,M=B.statusText,L={headers:S,status:T,statusText:M},e.t0=Response,e.t1=r,e.t2={url:t,options:a},e.t3=B,e.next=41,B.text();case 41:return e.t4=e.sent,e.t5={config:e.t2,originResponse:e.t3,response:e.t4},e.t6=e.t1.ahCallback_Response.call(e.t1,e.t5).response,e.t7=L,e.abrupt("return",new e.t0(e.t6,e.t7));case 46:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}})(),s=navigator,l=s.sendBeacon,navigator.sendBeacon=function(e,t){return"object"===_typeof(e)&&(e=e.toString()),!!/intake-(analytics|logging)/.test(e)||l(e,t)};case 18:case"end":return e.stop()}var c,D}),e,this)})));return function(){return e.apply(this,arguments)}})(),t=(function(){function e(t){var n=t.domain,r=t.modules,a=t.regexps;_classCallCheck(this,e),_defineProperty(this,"MIRROR_DOMAIN",void 0),_defineProperty(this,"MIRROR_DOMAIN_REGEX",void 0),_defineProperty(this,"MIRROR_DOMAIN_SPLIT",void 0),_defineProperty(this,"modules",void 0),_defineProperty(this,"regexps",void 0),_defineProperty(this,"messages",void 0),_defineProperty(this,"textCache",void 0),this.MIRROR_DOMAIN=n,this.MIRROR_DOMAIN_REGEX=n.replace(".","\\."),this.MIRROR_DOMAIN_SPLIT=n.split("."),this.modules=r,this.regexps=a,this.messages=this.initMessages(),this.textCache=new Map}var t,n,r,a,i;return _createClass(e,[{key:"getRealText",value:function(e,t){var n=this;if(-1===["wiki","wikiless"].indexOf(t)&&this.textCache.has(e))return this.textCache.get(e);var r,a,i=e,o=new RegExp(this.MIRROR_DOMAIN_REGEX,"gi"),u=new RegExp("(wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki|planet)\\.".concat(this.MIRROR_DOMAIN_REGEX),"gi"),s=new RegExp("latex-(png|svg)\\.".concat(this.MIRROR_DOMAIN_REGEX),"gi"),l=new RegExp("\\\\\\.wikipedia\\\\\\.\\(\\?:".concat(this.MIRROR_DOMAIN_SPLIT[0],"\\\\\\.\\)\\?").concat(this.MIRROR_DOMAIN_SPLIT[1]),"g"),c=/background(-image)?:url\(('|")?(https?:)?\/\/upload\.wikimedia\.org/gi,D=
  /**
   * emoji-regex 10.2.1
   *
   * @license MIT
   * @link <https://github.com/mathiasbynens/emoji-regex>
   */
  /[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,
d=document.querySelectorAll("".concat("wikiless"===t?"body,body *":this.hasClass("diff","table")?".mw-parser-output,.mw-parser-output *":".mw-body,.mw-body *")),h=document.querySelector("#wpTextbox1");-1!==["wiki","wikiless"].indexOf(t)&&((function(){if(d&&(!(n.hasClass("mw-special-AbuseFilter")||n.hasClass("mw-special-EditWatchlist")||n.hasClass("mw-special-Search"))||!("object"===("undefined"==typeof WikiMirror?"undefined":_typeof(WikiMirror))&&("function"==typeof WikiMirror.getRealText&&("number"==typeof WikiMirror.getRealText.initCount&&WikiMirror.getRealText.initCount<1||void 0===WikiMirror.getRealText.initCount)||void 0===WikiMirror.getRealText)||void 0===WikiMirror)||n.hasClass("action-history"))){var e,t=[],r=_createForOfIteratorHelper(d);try{for(r.s();!(e=r.n()).done;){var a,i=_createForOfIteratorHelper(e.value.childNodes);try{for(i.s();!(a=i.n()).done;){var u=a.value;3===u.nodeType&&t.push(u)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}for(var s=0,h=t;s<h.length;s++){var f,m=h[s],p=null!==(f=m.nodeValue)&&void 0!==f?f:"";if(p.trim()&&((p.match(o)||p.match(l))&&(p=n.getRealText(p)),p.match(c)&&n.hasClass("action-view")&&(p=p.replace(c,"background$1:url($2$3//upload.".concat(n.MIRROR_DOMAIN))),m.nodeValue!==p&&(m.nodeValue=p),p.match(D)&&!n.hasClass("action-edit")&&!n.hasClass("action-submit")&&("object"===("undefined"==typeof WikiMirror?"undefined":_typeof(WikiMirror))&&("function"==typeof WikiMirror.getRealText&&("number"==typeof WikiMirror.getRealText.initCount&&WikiMirror.getRealText.initCount<1||void 0===WikiMirror.getRealText.initCount)||void 0===WikiMirror.getRealText)||void 0===WikiMirror))){var g=document.createElement("wikimirror-emoji-line");g.innerHTML=m.nodeValue.replace(D,'<wikimirror-emoji class="mw-no-invert">$&</wikimirror-emoji>'),m.parentNode&&(m.parentNode.insertBefore(g,m.nextSibling),m.remove())}}for(var v=0,w=[].concat(_toConsumableArray(document.querySelectorAll('a[href*="//archive."]')),_toConsumableArray(document.querySelectorAll('a[href*="//pageviews."]')),_toConsumableArray(document.querySelectorAll('a[href*="//xtools."]')));v<w.length;v++){var _=w[v],F=_.href;F.match(o)&&(_.href=n.getRealText(F)),n.regexps.xtools_api.test(F)&&(_.href=F.replace(n.regexps.xtools_api,"xtools-api.".concat(n.MIRROR_DOMAIN,"/")))}for(var y=0,b=[].concat(_toConsumableArray(document.querySelectorAll('input[name="clientUrl"]')),_toConsumableArray(document.querySelectorAll('input[name="intendedWikitext"]')));y<b.length;y++){var k=b[y],C=k.value;C.match(o)&&(k.value=n.getRealText(C))}var E=document.querySelector("#ca-fileExporter a");if(E){var x,A=E.href,R=null===(x=A.match(/clientUrl=(\S+?)&/))||void 0===x?void 0:x[1];R&&(E.href=A.replace(R,n.getRealText(R)))}}})(),"wiki"===t&&h&&(null!==(r=window.wikEd)&&void 0!==r&&r.useWikEd&&wikEd.UpdateTextarea(),e="function"==typeof jQuery?jQuery("#wpTextbox1").val():h.value));if("string"==typeof e&&!e.trim()||"string"!=typeof e)return this.textCache.set(i,e),e;if("emoji"===t)return e=e.match(D)?e.replace(D,'<wikimirror-emoji class="mw-no-invert">$&</wikimirror-emoji>'):e,this.textCache.set(i,e),e;(this.textCache.has(e)?(i=e,e=this.textCache.get(i)):e=e.replace(new RegExp("phab\\.".concat(this.MIRROR_DOMAIN),"gi"),"phab.wmfusercontent.org").replace(new RegExp("xtools-api\\.".concat(this.MIRROR_DOMAIN,"\\/"),"gi"),"xtools.wmcloud.org/api/").replace(new RegExp("wma\\.".concat(this.MIRROR_DOMAIN_REGEX),"gi"),"wma.wmcloud.org").replace(new RegExp("recommend\\.".concat(this.MIRROR_DOMAIN_REGEX),"gi"),"recommend.wmflabs.org").replace(s,"wikimedia.org/api/rest_v1/media/math/render/$1").replace(u,"$1.org").replace(o,"wikimedia.org").replace(l,"\\.wikipedia\\.org").replace(/r-e-p-l-a-c-e\.org/g,this.MIRROR_DOMAIN),"wiki"===t&&h)&&("function"==typeof jQuery?jQuery("#wpTextbox1").val(e):h.value=e,null!==(a=window.wikEd)&&void 0!==a&&a.useWikEd&&wikEd.UpdateFrame());return this.textCache.set(i,e),e}},{key:"init",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=_slicedToArray(n[t],2),i=a[0],o=a[1],u=o.enable,s=o.param;r.isValidKey(i,r)&&u&&r[i](s)}})(this.modules.standard),!1===this.regexps.noDarkmode.test(location.host)&&this.darkMode("check")&&(document.documentElement.style.filter="invert(.95) hue-rotate(.5turn)"),this.setCss("/wikimirror.css?date=20230505","url").then((function(){console.log("WikiMirror basic stylesheet load succeeded.")})).catch((function(){console.log("WikiMirror basic stylesheet load failed.")})),e.next=6,this.bodyReady();case 6:return n=e.sent,t(this.modules.body),n?(this.darkMode("init"),console.log("WikiMirror basic methods load succeeded.")):(!1===this.regexps.noDarkmode.test(location.host)&&this.darkMode("init"),console.log("WikiMirror non-wiki mode.")),this.domReady().then((function(){if(t(r.modules.dom),window.addEventListener("beforeprint",(function(){r.darkMode("meta","color-scheme","remove");var e,t=_createForOfIteratorHelper(document.querySelectorAll("a"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.href=r.getRealText(n.href)}}catch(e){t.e(e)}finally{t.f()}})),window.addEventListener("afterprint",(function(){location.reload()})),n){var e=document.querySelector("#wpSave"),a=new MutationObserver((function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a,i=_createForOfIteratorHelper(t.value.addedNodes);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o instanceof HTMLElement){var u,s=_createForOfIteratorHelper(o.querySelectorAll(".ext-related-articles-card-list h3 a"));try{for(s.s();!(u=s.n()).done;){var l=u.value;l.innerHTML=r.getRealText(l.innerHTML,"emoji")}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}}));r.getRealText(void 0,"wiki"),null==e||e.addEventListener("click",(function t(n){n.preventDefault(),r.getRealText(void 0,"wiki"),null==e||e.removeEventListener("click",t),null==e||e.click()})),r.getConf("wgUserName")||null==e||e.removeAttribute("accesskey"),a.observe(document.body,{childList:!0,subtree:!0});var i=document.querySelector(".cx-skin-menu-content-list"),o=document.querySelector("#footer-places-statslink a")||document.querySelector("#statslink a");i&&(i.id="p-tb"),o&&(o.href=r.getRealText(o.href))}else{var u;window.portalSearchDomain&&(window.portalSearchDomain=window.portalSearchDomain.replace(/org$/,r.MIRROR_DOMAIN)),null===(u=document.querySelector(".pure-form#search-form"))||void 0===u||u.action.replace(/org\//,r.MIRROR_DOMAIN),r.getRealText(void 0,"wikiless")}})),n&&this.mwReady().then(_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("WikiMirror dependencies load succeeded."),r.messages=r.initMessages(),t(r.modules.mw),document.addEventListener("copy",(function(e){var t,n,a,i=null!==(t=null===(n=getSelection())||void 0===n?void 0:n.toString())&&void 0!==t?t:"";new RegExp(r.MIRROR_DOMAIN_REGEX,"gi").test(i)&&(e.preventDefault(),i=r.getRealText(i),null===(a=e.clipboardData)||void 0===a||a.setData("text/plain",i))})),WikiMirror.getRealText.initCount=0,WikiMirror.getRealText.isAceInit=!1,mw.hook("codeEditor.configure").add((function(e){var t;WikiMirror.getRealText.isAceInit||(WikiMirror.getRealText.isAceInit=!0,null===(t=document.querySelector("#wpSave"))||void 0===t||t.addEventListener("click",(function(){e.setValue(r.getRealText(e.getValue()))})))})),mw.hook("wikipage.content").add((function(e){null!=e&&e[0]&&-1!==["mw-content-text","mw-watchlist-options"].indexOf(null==e?void 0:e[0].id)&&(WikiMirror.getRealText.initCount>0&&r.getRealText(void 0,"wiki"),WikiMirror.getRealText.initCount++,r.diffLink({diffId:r.getConf("wgDiffNewId"),oldId:r.getConf("wgDiffOldId"),revisionId:r.getConf("wgRevisionId")}))})),e.next=10,r.domReady();case 10:t(r.modules.all),console.log("WikiMirror load succeeded.");case 12:case"end":return e.stop()}}),e)})))).catch((function(){var e,t;r.setCss(null!==(e=null===(t=document.querySelectorAll("noscript")[0])||void 0===t?void 0:t.innerHTML.replace(/<\/?style>/g,""))&&void 0!==e?e:"","css"),console.log("WikiMirror dependencies load failed.")})),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"collapsibleSidebar",value:(a=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasClass("ltr")||!this.hasClass("skin-vector-legacy")||null!==(t=RLPAGEMODULES)&&void 0!==t&&-1!==t.indexOf("ext.gadget.CollapsibleSidebar")||-1!==["bo","dz"].indexOf(null!==(n=this.getConf("wgContentLanguage"))&&void 0!==n?n:"")){e.next=5;break}return e.next=3,mw.loader.using("mediawiki.storage");case 3:r="WikiMirror collapsibleSidebar.js load",this.setJs("//zh.wikipedia.".concat(this.MIRROR_DOMAIN,"/wiki/MediaWiki:Gadget-CollapsibleSidebar.js?action=raw&ctype=text/javascript"),"defer").then((function(){console.log("".concat(r," succeeded."))})).catch((function(){console.log("".concat(r," failed."))}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"scrollUpButton",value:function(){var e;if(null===(e=RLPAGEMODULES)||void 0===e||-1===e.indexOf("ext.gadget.scrollUpButton")){var t="WikiMirror scrollUpButton.js load";this.setJs("//zh.wikipedia.".concat(this.MIRROR_DOMAIN,"/wiki/MediaWiki:Gadget-scrollUpButton.js?action=raw&ctype=text/javascript"),"async").then((function(){console.log("".concat(t," succeeded."))})).catch((function(){console.log("".concat(t," failed."))}))}}},{key:"ajaxLogin",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,u,s,l,c,D,d,h,f,m,p,g,v,w,_,F,y,b,k,C,E,x,A,R=this,z=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=z.length>1&&void 0!==z[1]?z[1]:{},a=r.username,i=r.password,!new RegExp("^\\S+?\\.m\\.".concat(this.MIRROR_DOMAIN_REGEX)).test(location.host)){e.next=3;break}return e.abrupt("return");case 3:if(o=function(e){return R.messages.ajaxLogin[e]||e},u=-1!==location.host.indexOf("wikitech")?"lastLoginWikitech":"lastLogin","init"!==t){e.next=13;break}return s=document.querySelector("#ca-cb-login")||document.querySelector(".menu__item--login")||document.querySelector('#topbar>a[href*="UserLogin"]')||document.querySelector("#pt-login-2")||document.querySelector("#pt-login")||document.querySelector(".vector-user-menu-login"),l=this.getCookie("".concat(u,"UserName")),c=this.getCookie("".concat(u,"Password")),D=function(e){e.preventDefault(),R.ajaxLogin()},null==s||s.addEventListener("click",D),l&&c&&"deleted"!==c&&!this.getConf("wgUserName")&&(d=function(){R.showNotice("<span>".concat(o("Starting automatic login"),"</span>"),{autoHide:!0,tag:"login"}),R.ajaxLogin(void 0,{username:l,password:R.inflateRaw(c)})},"1"===this.getCookie("".concat(u,"Use2FA"))?(null==s||s.removeEventListener("click",D),null==s||s.addEventListener("click",(function(e){e.preventDefault(),d()}))):d()),e.abrupt("return");case 13:return e.next=15,mw.loader.using(["mediawiki.api","oojs-ui-core","oojs-ui-windows","oojs-ui.styles.icons-interactions","oojs-ui.styles.icons-user"]);case 15:if(h=new OO.ui.MessageDialog,f=new OO.ui.WindowManager,m=new OO.ui.TextInputWidget({icon:"userAvatar",placeholder:o("Username"),validate:"non-empty",value:null!==(n=this.getCookie("".concat(u,"UserName")))&&void 0!==n?n:""}),p=new OO.ui.TextInputWidget({icon:"key",placeholder:o("Password"),type:"password",validate:"non-empty"}),g=new OO.ui.CheckboxInputWidget({selected:!0}),v=new OO.ui.FieldLayout(g,{align:"inline",label:o("Cross wiki automatic login")}),w=new OO.ui.CheckboxInputWidget,_=new OO.ui.FieldLayout(w,{align:"inline",help:o("If selected, the login status will be kept for 1 year. If not selected, it will be kept for 1 month."),label:o("Keep me logged in")}),F=jQuery("<label>").addClass("oo-ui-labelWidget oo-ui-labelElement-label").css({"font-size":"small","text-align":"justify"}),y=F.clone().append(v.$element),b=F.clone().css("float","right").html('<a href="/wiki/Special:PasswordReset" title="'.concat(o("Reset password"),'">').concat(o("Forgot password?"),"</a>")),k=F.clone().css({display:"block","font-size":"inherit",padding:"6px 0"}).append(m.$element.css("margin-bottom","6px")).append(p.$element),C=F.clone().append(_.$element.css("margin-top","6px")),E="",x=(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,s,l,c,D,d,h,v,_,F,y,b,k=arguments;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.length>0&&void 0!==k[0]?k[0]:{},n=t.autoLogin,r=void 0!==n&&n,s=t.loginContinue,l=void 0!==s&&s,c=t.retypePassword,D=void 0!==c&&c,d=new mw.Api,e.prev=2,l){e.next=9;break}return R.showNotice("<span>".concat(o("Getting login token"),"</span>"),{tag:"token"}),e.next=7,d.getToken("login");case 7:E=e.sent,R.showNotice("<span>".concat(o("Login token getted"),"</span>"),{autoHide:!0,tag:"token"});case 9:if(_={action:"clientlogin",format:"json",formatversion:"2",logintoken:E,loginreturnurl:location.href,username:a||m.getValue(),password:i||p.getValue()},i=_.password,w.isSelected()&&(_.rememberMe="1"),!l&&!D){e.next=35;break}return e.next=15,f.clearWindows();case 15:return delete _.loginreturnurl,delete _.username,delete _.password,_.logincontinue=!0,e.next=21,OO.ui.prompt(jQuery('<b class="oo-ui-messageDialog-title oo-ui-window-head">'.concat(o(D?"Enter password":"Enter 2FA verification code"),"</b>")),{textInput:{icon:"key",placeholder:o(D?"New password":"6-digit number"),validate:"integer"}});case 21:if(null!==(F=e.sent)){e.next=27;break}return R.showNotice("<span>".concat(o("Login cancelled"),"</span>"),{autoHide:!0,tag:"login"}),e.abrupt("return");case 27:if(""!==F){e.next=34;break}if(R.showNotice("<span>".concat(o(D?"The password cannot be empty":"The 2FA verification code cannot be empty"),"</span>"),{autoHide:!0,tag:"login"}),!D){e.next=32;break}return x({retypePassword:!0}),e.abrupt("return");case 32:return x({loginContinue:!0}),e.abrupt("return");case 34:D?(_.password=F,_.retype=F):_.OATHToken=F;case 35:return R.showNotice("<span>".concat(o("Logging in"),"</span>"),{tag:"login"}),e.next=38,d.post(_);case 38:if(y=e.sent,"PASS"!==(null===(h=y.clientlogin)||void 0===h?void 0:h.status)){e.next=48;break}b=_.rememberMe?8760:720,R.showNotice("<span>".concat(o("Login succeed"),"</span>"),{tag:"login"}),R.setCookie({name:"".concat(u,"UserName"),value:y.clientlogin.username,hour:b}),g.isSelected()?R.setCookie({name:"".concat(u,"Password"),value:R.deflateRaw(i,""),hour:b}):r||R.setCookie({name:"".concat(u,"Password"),value:"deleted",hour:-1}),_.OATHToken?R.setCookie({name:"".concat(u,"Use2FA"),value:"1",hour:b}):R.setCookie({name:"".concat(u,"Use2FA"),value:"deleted",hour:-1}),location.reload(),e.next=75;break;case 48:if(null===(v=y.clientlogin)||void 0===v||!v.messagecode){e.next=75;break}r&&R.setCookie({name:"".concat(u,"Password"),value:"deleted",hour:-1}),e.t0=y.clientlogin.messagecode,e.next="authmanager-authn-autocreate-failed"===e.t0?53:"centralauth-login-error-locked"===e.t0?56:"login-throttled"===e.t0?59:"oathauth-auth-ui"===e.t0?61:"oathauth-login-failed"===e.t0?63:"resetpass-temp-emailed"===e.t0?66:"wrongpassword"===e.t0?69:74;break;case 53:return R.showNotice("<span>".concat(o("Automatic account creation failed"),"</span>")),f.clearWindows(),e.abrupt("break",75);case 56:return R.showNotice("<span>".concat(o("The user has been globally locked"),"</span>")),f.clearWindows(),e.abrupt("break",75);case 59:return R.showNotice("<span>".concat(o("The user login is too frequent, please try again in five minutes"),"</span>")),e.abrupt("break",75);case 61:return x({loginContinue:!0}),e.abrupt("break",75);case 63:return R.showNotice("<span>".concat(o("Invalid 2FA verification code"),"</span>"),{autoHide:!0,tag:"login"}),x({loginContinue:!0}),e.abrupt("break",75);case 66:return R.showNotice("<span>".concat(o("New password is required"),"</span>"),{tag:"login"}),x({retypePassword:!0}),e.abrupt("break",75);case 69:return R.showNotice("<span>".concat(o("Invalid useruame or password"),"</span>"),{autoHide:!0,tag:"login"}),e.next=72,f.clearWindows();case 72:return R.ajaxLogin(),e.abrupt("break",75);case 74:R.showNotice("<span>".concat(o("Unknown API error"),"</span>"));case 75:e.next=80;break;case 77:e.prev=77,e.t1=e.catch(2),R.showNetworkErrorNotice();case 80:case"end":return e.stop()}}),e,null,[[2,77]])})));return function(){return e.apply(this,arguments)}})(),!a||!i){e.next=33;break}return x({autoLogin:!0}),e.abrupt("return");case 33:A=function(){var e=!(-1!==[m.getValue(),p.getValue()].indexOf(""));return e||R.showNotice("<span>".concat(o("The username or password cannot be empty"),"</span>"),{autoHide:!0,tag:"login"}),e},p.on("enter",(function(){A()&&x()})),jQuery("body").append(f.$element),h.getActionProcess=function(e){return"login"===e?new OO.ui.Process((function(){A()&&x()})):new OO.ui.Process((function(){f.clearWindows()}))},f.addWindows([h]),f.openWindow(h,{actions:[{action:"login",flags:"primary",label:jQuery('<b style="color:#36c">'.concat(o("Login"),"</b>"))},{action:"cancle",label:jQuery('<b style="color:#d33">'.concat(o("Cancel"),"</b>"))}],message:jQuery("<div>").addClass("oo-ui-window-foot").append(k,b,C,y),title:jQuery('<b class="oo-ui-window-head">'.concat(o("Login"),"</b>")),size:"small"});case 39:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"confirmLogout",value:function(){var e,t=this,n=document.querySelector("#ca-cb-logout>a")||document.querySelector(".menu__item--logout")||document.querySelector('#topbar>a[href*="UserLogout"]')||document.querySelector("#pt-logout>a")||document.querySelector(".vector-user-menu-logout");if(n&&n.parentNode&&this.getConf("wgUserName")&&(null===(e=RLPAGEMODULES)||void 0===e||-1===e.indexOf("ext.gadget.confirm-logout"))){var r=document.createElement("a");n.className&&(r.className=n.className),r.href=n.href,r.innerHTML=n.innerHTML,n.parentNode.append(r),n.remove(),r.addEventListener("click",(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),e.next=4,mw.loader.using("oojs-ui-windows");case 4:return e.next=6,OO.ui.confirm(jQuery('<div class="WikiMirrorNotice WikiMirrorTip"><span style="font-size:1.2rem">'.concat((r="Confirm logout?",t.messages.confirmLogout[r]||r),"</span></div>")));case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,mw.loader.using("mediawiki.api");case 11:return e.prev=11,t.showNotice("<span>".concat(mw.message("logging-out-notify"),"</span>")),e.next=15,(new mw.Api).postWithEditToken({action:"logout"});case 15:location.reload(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),t.showNetworkErrorNotice();case 21:case"end":return e.stop()}var r}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}})())}}},{key:"darkMode",value:function(e,t,n){var r=this;if(this.localStorage()){var a="wikimirror-darkmode",i=function(e){return r.messages.darkMode[e]||e},o='<li id="'.concat(a,'"><a class="mw-ui-icon mw-ui-icon-before" title="'),u='"><span>',s="</span></a></li>",l=i("Dark mode"),c=i("Switch to dark mode"),D=i("Light mode"),d=i("Switch to light mode"),h=matchMedia("(prefers-color-scheme:dark)").matches,f=function(e){e.matches&&"0"===r.localStorage(a)&&(p(),r.darkMode("insert"))},m=function(e){e.matches&&"1"===r.localStorage(a)&&(p(),r.darkMode("insert"))},p=function(){"0"===r.localStorage(a)?r.localStorage(a,"1"):r.localStorage(a,"0")};switch(e){case"add":document.documentElement.classList.add(a),document.documentElement.style.filter="",/^zh(\.m)?\.wikipedia/.test(location.host)&&(this.hasClass("skin-monobook")||this.hasClass("skin-vector-legacy"))&&this.setCss("wikimirror-css-darkmode-logo-zhwiki","add"),/^(?!zh\.)\S+?(\.m)?\.wikipedia/.test(location.host)&&(this.hasClass("skin-monobook")?this.setCss("wikimirror-css-darkmode-logo-wiki-monobook","add"):this.hasClass("skin-vector-legacy")&&this.setCss("wikimirror-css-darkmode-logo-wiki-vector-legacy","add"));break;case"remove":document.documentElement.classList.remove(a),this.setCss("wikimirror-css-darkmode-logo-zhwiki","remove"),this.setCss("wikimirror-css-darkmode-logo-wiki-monobook","remove"),this.setCss("wikimirror-css-darkmode-logo-wiki-vector-legacy","remove");break;case"check":return this.localStorage(a)||(h?this.localStorage(a,"1"):this.localStorage(a,"0")),"1"===this.localStorage(a);case"init":if(matchMedia("(prefers-color-scheme:dark)").addEventListener("change",f),matchMedia("(prefers-color-scheme:light)").addEventListener("change",m),window.addEventListener("storage",(function(e){e.key===a&&r.darkMode("insert")})),this.darkMode("insert"),this.hasClass("skin-vector-legacy")){var g,v=function(e){g&&clearTimeout(g),g=setTimeout((function(){document.documentElement.style.height="auto",document.documentElement.style.height="".concat(document.documentElement.scrollHeight,"px")}),e)},w=new MutationObserver((function(){v(500)})),_=new ResizeObserver((function(){v(1e3)}));w.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),_.observe(document.body)}break;case"insert":this.hasClass("skin-apioutput")?(document.documentElement.style.backgroundColor="#fff",document.documentElement.style.color="#000"):this.hasClass("skin-cologneblue")?document.documentElement.style.backgroundColor="#ffffec":this.hasClass("skin-contenttranslation")?document.documentElement.style.backgroundColor="#eaecf0":this.hasClass("skin-modern")?document.documentElement.style.backgroundColor="#f0f0f0":this.hasClass("skin-monobook")?document.documentElement.style.backgroundColor="#f9f9f9":this.hasClass("skin-timeless")?document.documentElement.style.height="100%":this.hasClass("skin-vector-2022")?document.documentElement.style.backgroundColor="#f8f9fa":this.hasClass("skin-vector-legacy")&&(document.documentElement.style.backgroundColor="#f6f6f6");var F=document.querySelector("#".concat(a,">a"));if("1"===this.localStorage(a)){if(this.darkMode("add"),this.darkMode("meta","color-scheme","dark"),this.hasClass("skin-minerva")?this.darkMode("meta","theme-color","#1c1e22"):this.darkMode("meta","theme-color","#0d0d0d"),!F)return;F.innerHTML=F.innerHTML.replace(l,D),F.setAttribute("title",d)}else if("0"===this.localStorage(a)){if(this.darkMode("remove"),this.darkMode("meta","color-scheme","remove"),this.hasClass("skin-cologneblue")?this.darkMode("meta","theme-color","#68a"):this.hasClass("skin-minerva")?this.darkMode("meta","theme-color","#eaecf0"):this.hasClass("skin-modern")?this.darkMode("meta","theme-color","#036"):this.hasClass("skin-monobook")?this.darkMode("meta","theme-color","#e6e6e6"):this.darkMode("meta","theme-color","remove"),!F)return;F.innerHTML=F.innerHTML.replace(D,l),F.setAttribute("title",c)}break;case"meta":var y=document.createElement("meta"),b="wikimirror-meta-".concat(t),k=t,C=document.querySelector("#".concat(b)),E=document.querySelector("meta[name='".concat(k,"']"));y.content=n,y.id=b,y.name=k,E&&!E.id&&E.remove(),"remove"===n?null==C||C.remove():C?C.content=n:document.head.append(y);break;case"normal":if(document.querySelector("#".concat(a)))return;var x=document.querySelector("#pt-preferences")||document.querySelector("#p-personal"),A="1"===this.localStorage(a),R="0"===this.localStorage(a),z=function(e){((null==e?void 0:e.firstElementChild)||document.querySelector("#".concat(a))).addEventListener("click",(function(e){e.preventDefault(),p(),r.darkMode("insert")}))};if(x&&this.hasClass("skin-minerva"))A?x.insertAdjacentHTML("beforeend","".concat(o).concat(d).concat(u).concat(D).concat(s)):R&&x.insertAdjacentHTML("beforeend","".concat(o).concat(c).concat(u).concat(l).concat(s)),z();else if(document.querySelector("#p-tb")||this.hasClass("skin-apioutput")||this.hasClass("skin-nostalgia")){var B=this.hasClass("skin-apioutput")||this.hasClass("skin-nostalgia")?"mw-content-text":"p-tb";mw.loader.using("mediawiki.util").then((function(){A?z(mw.util.addPortletLink(B,"#",D,a,d)):R&&z(mw.util.addPortletLink(B,"#",l,a,c))}))}}}}},{key:"diffLink",value:(n=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,i,o,u,s,l,c,D,d,h,f,m=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="wikimirror-difflink",i=function(e){return m.messages.diffLink[e]||e},t&&(document.querySelector("#p-cactions")||document.querySelector("#p-tb")||this.hasClass("skin-nostalgia")||this.hasClass("mw-special-MobileDiff"))&&(document.querySelector("#mw-revision-nav")||this.hasClass("diff","table"))&&(null===(n=RLPAGEMODULES)||void 0===n||-1===n.indexOf("ext.gadget.Difflink"))){e.next=4;break}return e.abrupt("return");case 4:if(o="p-cactions",this.hasClass("mw-special-MobileDiff")?o="mw-mf-diffarea":this.hasClass("skin-nostalgia")?o="mw-content-text":this.hasClass("skin-minerva")&&(o="p-tb"),u=(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,i,u,s;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.text,r=t.tooltip,i=t.link,u=t.isPermaLink,null!==(s=document.querySelector("#".concat(a)))){e.next=7;break}return e.next=5,mw.loader.using("mediawiki.util");case 5:s=mw.util.addPortletLink(o,"#",n,a,r),"mw-mf-diffarea"===o&&m.setCss("#".concat(a,"{float:right}#").concat(a,">a>span:first-child{vertical-align:text-bottom}"),"css","wikimirror-css-difflink");case 7:("mw-mf-diffarea"===o||m.hasClass("skin-minerva"))&&(s=s.firstElementChild),s.onclick=(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n,r,a,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,mw.loader.using(["mediawiki.widgets","oojs-ui-windows"]);case 3:for(n=jQuery("<div>"),r=0,a=[i,"[[".concat(i).concat(u?m.decodeURIComponent(m.getLocate("originHash")):"","]]")];r<a.length;r++)o=a[r],n.append(new mw.widgets.CopyTextLayout({align:"top",copyText:o}).$element);/android|iphone|mobile/i.test(navigator.userAgent)?OO.ui.alert(n):OO.ui.alert(n,{size:"medium"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})(),s=t.diffId,l=t.oldId,c=t.revisionId,!s){e.next=27;break}if(D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Special:Diff/";e&&(t+="".concat(e,"/")),t+=s,u({text:i("Diff link"),tooltip:i("Copy the link to the diff version (wiki syntax)"),link:t})},D(l),!l){e.next=25;break}return e.prev=12,e.next=15,fetch("/w/api.php?action=compare&format=json&fromrev=".concat(s,"&prop=ids&torelative=prev"));case 15:return h=e.sent,e.next=18,h.json();case 18:f=e.sent,s===this.getConf("wgDiffNewId")&&(null===(d=f.compare)||void 0===d?void 0:d.fromrevid)===this.getConf("wgDiffOldId")&&D(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),this.showNetworkErrorNotice();case 25:e.next=28;break;case 27:c&&-1!==[null===(r=document.querySelector("#contentSub"))||void 0===r?void 0:r.querySelectorAll("#mw-revision-nav").length,document.querySelectorAll("main#content>.pre-content #mw-revision-nav").length].indexOf(1)&&u({text:i("Permanent link"),tooltip:i("Copy the permanent link to the current version (wiki syntax)"),link:"Special:PermaLink/".concat(c),isPermaLink:!0});case 28:case"end":return e.stop()}}),e,this,[[12,22]])}))),function(e){return n.apply(this,arguments)})},{key:"disableAnonEdit",value:function(){this.getConf("wgUserName")||(mw.hook("wikipage.editform").add((function(e){e.find("#wpSummary").prop("readonly",!0),e.find("#wpTextbox1").prop("readonly",!0)})),mw.hook("mobileFrontend.editorOpened").add((function(){jQuery("#wikitext-editor").prop("readonly",!0)})),mw.hook("ve.activationComplete").add((function(){var e=ve.init.target.getSurface();e&&e.setReadOnly(!0)})))}},{key:"displayAnonHide",value:function(e){e||this.getConf("wgUserName")?this.setCss("wikimirror-css-anon-hide","remove"):this.hasClass("mw-special-CreateAccount")&&location.replace("/wiki/Special:Userlogin")}},{key:"showNotice",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.autoHide,a=void 0!==r&&r,i=n.tag,o=function(e){return t.messages.showNotice[e]||""},u='<div class="WikiMirrorNotice">',s="</div>",l="<button>".concat(o("OK"),"</button>"),c=function(){"function"==typeof bldkDingExposedInterface?bldkDingExposedInterface(e,"default",a?void 0:"long"):t.notify(jQuery("".concat(u).concat(e).concat(l).concat(s)),{autoHide:a,tag:null!=i?i:null})};e&&c()}},{key:"showNetworkErrorNotice",value:function(){var e,t=this;this.showNotice("<span>".concat((e="Network error",t.messages.showNetworkErrorNotice[e]||e),"</span>"))}},{key:"showRedirect",value:function(){var e=this,t="wikimirror-redirect";if(!document.querySelector("#".concat(t))){var n=function(t){return e.messages.showRedirect[t]||t},r=n("Official site"),a=n("Redirect the current mirror page to its corresponding official page"),i='<li id="'.concat(t,'"><a href="').concat(this.getLocate("originUrl"),'" target="_blank" title="').concat(a,'">').concat(r,"</a></li>"),o='<li id="'.concat(t,'"><a href="').concat(this.getLocate("originUrl"),'" target="_blank" title="').concat(a,'"><span class="mw-ui-icon mw-ui-icon-minerva-logOut"></span><span>').concat(r,"</span></a></li>");this.hasClass("skin-apioutput")&&document.querySelector(".apihelp-flags>ul")&&document.querySelector(".apihelp-flags>ul").insertAdjacentHTML("beforeend",i),this.hasClass("skin-cologneblue")&&document.querySelector("#titlelinks")&&document.querySelector("#titlelinks").insertAdjacentHTML("beforeend",i.replace("<li","<span").replace("li>","span>")),this.hasClass("skin-contenttranslation")&&document.querySelector("#p-tb")&&document.querySelector("#p-tb").insertAdjacentHTML("beforeend",i),this.hasClass("skin-minerva")&&document.querySelector("#p-donation")&&document.querySelector("#p-donation").insertAdjacentHTML("beforeend",o),this.hasClass("skin-modern")&&document.querySelector("#footer-info")&&document.querySelector("#footer-info").insertAdjacentHTML("beforeend",i),this.hasClass("skin-monobook")&&document.querySelector("#f-list")&&document.querySelector("#f-list").insertAdjacentHTML("beforeend",i),this.hasClass("skin-nostalgia")&&document.querySelector("#searchform")&&document.querySelector("#searchform").insertAdjacentHTML("beforebegin",i.replace("<li","<span").replace("li>","span>")),(this.hasClass("skin-timeless")||this.hasClass("skin-vector"))&&document.querySelector("#footer-places")&&document.querySelector("#footer-places").insertAdjacentHTML("beforeend",i)}}},{key:"bodyReady",value:function(){return new Promise((function(e){var t=0,n=setInterval((function(){var r;t++,null!==(r=document.body)&&void 0!==r&&r.classList.contains("mediawiki")?(clearInterval(n),e(!0)):t>50&&(clearInterval(n),e(!1))}),0)}))}},{key:"domReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["complete","interactive"];return new Promise((function(t){-1!==e.indexOf(document.readyState)?t(!0):document.addEventListener("readystatechange",(function(){-1!==e.indexOf(document.readyState)&&t(!0)}))}))}},{key:"mwReady",value:function(){return new Promise((function(e,t){var n=0,r=setInterval((function(){var a;n++,null!==(a=document.body)&&void 0!==a&&a.classList.contains("mediawiki")&&"object"===("undefined"==typeof mw?"undefined":_typeof(mw))&&"function"==typeof mw.config.get&&"function"==typeof mw.hook&&"function"==typeof mw.loader.using&&"function"==typeof mw.message?(clearInterval(r),e(!0)):n>3e3&&(clearInterval(r),t(!1))}),10)}))}},{key:"getConf",value:function(e){var t,n;return"object"===("undefined"==typeof mw?"undefined":_typeof(mw))&&"function"==typeof(null===(t=mw.config)||void 0===t?void 0:t.get)?mw.config.get(e):"object"===("undefined"==typeof RLCONF?"undefined":_typeof(RLCONF))&&this.isValidKey(e,RLCONF)&&null!==(n=RLCONF[e])&&void 0!==n?n:null}},{key:"getCookie",value:function(e){var t;return null===(t="; ".concat(this.decodeURIComponent(document.cookie)).split("; ".concat(e,"=")).pop())||void 0===t?void 0:t.split(";").shift()}},{key:"getLocate",value:function(e){var t=this.getRealText(location.hash),n=this.getRealText(location.host),r=this.getRealText(location.href);switch(e){case"originHash":return t;case"originHost":return n;default:return r}}},{key:"decodeURIComponent",value:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e){return decodeURIComponent((function(){try{return decodeURIComponent(e)}catch(t){return e.replace(/%(?!\d+)/g,"%25")}})().replace(/\+/g,"%20"))}))},{key:"encodeURIComponent",value:(function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e){return encodeURIComponent(e).replace(/%20/g,"+").replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%5B/g,"[").replace(/%5D/g,"]")}))},{key:"hasClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";if(!e||!document.querySelector(t))return!1;var n,r=_createForOfIteratorHelper(document.querySelectorAll(t));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.classList.contains(e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"i18n",value:function(){var e,t,n=this,r=[null!==(e=null!==(t=document.documentElement.lang)&&void 0!==t?t:navigator.language.split("-")[0])&&void 0!==e?e:navigator.language.toLowerCase(),"en"],a={zh:["zh","zh-hans","zh-hant","zh-cn","zh-tw","zh-hk","zh-sg","zh-mo","zh-my","en"],"zh-hans":["zh-hans","zh-cn","zh-sg","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo","en"],"zh-hant":["zh-hant","zh-tw","zh-hk","zh-mo","zh","zh-hans","zh-cn","zh-sg","zh-my","en"],"zh-cn":["zh-cn","zh-hans","zh-sg","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo","en"],"zh-sg":["zh-sg","zh-hans","zh-cn","zh-my","zh","zh-hant","zh-tw","zh-hk","zh-mo","en"],"zh-my":["zh-my","zh-hans","zh-cn","zh-sg","zh","zh-hant","zh-tw","zh-hk","zh-mo","en"],"zh-tw":["zh-tw","zh-hant","zh-hk","zh-mo","zh","zh-hans","zh-cn","zh-sg","zh-my","en"],"zh-hk":["zh-hk","zh-hant","zh-mo","zh-tw","zh","zh-hans","zh-cn","zh-sg","zh-my","en"],"zh-mo":["zh-mo","zh-hant","zh-hk","zh-tw","zh","zh-hans","zh-cn","zh-sg","zh-my","en"]},i=function(e,t){var i,o;n.isValidKey(t,a)&&(o=a[t]);var u,s=_createForOfIteratorHelper(null!==(i=o)&&void 0!==i?i:r);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(n.isValidKey(l,e)&&void 0!==e[l])return e[l]}}catch(e){s.e(e)}finally{s.f()}return""};return{content:function(e){var t;return i(e,null!==(t=n.getConf("wgContentLanguage"))&&void 0!==t?t:"")},localize:function(e){var t,r;return i(e,null!==(t=null!==(r=n.getConf("wgUserLanguage"))&&void 0!==r?r:n.getConf("wgContentLanguage"))&&void 0!==t?t:"")},vary:function(e){var t,r;return i(e,null!==(t=null!==(r=n.getConf("wgUserVariant"))&&void 0!==r?r:n.getConf("wgContentLanguage"))&&void 0!==t?t:"")}}}},{key:"isValidKey",value:function(e,t){return e in t}},{key:"localStorage",value:(function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})((function(e,t){var n=(function(){try{return localStorage.setItem("_","_"),localStorage.removeItem("_"),!0}catch(e){return!1}})();if(n&&e){if(!t)return localStorage.getItem(e);localStorage.setItem(e,t)}return n}))},{key:"notify",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw.loader.using("mediawiki.notification");case 2:mw.notification.notify(t,n);case 3:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"setCookie",value:function(e){var t=e.name,n=e.value,r=e.hour,a=void 0===r?0:r,i=e.domain,o=void 0===i?".".concat(this.MIRROR_DOMAIN):i,u=e.path,s=void 0===u?"/":u,l=e.isSecure,c=void 0===l||l;if(t&&n&&o&&s){var D="".concat(t,"=").concat(this.encodeURIComponent(n),";domain=").concat(o,";path=").concat(s).concat(c?";Secure":""),d=new Date;0===a?document.cookie=D:(d.setTime(d.getTime()+36e5*a),document.cookie="".concat(D,";expires=").concat(d.toUTCString()))}}},{key:"setCss",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"css",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(t){case"add":e&&!document.querySelector("#".concat(e))&&this.extraCss(e)&&this.setCss(this.extraCss(e),"css",e);break;case"remove":var r;if(e)null===(r=document.querySelector("#".concat(e)))||void 0===r||r.remove();break;case"css":if(e||e&&(!n||!document.querySelector("#".concat(n)))){var a=document.createElement("style");n&&(a.id=n),a.append(document.createTextNode(e)),document.head.append(a)}break;case"url":return new Promise((function(t,r){e||r();var a=document.createElement("link");n&&(a.id=n),a.href=e,a.rel="stylesheet",a.addEventListener("load",(function(){t()})),a.addEventListener("error",(function(){r()})),document.head.append(a)}))}}},{key:"setJs",value:function(e,t,n){return new Promise((function(r,a){e||a();var i=document.createElement("script");i.src=e,n&&(i.crossOrigin="anonymous"),"async"===t&&(i.async=!0),"defer"===t&&(i.defer=!0),i.addEventListener("load",(function(){r()})),i.addEventListener("error",(function(){a()})),document.head.append(i)}))}},{key:"base64ToUint8Array",value:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}},{key:"uint8arrayToBase64",value:function(e){for(var t=0,n=new Uint8Array,r="";t<e.length;)n=e.subarray(t,Math.min(t+32768,e.length)),r+=Reflect.apply(String.fromCharCode,null,_toConsumableArray(n)),t+=32768;return btoa(r)}},{key:"deflateRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rawdeflate,";return"".concat(t).concat(this.uint8arrayToBase64(pako.deflateRaw(e,{level:5})))}},{key:"inflateRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rawdeflate,";return pako.inflateRaw(this.base64ToUint8Array(e.replace(t,"")),{to:"string"})}},{key:"ahCallback_Request",value:function(e){var t=this,n=["apfrom","appendtext","apprefix","claim","content","ehcontent","epcontent","etcontent","etssummary","fromtext","fromtext-main","html","ntcontent","nttopic","prependtext","repcontent","search","summary","text","titles","totext","totext-main","url","wikitext","siteUrl"],r=new URL(e.url,location.origin),a=new URL("".concat(location.origin,"/w/api.php?").concat(e.body));try{if(null===e.body)throw new ReferenceError("Request body is null.");var i=JSON.parse(e.body);delete i.md5;for(var o=0,u=n;o<u.length;o++){var s,l=u[o],c=null===(s=i.query)||void 0===s?void 0:s[l];c&&(i.query[l]=this.getRealText(c))}e.body=JSON.stringify(i)}catch(i){var D=function(e){/^zh(\.m)?\.wikipedia/.test(r.host)&&e.set("tags",e.has("tags")?"WikiMirror|".concat(e.get("tags")):"WikiMirror")};if(e.body&&/^\?(\[object%20FormData]|null)$/.test(a.search))if(D(e.body),e.body.delete("md5"),"visualeditoredit"===e.body.get("action"))if(e.body.has("html")){var d=e.body.get("html"),h=d.startsWith("rawdeflate");h&&(d=this.inflateRaw(d)),d=this.getRealText(d),e.body.set("html",h?this.deflateRaw(d):d)}else e.body.has("wikitext")&&e.body.set("wikitext",this.getRealText(e.body.get("wikitext")));else{var f,m=_createForOfIteratorHelper(n);try{for(m.s();!(f=m.n()).done;){var p=f.value;e.body.has(p)&&e.body.set(p,this.getRealText(e.body.get(p)))}}catch(e){m.e(e)}finally{m.f()}}else{var g=function(e){return t.deflateRaw(t.getRealText(t.inflateRaw(e)))},v=r.searchParams,w=a.searchParams;D(w),w.delete("md5");var _,F=_createForOfIteratorHelper(n);try{for(F.s();!(_=F.n()).done;){var y=_.value;v.has(y)&&v.set(y,this.getRealText(v.get(y))),w.has(y)&&w.set(y,this.getRealText(w.get(y)))}}catch(e){F.e(e)}finally{F.f()}switch(w.get("action")){case"cxpublish":w.set("html",g(w.get("html")));break;case"cxsave":w.set("content",g(w.get("content")));break;case"logout":for(var b=0,k=["lastLogin","lastLoginWikitech"];b<k.length;b++){var C=k[b];this.getCookie("".concat(C,"Password"))&&(this.setCookie({name:"".concat(C,"Password"),value:"deleted",hour:-1}),this.setCookie({name:"".concat(C,"Use2FA"),value:"deleted",hour:-1}))}break;case"shortenurl":r.host=location.host}for(var E=0,x=[/^([^.]+(?:\.m)?\.planet)\.wikimedia\.org$/,/^((?:[^.]+(?:\.m)?\.(?:wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki))|wikisource)\.org$/,/^(advisors(?:\.m)?|advisory(?:\.m)?|affcom|am(?:\.m)?|analytics|annual|api(?:\.m)?|ar(?:\.m)?|auditcom|bd(?:\.m)?|be(?:\.m)?|blog|board|boardgovcom|br(?:\.m)?|bugzilla|ca(?:\.m)?|chair|checkuser(?:\.m)?|cn(?:\.m)?|co(?:\.m)?|collab|(?:test-)?commons(?:\.m)?|config-master|cxserver|dbtree|design|developer|diff|dk(?:\.m)?|doc|ec(?:\.m)?|ee(?:\.m)?|electcom(?:\.m)?|etherpad|exec(?:\.m)?|fdc(?:\.m)?|fi(?:\.m)?|foundation(?:\.m)?|ge(?:\.m)?|gerrit|gitlab|gr(?:\.m)?|grafana|grants(?:\.m)?|graphite|hi(?:\.m)?|horizon|id(?:\.m)?|id-internal(?:\.m)?|idp|iegcom(?:\.m)?|il|incubator(?:\.m)?|intake-(?:analytics|logging)|integration|internal|labtestwikitech|legalteam(?:\.m)?|lists|login(?:\.m)?|logstash|mai(?:\.m)?|maps|meta(?:\.m)?|mk(?:\.m)?|movementroles|mx(?:\.m)?|ng(?:\.m)?|nl(?:\.m)?|no(?:\.m)?|noboard-chapters|noc|nyc(?:\.m)?|nz(?:\.m)?|office(?:\.m)?|ombuds(?:\.m)?|ombudsmen|ores|otrs-wiki(?:\.m)?|outreach(?:\.m)?|pa-us(?:\.m)?|people|pl(?:\.m)?|performance|phabricator|planet|policy|pt(?:\.m)?|projectcom|punjabi(?:\.m)?|quality(?:\.m)?|research|romd(?:\.m)?|rs(?:\.m)?|rt|ru(?:\.m)?|se(?:\.m)?|searchcom|schema|secure|spcom|species(?:\.m)?|static-bugzilla|steward(?:\.m)?|strategy(?:\.m)?|stream|svn|techblog|techconduct|ticket|tr(?:\.m)?|transitionteam(?:\.m)?|toolsadmin|transparency|ua(?:\.m)?|upload|usability|vote(?:\.m)?|vrt-wiki(?:\.m)?|wb(?:\.m)?|wikimania(?:200[5-9]|201[0-8]|wikitech-static|team)?(?:\.m)?|wikitech)\.wikimedia\.org$/];E<x.length;E++){var A=x[E];r.host.match(A)&&(r.host=r.host.replace(A,"$1.".concat(this.MIRROR_DOMAIN)))}"recommend.wmflabs.org"===r.host&&(r.host="recommend.".concat(this.MIRROR_DOMAIN)),"wma.wmcloud.org"===r.host&&(r.host="wma.".concat(this.MIRROR_DOMAIN)),r.host==="xtools-api.".concat(this.MIRROR_DOMAIN)&&(r.pathname=this.getRealText(r.pathname));var R="".concat(r.host).concat(r.pathname);if(this.regexps.xtools_api.test(R)){var z=this.getRealText(r.pathname);r.host="xtools-api.".concat(this.MIRROR_DOMAIN),r.pathname=z.replace("/api/","/")}if(-1!==R.indexOf("wikimedia.org/api/rest_v1/media/math/render/")){var B=R.match(/^wikimedia\.org\/api\/rest_v1\/media\/math\/render\/(png|svg)\/(\S+?)$/);if(B){var O=B[1],S=B[2];r.host="latex-".concat(O,".").concat(this.MIRROR_DOMAIN),r.pathname="/".concat(S)}}e.body&&(e.body=a.toString().replace("".concat(location.origin,"/w/api.php?"),"")),e.url&&(e.url=r.toString())}}return e}},{key:"ahCallback_Response",value:function(e){var t=this,n=function e(n,r,a){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.isValidKey(i,n)&&("object"===_typeof(n[i])?e(n[i],r,i):r(n,i,a))},r=function e(){var r,a,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/html",s=(new DOMParser).parseFromString(o,u.match(/^([+/a-z-]+?)(?:;|$)/)[1]),l=s.documentElement;null===(r=l.querySelector("parsererror"))||void 0===r||r.remove();var c,D=_createForOfIteratorHelper(l.querySelectorAll("span[data-mw-variant]"));try{for(D.s();!(c=D.n()).done;){var d=c.value,h=JSON.parse(d.dataset.mwVariant);n(h,(function(n,r){if(t.isValidKey(r,n)){var a="t"===r?n[r]:"";a&&/^<(\w+?)\s.+?>.*?<\/\1>$/.test(a)&&(n[r]=e(a).element.querySelector("body").innerHTML)}})),d.dataset.mwVariant=JSON.stringify(h)}}catch(e){D.e(e)}finally{D.f()}var f,m=_createForOfIteratorHelper(l.querySelectorAll("audio,base,img,source,video"));try{for(m.s();!(f=m.n()).done;)for(var p=f.value,g=0,v=["href","poster","src","srcset"];g<v.length;g++){var w=v[g];if(t.isValidKey(w,p)){var _=p[w];_&&(p[w]=_.replace(new RegExp(t.MIRROR_DOMAIN_REGEX,"g"),"r-e-p-l-a-c-e.org"))}}}catch(e){m.e(e)}finally{m.f()}return{dec:null!==(a=null===(i=o.match(/^\s*?(<\?xml.+?\?>)/))||void 0===i?void 0:i[0])&&void 0!==a?a:"",dtd:s.doctype?"".concat((new XMLSerializer).serializeToString(s.doctype),"\n"):"",element:l}};try{var a,i,o,u,s,l,c,D,d=JSON.parse(e.response);if(null!==(a=d.discussiontoolspreview)&&void 0!==a&&null!==(i=a.parse)&&void 0!==i&&i.text){var h=r(d.discussiontoolspreview.parse.text).element;d.discussiontoolspreview.parse.text=this.getRealText(h.querySelector(".mw-parser-output").outerHTML)}if(d.visualeditor||d.visualeditoredit){var f=d.visualeditor?"visualeditor":"visualeditoredit",m=d[f].content;if(m)if(d[f].etag){var p=r(m);d[f].content="".concat(p.dtd).concat(this.getRealText(p.element.outerHTML))}else if(/^<\S+?\sid=\S+?>/.test(m)){var g=r(m).element;d[f].content=this.getRealText(g.querySelector("body").innerHTML)}else d[f].content=this.getRealText(m)}if(d.compare||d.expandtemplates||null!==(o=d.query)&&void 0!==o&&o.pages)n(d.compare||d.expandtemplates||(null===(D=d.query)||void 0===D?void 0:D.pages),(function(e,n){t.isValidKey(n,e)&&-1!==["content","*"].indexOf(n)&&(e[n]=t.getRealText(e[n]))}));if(d.html){var v=r(d.html).element;d.html=this.getRealText(v.querySelector("div").outerHTML)}if((null!==(u=d.parse)&&void 0!==u&&u.parsedsummary||null!==(s=d.parse)&&void 0!==s&&s.text||null!==(l=d.parse)&&void 0!==l&&l.wikitext)&&n(d.parse,(function(e,n,a){if(t.isValidKey(n,e))if(-1!==["parsedsummary","text"].indexOf(a)){var i=r(e[n]).element;e[n]=t.getRealText(i.querySelector(".mw-parser-output").outerHTML)}else"wikitext"===a&&(e[n]=t.getRealText(e[n]))})),d.segmentedContent){var w=r(d.segmentedContent).element;d.segmentedContent=this.getRealText(w.outerHTML)}null!==(c=d[0])&&void 0!==c&&c.url&&(d[0].url=this.getRealText(d[0].url)),e.response=JSON.stringify(d)}catch(t){var _,F,y,b,k,C,E=null!==(_=null!==(F=null===(y=e.originResponse)||void 0===y?void 0:y.headers)&&void 0!==F?F:e.headers)&&void 0!==_?_:{},x=e.response,A=e.config.url,R=null!==(b="function"==typeof E.get?null!==(k=E.get("content-type"))&&void 0!==k?k:E.get("Content-Type"):null!==(C=E["content-type"])&&void 0!==C?C:E["Content-Type"])&&void 0!==b?b:"";if(/xml/i.test(R)){var z,B,O=r(null!=x?x:null===(z=e.config.xhr)||void 0===z?void 0:z.responseXML,R),S=_createForOfIteratorHelper(O.element.querySelectorAll("a,rev,text"));try{for(S.s();!(B=S.n()).done;){var T=B.value;T.innerHTML=this.getRealText(T.innerHTML)}}catch(e){S.e(e)}finally{S.f()}e.response="".concat(O.dec).concat(O.dtd).concat(O.element.outerHTML)}else if(-1!==A.indexOf("/w/index.php"))if(-1!==A.indexOf("action=render")){var M=r(x).element.querySelector(".mw-parser-output");M&&(e.response=this.getRealText(M.outerHTML))}else/json|text/i.test(R)&&!/css|html|(ecma|java)script/i.test(R)&&(e.response=this.getRealText(x));else if(-1!==A.indexOf("/api/rest_v1/page/html")||-1!==A.indexOf("/api/rest_v1/transform/wikitext/to/html")||-1!==A.indexOf("/api/rest_v1/transform/wikitext/to/mobile-html")){var L=r(x);e.response="".concat(L.dtd).concat(this.getRealText(L.element.outerHTML))}else-1!==A.indexOf("/api/rest_v1/transform/html/to/wikitext")?e.response=this.getRealText(x):-1!==A.indexOf("xtools-api.".concat(this.MIRROR_DOMAIN))&&-1!==A.indexOf("format=html")&&(e.response=x.replace(/\/\/([a-z-]+(?:\.m)?)\.wikimedia\.org/g,"//$1.".concat(this.MIRROR_DOMAIN)).replace(/\/\/([a-z-]+\.)?(wiki(?:books|data|news|pedia|quote|source|versity|voyage)|wiktionary|mediawiki)\.org/g,"//$1$2.".concat(this.MIRROR_DOMAIN)))}return e}},{key:"extraCss",value:function(e){var t=".mw-wiki-logo{background-image:url(/static/images/mobile/copyright/wikipedia.png)!important;background-size:100px;filter:invert(.9)}",n="//upload.".concat(this.MIRROR_DOMAIN,"/wikimirror/zh/darkmode/zhwiki");switch(e){case"wikimirror-css-darkmode-logo-wiki-monobook":return"".concat(t,"@media only screen and (min-width:551px){body.skin--responsive #column-one{padding-top: 110px}body.skin--responsive #p-logo a,body.skin--responsive #p-logo a:hover{background-position:50% 15%!important}}");case"wikimirror-css-darkmode-logo-wiki-vector-legacy":return"".concat(t,"#p-logo{height:100px}#p-logo a{height:125px}");case"wikimirror-css-darkmode-logo-zhwiki":return".mw-wiki-logo{background-image:url(".concat(n,".png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans.png)}@media(-webkit-min-device-pixel-ratio:1.5),(min--moz-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:144dpi){.mw-wiki-logo{background-image:url(").concat(n,"-1.5x.png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans-1.5x.png)}}@media(-webkit-min-device-pixel-ratio:2),(min--moz-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.mw-wiki-logo{background-image:url(").concat(n,"-2x.png)}.mw-wiki-logo:lang(zh-hans),.mw-wiki-logo:lang(zh-cn),.mw-wiki-logo:lang(zh-my),.mw-wiki-logo:lang(zh-sg){background-image:url(").concat(n,"-hans-2x.png)}}")}}},{key:"initMessages",value:function(){var e=this.i18n().localize;return{ajaxLogin:{"6-digit number":e({ja:"6桁の数字","zh-hans":"6位数字","zh-hant":"6位數字"}),"Automatic account creation failed":e({ja:"アカウントの自動作成に失敗しました","zh-hans":"自动创建账号失败","zh-hant":"自動創建帳戶失敗"}),Cancel:e({ja:"キャンセル",zh:"取消"}),"Cross wiki automatic login":e({ja:"跨ウィキ自動ログイン","zh-hans":"跨维基自动登录","zh-hant":"跨维基自動登入"}),"Enter password":e({ja:"パスワード","zh-hans":"请输入密码","zh-hant":"請輸入密碼"}),"Enter 2FA verification code":e({en:"2FA verification code",ja:"2FA認証コード","zh-hans":"请输入2FA验证码","zh-hant":"請輸入2FA驗證碼"}),"Forgot password?":e({ja:"パスワードをお忘れですか？","zh-hans":"忘记密码？","zh-hant":"忘記密碼？"}),"Getting login token":e({ja:"ログイントークンを取得しています","zh-hans":"正在获取登录令牌","zh-hant":"正在獲取登入權杖"}),"If selected, the login status will be kept for 1 year. If not selected, it will be kept for 1 month.":e({ja:"チェックを入れるとログイン状態が1年間保持され、入れない場合は1ヶ月間保持されます。","zh-hans":"勾选则保持登录状态1年，不勾选则保持1个月。","zh-hant":"勾選则保持登入狀態1年，不勾選則保持1個月。"}),"Keep me logged in":e({ja:"ログイン状態を保持","zh-hans":"记住我的登录状态","zh-hant":"記住我的登入狀態"}),"Logging in":e({ja:"ログインしています","zh-hans":"正在登录","zh-hant":"正在登入"}),Login:e({ja:"ログイン","zh-hans":"登录","zh-hant":"登入"}),"Login cancelled":e({ja:"ログインキャンセル","zh-hans":"登录取消","zh-hant":"登入取消"}),"Login succeed":e({ja:"ログインに成功しました","zh-hans":"登录成功","zh-hant":"登入成功"}),"Login token getted":e({ja:"ログイントークンの取得に成功しました","zh-hans":"获取登录令牌成功","zh-hant":"獲取登入權杖成功"}),"New password":e({ja:"新しいパスワード","zh-hans":"新密码","zh-hant":"新密碼"}),"New password is required":e({ja:"新しいパスワードを設定してください","zh-hans":"需要设置新密码","zh-hant":"需要設置新密碼"}),Password:e({ja:"パスワード","zh-hans":"密码","zh-hant":"密碼"}),"Reset password":e({ja:"パスワードをリセット","zh-hans":"重置密码","zh-hant":"重新設定密碼"}),"Starting automatic login":e({ja:"自動ログインが開始されました","zh-hans":"开始自动登录","zh-hant":"开始自動登入"}),"The 2FA verification code cannot be empty":e({ja:"2FA認証コードが入力されていません","zh-hans":"2FA验证码不能为空","zh-hant":"2FA驗證碼不能爲空"}),"The password cannot be empty":e({ja:"パスワードが入力されていません","zh-hans":"密码不能为空","zh-hant":"密碼不能爲空"}),"The username or password cannot be empty":e({ja:"利用者名またはパスワードが入力されていません","zh-cn":"用户名或密码不能为空","zh-hk":"用戶名稱或密碼不能爲空","zh-tw":"使用者名稱或密碼不能爲空"}),"The user has been globally locked":e({ja:"利用者はグローバルにロックされています","zh-cn":"用户已被全域锁定","zh-hk":"用戶已被全域封鎖","zh-tw":"使用者已被全域封鎖"}),"The user login is too frequent, please try again in five minutes":e({ja:"利用者が頻繁すぎるため、5分後に再試行してください","zh-cn":"用户登录过于频繁，请五分钟后再试","zh-hk":"用戶登入過於頻繁，請五分鐘後再試","zh-tw":"使用者登入过于频繁，请五分钟后再试"}),"Unknown API error":e({ja:"未定義のAPIエラー","zh-hans":"未定义的API错误","zh-hant":"未定義的API錯誤"}),Username:e({ja:"利用者名","zh-cn":"用户名","zh-hk":"用戶名稱","zh-tw":"使用者名稱"}),"Invalid 2FA verification code":e({ja:"2FA認証コードが間違っています","zh-hans":"2FA验证码错误","zh-hant":"2FA驗證碼錯誤"}),"Invalid useruame or password":e({ja:"利用者名またはパスワードが間違っています","zh-cn":"用户名或密码错误","zh-hk":"用戶名稱或密碼錯誤","zh-tw":"使用者名稱或密碼錯誤"})},confirmLogout:{"Confirm logout?":e({ja:"ログアウトしますか？","zh-hans":"您确定要退出吗？","zh-hant":"您確定要登出嗎？"})},darkMode:{"Dark mode":e({ja:"ダークモード","zh-hans":"深色主题","zh-hant":"深色主題"}),"Light mode":e({ja:"通常モード","zh-hans":"浅色主题","zh-hant":"淺色主題"}),"Switch to dark mode":e({ja:"ダークモードに切り替えています","zh-hans":"将镜像站的主题色切换至深色","zh-hant":"將鏡像站的主題色切換至深色"}),"Switch to light mode":e({ja:"通常モードに切り替えています","zh-hans":"将镜像站的主题色切换至浅色","zh-hant":"將鏡像站的主題色切換至淺色"})},diffLink:{"Copy the link to the diff version (wiki syntax)":e({ja:"現在の版間の差分リンクをコピーします（ウィキ記法）","zh-hans":"复制链接到当前差异版本的维基语法","zh-hant":"複製連結到當前差異版本的維基語法"}),"Copy the permanent link to the current version (wiki syntax)":e({ja:"このページのこの版への固定リンクをコピーします（ウィキ記法）","zh-hans":"复制链接到当前修订版本的维基语法","zh-hant":"複製連結到當前修訂版本的維基語法"}),"Diff link":e({ja:"現在の版間の差分リンク","zh-hans":"当前差异链接","zh-hant":"當前差異連結"}),"Permanent link":e({ja:"この版への固定リンク","zh-hans":"当前修订链接","zh-hant":"當前修訂連結"})},showNotice:{OK:e({ja:"了解",zh:"了解"})},showNetworkErrorNotice:{"Network error":e({ja:"ネットワークエラー","zh-hans":"网络异常","zh-hant":"網路異常"})},showRedirect:{"Official site":e({ja:"公式サイト","zh-hans":"访问官方页面","zh-hant":"造訪官方頁"}),"Redirect the current mirror page to its corresponding official page":e({ja:"現在のミラーページを公式の対応ページにリダイレクトします","zh-hans":"将当前镜像站页面重定向至官方相应页面","zh-hant":"將當前鏡像頁重新導向至官方相應頁"})}}}}]),e})();e()})()
})();